module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return TronWeb; });\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"@babel/runtime/helpers/typeof\");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"@babel/runtime/helpers/classCallCheck\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"@babel/runtime/helpers/createClass\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"@babel/runtime/helpers/possibleConstructorReturn\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"@babel/runtime/helpers/getPrototypeOf\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"@babel/runtime/helpers/inherits\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"@babel/runtime/helpers/assertThisInitialized\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var lib_providers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! lib/providers */ \"./src/lib/providers/index.js\");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! utils */ \"./src/utils/index.js\");\n/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! bignumber.js */ \"bignumber.js\");\n/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(bignumber_js__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! eventemitter3 */ \"eventemitter3\");\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(eventemitter3__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var lib_transactionBuilder__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! lib/transactionBuilder */ \"./src/lib/transactionBuilder.js\");\n/* harmony import */ var lib_trx__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! lib/trx */ \"./src/lib/trx.js\");\n/* harmony import */ var lib_contract__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! lib/contract */ \"./src/lib/contract/index.js\");\n/* harmony import */ var js_sha3__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! js-sha3 */ \"js-sha3\");\n/* harmony import */ var js_sha3__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(js_sha3__WEBPACK_IMPORTED_MODULE_17__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar TronWeb =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(TronWeb, _EventEmitter);\n\n  function TronWeb(fullNode, solidityNode) {\n    var _this;\n\n    var eventServer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var privateKey = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, TronWeb);\n\n    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(TronWeb).call(this));\n    if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isString(fullNode)) fullNode = new lib_providers__WEBPACK_IMPORTED_MODULE_10__[\"default\"].HttpProvider(fullNode);\n    if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isString(solidityNode)) solidityNode = new lib_providers__WEBPACK_IMPORTED_MODULE_10__[\"default\"].HttpProvider(solidityNode);\n    if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isString(eventServer)) eventServer = new lib_providers__WEBPACK_IMPORTED_MODULE_10__[\"default\"].HttpProvider(eventServer);\n\n    _this.setFullNode(fullNode);\n\n    _this.setSolidityNode(solidityNode);\n\n    _this.setEventServer(eventServer);\n\n    _this.providers = lib_providers__WEBPACK_IMPORTED_MODULE_10__[\"default\"];\n    _this.BigNumber = bignumber_js__WEBPACK_IMPORTED_MODULE_12___default.a;\n    _this.defaultBlock = false;\n    _this.defaultPrivateKey = false;\n    _this.defaultAddress = {\n      hex: false,\n      base58: false\n    };\n    ['sha3', 'toHex', 'toUtf8', 'fromUtf8', 'toAscii', 'fromAscii', 'toDecimal', 'fromDecimal', 'toSun', 'fromSun', 'toBigNumber', 'isAddress', 'createAccount', 'address'].forEach(function (key) {\n      _this[key] = TronWeb[key];\n    });\n    if (privateKey) _this.setPrivateKey(privateKey);\n    _this.transactionBuilder = new lib_transactionBuilder__WEBPACK_IMPORTED_MODULE_14__[\"default\"](_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8___default()(_this)));\n    _this.trx = new lib_trx__WEBPACK_IMPORTED_MODULE_15__[\"default\"](_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8___default()(_this)));\n    _this.utils = utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"];\n    _this.injectPromise = utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].promiseInjector(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8___default()(_this)));\n    return _this;\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(TronWeb, [{\n    key: \"setDefaultBlock\",\n    value: function setDefaultBlock() {\n      var blockID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if ([false, 'latest', 'earliest', 0].includes(blockID)) {\n        return this.defaultBlock = blockID;\n      }\n\n      if (!utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isInteger(blockID) || !blockID) throw new Error('Invalid block ID provided');\n      this.defaultBlock = Math.abs(blockID);\n    }\n  }, {\n    key: \"setPrivateKey\",\n    value: function setPrivateKey(privateKey) {\n      try {\n        this.setAddress(this.address.fromPrivateKey(privateKey));\n      } catch (_unused) {\n        throw new Error('Invalid private key provided');\n      }\n\n      this.defaultPrivateKey = privateKey;\n      this.emit('privateKeyChanged', privateKey);\n    }\n  }, {\n    key: \"setAddress\",\n    value: function setAddress(address) {\n      if (!this.isAddress(address)) throw new Error('Invalid address provided');\n      var hex = this.address.toHex(address);\n      var base58 = this.address.fromHex(address);\n      if (this.defaultPrivateKey && this.address.fromPrivateKey(this.defaultPrivateKey) !== base58) this.defaultPrivateKey = false;\n      this.defaultAddress = {\n        hex: hex,\n        base58: base58\n      };\n      this.emit('addressChanged', {\n        hex: hex,\n        base58: base58\n      });\n    }\n  }, {\n    key: \"isValidProvider\",\n    value: function isValidProvider(provider) {\n      return Object.values(lib_providers__WEBPACK_IMPORTED_MODULE_10__[\"default\"]).some(function (knownProvider) {\n        return provider instanceof knownProvider;\n      });\n    }\n  }, {\n    key: \"setFullNode\",\n    value: function setFullNode(fullNode) {\n      if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isString(fullNode)) fullNode = new lib_providers__WEBPACK_IMPORTED_MODULE_10__[\"default\"].HttpProvider(fullNode);\n      if (!this.isValidProvider(fullNode)) throw new Error('Invalid full node provided');\n      this.fullNode = fullNode;\n      this.fullNode.setStatusPage('wallet/getnowblock');\n    }\n  }, {\n    key: \"setSolidityNode\",\n    value: function setSolidityNode(solidityNode) {\n      if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isString(solidityNode)) solidityNode = new lib_providers__WEBPACK_IMPORTED_MODULE_10__[\"default\"].HttpProvider(solidityNode);\n      if (!this.isValidProvider(solidityNode)) throw new Error('Invalid solidity node provided');\n      this.solidityNode = solidityNode;\n      this.solidityNode.setStatusPage('walletsolidity/getnowblock');\n    }\n  }, {\n    key: \"setEventServer\",\n    value: function setEventServer() {\n      var _this2 = this;\n\n      var eventServer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!eventServer) return this.eventServer = false;\n      if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isString(eventServer)) eventServer = new lib_providers__WEBPACK_IMPORTED_MODULE_10__[\"default\"].HttpProvider(eventServer);\n      if (!this.isValidProvider(eventServer)) throw new Error('Invalid event server provided');\n      this.eventServer = eventServer;\n\n      this.eventServer.isConnected = function () {\n        return _this2.eventServer.request('healthcheck').then(function () {\n          return true;\n        }).catch(function () {\n          return _this2.eventServer.request('events?size=1').then(function (data) {\n            return Array.isArray(data);\n          });\n        }).catch(function () {\n          return false;\n        });\n      };\n    }\n  }, {\n    key: \"currentProviders\",\n    value: function currentProviders() {\n      return {\n        fullNode: this.fullNode,\n        solidityNode: this.solidityNode,\n        eventServer: this.eventServer\n      };\n    }\n  }, {\n    key: \"currentProvider\",\n    value: function currentProvider() {\n      return this.currentProviders();\n    }\n  }, {\n    key: \"getEventResult\",\n    value: function getEventResult() {\n      var contractAddress = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var sinceTimestamp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var eventName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var blockNumber = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var size = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 20;\n      var page = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n      var callback = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isFunction(page)) {\n        callback = page;\n        page = 1;\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isFunction(size)) {\n        callback = size;\n        size = 20;\n      }\n\n      if (!callback) return this.injectPromise(this.getEventResult, contractAddress, sinceTimestamp, eventName, blockNumber, size, page);\n      if (!this.eventServer) callback('No event server configured');\n\n      if (size > 200) {\n        console.info('Defaulting to maximum accepted size: 200');\n        size = 200;\n      }\n\n      var routeParams = [];\n      if (!this.isAddress(contractAddress)) return callback('Invalid contract address provided');\n      if (eventName && !contractAddress) return callback('Usage of event name filtering requires a contract address');\n      if (blockNumber && !eventName) return callback('Usage of block number filtering requires an event name');\n      if (contractAddress) routeParams.push(this.address.fromHex(contractAddress));\n      if (eventName) routeParams.push(eventName);\n      if (blockNumber) routeParams.push(blockNumber);\n      return this.eventServer.request(\"event/contract/\".concat(routeParams.join('/'), \"?since=\").concat(sinceTimestamp, \"&size=\").concat(size, \"&page=\").concat(page)).then(function () {\n        var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        if (!data) return callback('Unknown error occurred');\n        if (!utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isArray(data)) return callback(data);\n        return callback(null, data.map(function (event) {\n          return utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].mapEvent(event);\n        }));\n      }).catch(function (err) {\n        return callback(err.response && err.response.data || err);\n      });\n    }\n  }, {\n    key: \"getEventByTransactionID\",\n    value: function getEventByTransactionID() {\n      var transactionID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!callback) return this.injectPromise(this.getEventByTransactionID, transactionID);\n      if (!this.eventServer) callback('No event server configured');\n      return this.eventServer.request(\"event/transaction/\".concat(transactionID)).then(function () {\n        var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        if (!data) return callback('Unknown error occurred');\n        if (!utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isArray(data)) return callback(data);\n        return callback(null, data.map(function (event) {\n          return utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].mapEvent(event);\n        }));\n      }).catch(function (err) {\n        return callback(err.response && err.response.data || err);\n      });\n    }\n  }, {\n    key: \"contract\",\n    value: function contract() {\n      var abi = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var address = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return new lib_contract__WEBPACK_IMPORTED_MODULE_16__[\"default\"](this, abi, address);\n    }\n  }, {\n    key: \"isConnected\",\n    value: function () {\n      var _isConnected = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {\n        var callback,\n            _args = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                callback = _args.length > 0 && _args[0] !== undefined ? _args[0] : false;\n\n                if (callback) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", this.injectPromise(this.isConnected));\n\n              case 3:\n                _context.t0 = callback;\n                _context.next = 6;\n                return this.fullNode.isConnected();\n\n              case 6:\n                _context.t1 = _context.sent;\n                _context.next = 9;\n                return this.solidityNode.isConnected();\n\n              case 9:\n                _context.t2 = _context.sent;\n                _context.t3 = this.eventServer;\n\n                if (!_context.t3) {\n                  _context.next = 15;\n                  break;\n                }\n\n                _context.next = 14;\n                return this.eventServer.isConnected();\n\n              case 14:\n                _context.t3 = _context.sent;\n\n              case 15:\n                _context.t4 = _context.t3;\n                _context.t5 = {\n                  fullNode: _context.t1,\n                  solidityNode: _context.t2,\n                  eventServer: _context.t4\n                };\n                (0, _context.t0)(null, _context.t5);\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function isConnected() {\n        return _isConnected.apply(this, arguments);\n      };\n    }()\n  }], [{\n    key: \"sha3\",\n    value: function sha3(string) {\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      return (prefix ? '0x' : '') + Object(js_sha3__WEBPACK_IMPORTED_MODULE_17__[\"keccak256\"])(string);\n    }\n  }, {\n    key: \"toHex\",\n    value: function toHex(val) {\n      if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isBoolean(val)) return TronWeb.fromDecimal(+val);\n      if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isBigNumber(val)) return TronWeb.fromDecimal(val);\n      if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(val) === 'object') return TronWeb.fromUtf8(JSON.stringify(val));\n\n      if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isString(val)) {\n        if (/^(-|)0x/.test(val)) return val;\n        if (!isFinite(val)) return TronWeb.fromUtf8(val);\n      }\n\n      var result = TronWeb.fromDecimal(val);\n\n      if (result === '0xNaN') {\n        throw new Error('The passed value is not convertible to a hex string');\n      } else {\n        return result;\n      }\n    }\n  }, {\n    key: \"toUtf8\",\n    value: function toUtf8(hex) {\n      if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isHex(hex)) {\n        hex = hex.replace(/^0x/, '');\n        return Buffer.from(hex, 'hex').toString('utf8');\n      } else {\n        throw new Error('The passed value is not a valid hex string');\n      }\n    }\n  }, {\n    key: \"fromUtf8\",\n    value: function fromUtf8(string) {\n      if (!utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isString(string)) {\n        throw new Error('The passed value is not a valid utf-8 string');\n      }\n\n      return '0x' + Buffer.from(string, 'utf8').toString('hex');\n    }\n  }, {\n    key: \"toAscii\",\n    value: function toAscii(hex) {\n      if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isHex(hex)) {\n        var str = \"\";\n        var i = 0,\n            l = hex.length;\n\n        if (hex.substring(0, 2) === '0x') {\n          i = 2;\n        }\n\n        for (; i < l; i += 2) {\n          var code = parseInt(hex.substr(i, 2), 16);\n          str += String.fromCharCode(code);\n        }\n\n        return str;\n      } else {\n        throw new Error('The passed value is not a valid hex string');\n      }\n    }\n  }, {\n    key: \"fromAscii\",\n    value: function fromAscii(string, padding) {\n      if (!utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isString(string)) {\n        throw new Error('The passed value is not a valid utf-8 string');\n      }\n\n      return '0x' + Buffer.from(string, 'ascii').toString('hex').padEnd(padding, '0');\n    }\n  }, {\n    key: \"toDecimal\",\n    value: function toDecimal(value) {\n      return TronWeb.toBigNumber(value).toNumber();\n    }\n  }, {\n    key: \"fromDecimal\",\n    value: function fromDecimal(value) {\n      var number = TronWeb.toBigNumber(value);\n      var result = number.toString(16);\n      return number.isLessThan(0) ? '-0x' + result.substr(1) : '0x' + result;\n    }\n  }, {\n    key: \"fromSun\",\n    value: function fromSun(sun) {\n      var trx = TronWeb.toBigNumber(sun).div(1000000);\n      return utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isBigNumber(sun) ? trx : trx.toString(10);\n    }\n  }, {\n    key: \"toSun\",\n    value: function toSun(trx) {\n      var sun = TronWeb.toBigNumber(trx).times(1000000);\n      return utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isBigNumber(trx) ? sun : sun.toString(10);\n    }\n  }, {\n    key: \"toBigNumber\",\n    value: function toBigNumber() {\n      var amount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isBigNumber(amount)) return amount;\n      if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isString(amount) && /^(-|)0x/.test(amount)) return new bignumber_js__WEBPACK_IMPORTED_MODULE_12___default.a(amount.replace('0x', ''), 16);\n      return new bignumber_js__WEBPACK_IMPORTED_MODULE_12___default.a(amount.toString(10), 10);\n    }\n  }, {\n    key: \"isAddress\",\n    value: function isAddress() {\n      var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isString(address)) return false; // Convert HEX to Base58\n\n      if (address.length === 42) {\n        try {\n          return TronWeb.isAddress(utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].crypto.getBase58CheckAddress(utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].code.hexStr2byteArray(address) // it throws an error if the address starts with 0x\n          ));\n        } catch (err) {\n          return false;\n        }\n      }\n\n      try {\n        return utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].crypto.isAddressValid(address);\n      } catch (err) {\n        return false;\n      }\n    }\n  }, {\n    key: \"createAccount\",\n    value: function () {\n      var _createAccount = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2() {\n        var callback,\n            account,\n            _args2 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                callback = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : false;\n                account = utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].accounts.generateAccount();\n                if (callback) callback(null, account);\n                return _context2.abrupt(\"return\", account);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function createAccount() {\n        return _createAccount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"address\",\n    get: function get() {\n      return {\n        fromHex: function fromHex(address) {\n          if (!utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isHex(address)) return address;\n          return utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].crypto.getBase58CheckAddress(utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].code.hexStr2byteArray(address));\n        },\n        toHex: function toHex(address) {\n          if (utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].isHex(address)) return address.toLowerCase().replace(/^0x/, '41');\n          return utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].code.byteArray2hexStr(utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].crypto.decodeBase58Address(address)).toLowerCase();\n        },\n        fromPrivateKey: function fromPrivateKey(privateKey) {\n          try {\n            return utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"].crypto.pkToAddress(privateKey);\n          } catch (_unused2) {\n            return false;\n          }\n        }\n      };\n    }\n  }]);\n\n  return TronWeb;\n}(eventemitter3__WEBPACK_IMPORTED_MODULE_13___default.a);\n\n_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(TronWeb, \"providers\", lib_providers__WEBPACK_IMPORTED_MODULE_10__[\"default\"]);\n\n_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(TronWeb, \"BigNumber\", bignumber_js__WEBPACK_IMPORTED_MODULE_12___default.a);\n\n_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(TronWeb, \"TransactionBuilder\", lib_transactionBuilder__WEBPACK_IMPORTED_MODULE_14__[\"default\"]);\n\n_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(TronWeb, \"Trx\", lib_trx__WEBPACK_IMPORTED_MODULE_15__[\"default\"]);\n\n_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(TronWeb, \"Contract\", lib_contract__WEBPACK_IMPORTED_MODULE_16__[\"default\"]);\n\n\n;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcHJvdmlkZXJzIGZyb20gJ2xpYi9wcm92aWRlcnMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJ3V0aWxzJztcbmltcG9ydCBCaWdOdW1iZXIgZnJvbSAnYmlnbnVtYmVyLmpzJztcbmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnZXZlbnRlbWl0dGVyMyc7XG5cbmltcG9ydCBUcmFuc2FjdGlvbkJ1aWxkZXIgZnJvbSAnbGliL3RyYW5zYWN0aW9uQnVpbGRlcic7XG5pbXBvcnQgVHJ4IGZyb20gJ2xpYi90cngnO1xuaW1wb3J0IENvbnRyYWN0IGZyb20gJ2xpYi9jb250cmFjdCc7XG5cbmltcG9ydCB7IGtlY2NhazI1NiB9IGZyb20gJ2pzLXNoYTMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUcm9uV2ViIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgICBzdGF0aWMgcHJvdmlkZXJzID0gcHJvdmlkZXJzO1xuICAgIHN0YXRpYyBCaWdOdW1iZXIgPSBCaWdOdW1iZXI7XG4gICAgc3RhdGljIFRyYW5zYWN0aW9uQnVpbGRlciA9IFRyYW5zYWN0aW9uQnVpbGRlcjtcbiAgICBzdGF0aWMgVHJ4ID0gVHJ4O1xuICAgIHN0YXRpYyBDb250cmFjdCA9IENvbnRyYWN0O1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKGZ1bGxOb2RlLCBzb2xpZGl0eU5vZGUsIGV2ZW50U2VydmVyID0gZmFsc2UsIHByaXZhdGVLZXkgPSBmYWxzZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIGlmKHV0aWxzLmlzU3RyaW5nKGZ1bGxOb2RlKSlcbiAgICAgICAgICAgIGZ1bGxOb2RlID0gbmV3IHByb3ZpZGVycy5IdHRwUHJvdmlkZXIoZnVsbE5vZGUpO1xuXG4gICAgICAgIGlmKHV0aWxzLmlzU3RyaW5nKHNvbGlkaXR5Tm9kZSkpXG4gICAgICAgICAgICBzb2xpZGl0eU5vZGUgPSBuZXcgcHJvdmlkZXJzLkh0dHBQcm92aWRlcihzb2xpZGl0eU5vZGUpO1xuXG4gICAgICAgIGlmKHV0aWxzLmlzU3RyaW5nKGV2ZW50U2VydmVyKSlcbiAgICAgICAgICAgIGV2ZW50U2VydmVyID0gbmV3IHByb3ZpZGVycy5IdHRwUHJvdmlkZXIoZXZlbnRTZXJ2ZXIpO1xuXG4gICAgICAgIHRoaXMuc2V0RnVsbE5vZGUoZnVsbE5vZGUpO1xuICAgICAgICB0aGlzLnNldFNvbGlkaXR5Tm9kZShzb2xpZGl0eU5vZGUpO1xuICAgICAgICB0aGlzLnNldEV2ZW50U2VydmVyKGV2ZW50U2VydmVyKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucHJvdmlkZXJzID0gcHJvdmlkZXJzO1xuICAgICAgICB0aGlzLkJpZ051bWJlciA9IEJpZ051bWJlcjtcblxuICAgICAgICB0aGlzLmRlZmF1bHRCbG9jayA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlZmF1bHRQcml2YXRlS2V5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGVmYXVsdEFkZHJlc3MgPSB7XG4gICAgICAgICAgICBoZXg6IGZhbHNlLFxuICAgICAgICAgICAgYmFzZTU4OiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgW1xuICAgICAgICAgICAgJ3NoYTMnLCAndG9IZXgnLCAndG9VdGY4JywgJ2Zyb21VdGY4JyxcbiAgICAgICAgICAgICd0b0FzY2lpJywgJ2Zyb21Bc2NpaScsICd0b0RlY2ltYWwnLCAnZnJvbURlY2ltYWwnLFxuICAgICAgICAgICAgJ3RvU3VuJywgJ2Zyb21TdW4nLCAndG9CaWdOdW1iZXInLCAnaXNBZGRyZXNzJywgXG4gICAgICAgICAgICAnY3JlYXRlQWNjb3VudCcsICdhZGRyZXNzJ1xuICAgICAgICBdLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIHRoaXNba2V5XSA9IFRyb25XZWJba2V5XTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYocHJpdmF0ZUtleSlcbiAgICAgICAgICAgIHRoaXMuc2V0UHJpdmF0ZUtleShwcml2YXRlS2V5KTtcblxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uQnVpbGRlciA9IG5ldyBUcmFuc2FjdGlvbkJ1aWxkZXIodGhpcyk7XG4gICAgICAgIHRoaXMudHJ4ID0gbmV3IFRyeCh0aGlzKTtcbiAgICAgICAgdGhpcy51dGlscyA9IHV0aWxzO1xuXG4gICAgICAgIHRoaXMuaW5qZWN0UHJvbWlzZSA9IHV0aWxzLnByb21pc2VJbmplY3Rvcih0aGlzKTtcbiAgICB9XG5cbiAgICBzZXREZWZhdWx0QmxvY2soYmxvY2tJRCA9IGZhbHNlKSB7XG4gICAgICAgIGlmKFsgZmFsc2UsICdsYXRlc3QnLCAnZWFybGllc3QnLCAwIF0uaW5jbHVkZXMoYmxvY2tJRCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRCbG9jayA9IGJsb2NrSUQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKGJsb2NrSUQpIHx8ICFibG9ja0lEKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGJsb2NrIElEIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgdGhpcy5kZWZhdWx0QmxvY2sgPSBNYXRoLmFicyhibG9ja0lEKTtcbiAgICB9XG5cbiAgICBzZXRQcml2YXRlS2V5KHByaXZhdGVLZXkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuc2V0QWRkcmVzcyhcbiAgICAgICAgICAgICAgICB0aGlzLmFkZHJlc3MuZnJvbVByaXZhdGVLZXkocHJpdmF0ZUtleSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHByaXZhdGUga2V5IHByb3ZpZGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRlZmF1bHRQcml2YXRlS2V5ID0gcHJpdmF0ZUtleTtcbiAgICAgICAgdGhpcy5lbWl0KCdwcml2YXRlS2V5Q2hhbmdlZCcsIHByaXZhdGVLZXkpO1xuICAgIH1cblxuICAgIHNldEFkZHJlc3MoYWRkcmVzcykge1xuICAgICAgICBpZighdGhpcy5pc0FkZHJlc3MoYWRkcmVzcykpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIGNvbnN0IGhleCA9IHRoaXMuYWRkcmVzcy50b0hleChhZGRyZXNzKTtcbiAgICAgICAgY29uc3QgYmFzZTU4ID0gdGhpcy5hZGRyZXNzLmZyb21IZXgoYWRkcmVzcyk7XG5cbiAgICAgICAgaWYodGhpcy5kZWZhdWx0UHJpdmF0ZUtleSAmJiB0aGlzLmFkZHJlc3MuZnJvbVByaXZhdGVLZXkodGhpcy5kZWZhdWx0UHJpdmF0ZUtleSkgIT09IGJhc2U1OClcbiAgICAgICAgICAgdGhpcy5kZWZhdWx0UHJpdmF0ZUtleSA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuZGVmYXVsdEFkZHJlc3MgPSB7XG4gICAgICAgICAgICBoZXgsXG4gICAgICAgICAgICBiYXNlNThcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmVtaXQoJ2FkZHJlc3NDaGFuZ2VkJywgeyBoZXgsIGJhc2U1OCB9KTtcbiAgICB9XG5cbiAgICBpc1ZhbGlkUHJvdmlkZXIocHJvdmlkZXIpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMocHJvdmlkZXJzKS5zb21lKGtub3duUHJvdmlkZXIgPT4gcHJvdmlkZXIgaW5zdGFuY2VvZiBrbm93blByb3ZpZGVyKTtcbiAgICB9XG5cbiAgICBzZXRGdWxsTm9kZShmdWxsTm9kZSkge1xuICAgICAgICBpZih1dGlscy5pc1N0cmluZyhmdWxsTm9kZSkpXG4gICAgICAgICAgICBmdWxsTm9kZSA9IG5ldyBwcm92aWRlcnMuSHR0cFByb3ZpZGVyKGZ1bGxOb2RlKTtcblxuICAgICAgICBpZighdGhpcy5pc1ZhbGlkUHJvdmlkZXIoZnVsbE5vZGUpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGZ1bGwgbm9kZSBwcm92aWRlZCcpO1xuXG4gICAgICAgIHRoaXMuZnVsbE5vZGUgPSBmdWxsTm9kZTtcbiAgICAgICAgdGhpcy5mdWxsTm9kZS5zZXRTdGF0dXNQYWdlKCd3YWxsZXQvZ2V0bm93YmxvY2snKTtcbiAgICB9XG5cbiAgICBzZXRTb2xpZGl0eU5vZGUoc29saWRpdHlOb2RlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzU3RyaW5nKHNvbGlkaXR5Tm9kZSkpXG4gICAgICAgICAgICBzb2xpZGl0eU5vZGUgPSBuZXcgcHJvdmlkZXJzLkh0dHBQcm92aWRlcihzb2xpZGl0eU5vZGUpO1xuXG4gICAgICAgIGlmKCF0aGlzLmlzVmFsaWRQcm92aWRlcihzb2xpZGl0eU5vZGUpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHNvbGlkaXR5IG5vZGUgcHJvdmlkZWQnKTtcblxuICAgICAgICB0aGlzLnNvbGlkaXR5Tm9kZSA9IHNvbGlkaXR5Tm9kZTtcbiAgICAgICAgdGhpcy5zb2xpZGl0eU5vZGUuc2V0U3RhdHVzUGFnZSgnd2FsbGV0c29saWRpdHkvZ2V0bm93YmxvY2snKTtcbiAgICB9XG5cbiAgICBzZXRFdmVudFNlcnZlcihldmVudFNlcnZlciA9IGZhbHNlKSB7XG4gICAgICAgIGlmKCFldmVudFNlcnZlcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50U2VydmVyID0gZmFsc2U7XG5cbiAgICAgICAgaWYodXRpbHMuaXNTdHJpbmcoZXZlbnRTZXJ2ZXIpKVxuICAgICAgICAgICAgZXZlbnRTZXJ2ZXIgPSBuZXcgcHJvdmlkZXJzLkh0dHBQcm92aWRlcihldmVudFNlcnZlcik7XG4gICAgICAgICAgICBcbiAgICAgICAgaWYoIXRoaXMuaXNWYWxpZFByb3ZpZGVyKGV2ZW50U2VydmVyKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBldmVudCBzZXJ2ZXIgcHJvdmlkZWQnKTtcblxuICAgICAgICB0aGlzLmV2ZW50U2VydmVyID0gZXZlbnRTZXJ2ZXI7XG4gICAgICAgIHRoaXMuZXZlbnRTZXJ2ZXIuaXNDb25uZWN0ZWQgPSAoKSA9PiB0aGlzLmV2ZW50U2VydmVyLnJlcXVlc3QoJ2hlYWx0aGNoZWNrJykudGhlbigoKSA9PiB0cnVlKS5jYXRjaCgoKSA9PiAoXG4gICAgICAgICAgICB0aGlzLmV2ZW50U2VydmVyLnJlcXVlc3QoJ2V2ZW50cz9zaXplPTEnKS50aGVuKGRhdGEgPT4gKFxuICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoZGF0YSlcbiAgICAgICAgICAgICkpXG4gICAgICAgICkpLmNhdGNoKCgpID0+IGZhbHNlKTtcbiAgICB9XG5cbiAgICBjdXJyZW50UHJvdmlkZXJzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZnVsbE5vZGU6IHRoaXMuZnVsbE5vZGUsXG4gICAgICAgICAgICBzb2xpZGl0eU5vZGU6IHRoaXMuc29saWRpdHlOb2RlLFxuICAgICAgICAgICAgZXZlbnRTZXJ2ZXI6IHRoaXMuZXZlbnRTZXJ2ZXJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjdXJyZW50UHJvdmlkZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRQcm92aWRlcnMoKTtcbiAgICB9XG5cbiAgICBnZXRFdmVudFJlc3VsdChjb250cmFjdEFkZHJlc3MgPSBmYWxzZSwgc2luY2VUaW1lc3RhbXAgPSAwLCBldmVudE5hbWUgPSBmYWxzZSwgYmxvY2tOdW1iZXIgPSBmYWxzZSwgc2l6ZSA9IDIwLCBwYWdlID0gMSwgY2FsbGJhY2sgPSBmYWxzZSkge1xuXG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24ocGFnZSkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gcGFnZTtcbiAgICAgICAgICAgIHBhZ2UgPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihzaXplKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBzaXplO1xuICAgICAgICAgICAgc2l6ZSA9IDIwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmdldEV2ZW50UmVzdWx0LCBjb250cmFjdEFkZHJlc3MsIHNpbmNlVGltZXN0YW1wLCBldmVudE5hbWUsIGJsb2NrTnVtYmVyLCBzaXplLCBwYWdlKTtcblxuICAgICAgICBpZighdGhpcy5ldmVudFNlcnZlcilcbiAgICAgICAgICAgIGNhbGxiYWNrKCdObyBldmVudCBzZXJ2ZXIgY29uZmlndXJlZCcpO1xuXG4gICAgICAgIGlmKHNpemUgPiAyMDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnRGVmYXVsdGluZyB0byBtYXhpbXVtIGFjY2VwdGVkIHNpemU6IDIwMCcpO1xuICAgICAgICAgICAgc2l6ZSA9IDIwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJvdXRlUGFyYW1zID0gW107XG5cbiAgICAgICAgaWYoIXRoaXMuaXNBZGRyZXNzKGNvbnRyYWN0QWRkcmVzcykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgY29udHJhY3QgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKGV2ZW50TmFtZSAmJiAhY29udHJhY3RBZGRyZXNzKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdVc2FnZSBvZiBldmVudCBuYW1lIGZpbHRlcmluZyByZXF1aXJlcyBhIGNvbnRyYWN0IGFkZHJlc3MnKTtcbiAgICAgICAgXG4gICAgICAgIGlmKGJsb2NrTnVtYmVyICYmICFldmVudE5hbWUpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ1VzYWdlIG9mIGJsb2NrIG51bWJlciBmaWx0ZXJpbmcgcmVxdWlyZXMgYW4gZXZlbnQgbmFtZScpO1xuXG4gICAgICAgIGlmKGNvbnRyYWN0QWRkcmVzcylcbiAgICAgICAgICAgIHJvdXRlUGFyYW1zLnB1c2godGhpcy5hZGRyZXNzLmZyb21IZXgoY29udHJhY3RBZGRyZXNzKSk7XG5cbiAgICAgICAgaWYoZXZlbnROYW1lKVxuICAgICAgICAgICAgcm91dGVQYXJhbXMucHVzaChldmVudE5hbWUpO1xuXG4gICAgICAgIGlmKGJsb2NrTnVtYmVyKVxuICAgICAgICAgICAgcm91dGVQYXJhbXMucHVzaChibG9ja051bWJlcik7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRTZXJ2ZXIucmVxdWVzdChgZXZlbnQvY29udHJhY3QvJHtyb3V0ZVBhcmFtcy5qb2luKCcvJyl9P3NpbmNlPSR7c2luY2VUaW1lc3RhbXB9JnNpemU9JHtzaXplfSZwYWdlPSR7cGFnZX1gKS50aGVuKChkYXRhID0gZmFsc2UpID0+IHtcbiAgICAgICAgICAgIGlmKCFkYXRhKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnVW5rbm93biBlcnJvciBvY2N1cnJlZCcpO1xuXG4gICAgICAgICAgICBpZighdXRpbHMuaXNBcnJheShkYXRhKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZGF0YSk7XG5cbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBcbiAgICAgICAgICAgICAgICBkYXRhLm1hcChldmVudCA9PiB1dGlscy5tYXBFdmVudChldmVudCkpXG4gICAgICAgICAgICApO1xuICAgICAgICB9KS5jYXRjaChlcnIgPT4gY2FsbGJhY2soKGVyci5yZXNwb25zZSAmJiBlcnIucmVzcG9uc2UuZGF0YSkgfHwgZXJyKSk7IFxuICAgIH1cblxuICAgIGdldEV2ZW50QnlUcmFuc2FjdGlvbklEKHRyYW5zYWN0aW9uSUQgPSBmYWxzZSwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0RXZlbnRCeVRyYW5zYWN0aW9uSUQsIHRyYW5zYWN0aW9uSUQpO1xuXG4gICAgICAgIGlmKCF0aGlzLmV2ZW50U2VydmVyKVxuICAgICAgICAgICAgY2FsbGJhY2soJ05vIGV2ZW50IHNlcnZlciBjb25maWd1cmVkJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRTZXJ2ZXIucmVxdWVzdChgZXZlbnQvdHJhbnNhY3Rpb24vJHt0cmFuc2FjdGlvbklEfWApLnRoZW4oKGRhdGEgPSBmYWxzZSkgPT4ge1xuICAgICAgICAgICAgaWYoIWRhdGEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdVbmtub3duIGVycm9yIG9jY3VycmVkJyk7XG5cbiAgICAgICAgICAgIGlmKCF1dGlscy5pc0FycmF5KGRhdGEpKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhkYXRhKTtcblxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFxuICAgICAgICAgICAgICAgIGRhdGEubWFwKGV2ZW50ID0+IHV0aWxzLm1hcEV2ZW50KGV2ZW50KSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBjYWxsYmFjaygoZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5kYXRhKSB8fCBlcnIpKTtcbiAgICB9XG5cbiAgICBjb250cmFjdChhYmkgPSBbXSwgYWRkcmVzcyA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29udHJhY3QodGhpcywgYWJpLCBhZGRyZXNzKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IGFkZHJlc3MoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmcm9tSGV4KGFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICBpZighdXRpbHMuaXNIZXgoYWRkcmVzcykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhZGRyZXNzO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzLmNyeXB0by5nZXRCYXNlNThDaGVja0FkZHJlc3MoXG4gICAgICAgICAgICAgICAgICAgIHV0aWxzLmNvZGUuaGV4U3RyMmJ5dGVBcnJheShhZGRyZXNzKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdG9IZXgoYWRkcmVzcykge1xuICAgICAgICAgICAgICAgIGlmKHV0aWxzLmlzSGV4KGFkZHJlc3MpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRkcmVzcy50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL14weC8sJzQxJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdXRpbHMuY29kZS5ieXRlQXJyYXkyaGV4U3RyKFxuICAgICAgICAgICAgICAgICAgICB1dGlscy5jcnlwdG8uZGVjb2RlQmFzZTU4QWRkcmVzcyhhZGRyZXNzKVxuICAgICAgICAgICAgICAgICkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmcm9tUHJpdmF0ZUtleShwcml2YXRlS2V5KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzLmNyeXB0by5wa1RvQWRkcmVzcyhwcml2YXRlS2V5KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgc2hhMyhzdHJpbmcsIHByZWZpeCA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIChwcmVmaXggPyAnMHgnIDogJycpICsga2VjY2FrMjU2KHN0cmluZyk7XG4gICAgfVxuXG4gICAgc3RhdGljIHRvSGV4KHZhbCkge1xuICAgICAgICBpZih1dGlscy5pc0Jvb2xlYW4odmFsKSlcbiAgICAgICAgICAgIHJldHVybiBUcm9uV2ViLmZyb21EZWNpbWFsKCt2YWwpO1xuXG4gICAgICAgIGlmKHV0aWxzLmlzQmlnTnVtYmVyKHZhbCkpXG4gICAgICAgICAgICByZXR1cm4gVHJvbldlYi5mcm9tRGVjaW1hbCh2YWwpO1xuXG4gICAgICAgIGlmKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKVxuICAgICAgICAgICAgcmV0dXJuIFRyb25XZWIuZnJvbVV0ZjgoSlNPTi5zdHJpbmdpZnkodmFsKSk7XG5cbiAgICAgICAgaWYodXRpbHMuaXNTdHJpbmcodmFsKSkge1xuICAgICAgICAgICAgaWYgKC9eKC18KTB4Ly50ZXN0KHZhbCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcblxuICAgICAgICAgICAgaWYoIWlzRmluaXRlKHZhbCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRyb25XZWIuZnJvbVV0ZjgodmFsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXN1bHQgPSBUcm9uV2ViLmZyb21EZWNpbWFsKHZhbCk7XG4gICAgICAgIGlmIChyZXN1bHQgPT09ICcweE5hTicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHBhc3NlZCB2YWx1ZSBpcyBub3QgY29udmVydGlibGUgdG8gYSBoZXggc3RyaW5nJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIHRvVXRmOChoZXgpIHtcbiAgICAgICAgaWYgKHV0aWxzLmlzSGV4KGhleCkpIHtcbiAgICAgICAgICAgIGhleCA9IGhleC5yZXBsYWNlKC9eMHgvLCAnJyk7XG4gICAgICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oaGV4LCAnaGV4JykudG9TdHJpbmcoJ3V0ZjgnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHBhc3NlZCB2YWx1ZSBpcyBub3QgYSB2YWxpZCBoZXggc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZnJvbVV0Zjgoc3RyaW5nKSB7XG4gICAgICAgIGlmICghdXRpbHMuaXNTdHJpbmcoc3RyaW5nKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgcGFzc2VkIHZhbHVlIGlzIG5vdCBhIHZhbGlkIHV0Zi04IHN0cmluZycpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcweCcgKyBCdWZmZXIuZnJvbShzdHJpbmcsICd1dGY4JykudG9TdHJpbmcoJ2hleCcpO1xuICAgIH1cblxuICAgIHN0YXRpYyB0b0FzY2lpKGhleCkge1xuICAgICAgICBpZiAodXRpbHMuaXNIZXgoaGV4KSkge1xuICAgICAgICAgICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgICAgICAgICBsZXQgaSA9IDAsIGwgPSBoZXgubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGhleC5zdWJzdHJpbmcoMCwgMikgPT09ICcweCcpIHtcbiAgICAgICAgICAgICAgICBpID0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoOyBpIDwgbDsgaSs9Mikge1xuICAgICAgICAgICAgICAgIGxldCBjb2RlID0gcGFyc2VJbnQoaGV4LnN1YnN0cihpLCAyKSwgMTYpO1xuICAgICAgICAgICAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHBhc3NlZCB2YWx1ZSBpcyBub3QgYSB2YWxpZCBoZXggc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZnJvbUFzY2lpKHN0cmluZywgcGFkZGluZykge1xuICAgICAgICBpZiAoIXV0aWxzLmlzU3RyaW5nKHN0cmluZykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHBhc3NlZCB2YWx1ZSBpcyBub3QgYSB2YWxpZCB1dGYtOCBzdHJpbmcnKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnMHgnICsgQnVmZmVyLmZyb20oc3RyaW5nLCAnYXNjaWknKS50b1N0cmluZygnaGV4JykucGFkRW5kKHBhZGRpbmcsICcwJyk7XG4gICAgfVxuXG5cbiAgICBzdGF0aWMgdG9EZWNpbWFsKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBUcm9uV2ViLnRvQmlnTnVtYmVyKHZhbHVlKS50b051bWJlcigpO1xuICAgIH1cblxuICAgIHN0YXRpYyBmcm9tRGVjaW1hbCh2YWx1ZSkge1xuICAgICAgICBjb25zdCBudW1iZXIgPSBUcm9uV2ViLnRvQmlnTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbnVtYmVyLnRvU3RyaW5nKDE2KTtcblxuICAgICAgICByZXR1cm4gbnVtYmVyLmlzTGVzc1RoYW4oMCkgPyAnLTB4JyArIHJlc3VsdC5zdWJzdHIoMSkgOiAnMHgnICsgcmVzdWx0O1xuICAgIH1cblxuICAgIHN0YXRpYyBmcm9tU3VuKHN1bikge1xuICAgICAgICBjb25zdCB0cnggPSBUcm9uV2ViLnRvQmlnTnVtYmVyKHN1bikuZGl2KDFfMDAwXzAwMCk7ICAgICAgICBcbiAgICAgICAgcmV0dXJuIHV0aWxzLmlzQmlnTnVtYmVyKHN1bikgPyB0cnggOiB0cngudG9TdHJpbmcoMTApO1xuICAgIH1cblxuICAgIHN0YXRpYyB0b1N1bih0cngpIHtcbiAgICAgICAgY29uc3Qgc3VuID0gVHJvbldlYi50b0JpZ051bWJlcih0cngpLnRpbWVzKDFfMDAwXzAwMCk7ICAgICAgICBcbiAgICAgICAgcmV0dXJuIHV0aWxzLmlzQmlnTnVtYmVyKHRyeCkgPyBzdW4gOiBzdW4udG9TdHJpbmcoMTApO1xuICAgIH1cblxuICAgIHN0YXRpYyB0b0JpZ051bWJlcihhbW91bnQgPSAwKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzQmlnTnVtYmVyKGFtb3VudCkpXG4gICAgICAgICAgICByZXR1cm4gYW1vdW50O1xuXG4gICAgICAgIGlmKHV0aWxzLmlzU3RyaW5nKGFtb3VudCkgJiYgL14oLXwpMHgvLnRlc3QoYW1vdW50KSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmlnTnVtYmVyKGFtb3VudC5yZXBsYWNlKCcweCcsICcnKSwgMTYpO1xuXG4gICAgICAgIHJldHVybiBuZXcgQmlnTnVtYmVyKGFtb3VudC50b1N0cmluZygxMCksIDEwKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgaXNBZGRyZXNzKGFkZHJlc3MgPSBmYWxzZSkge1xuICAgICAgICBpZighdXRpbHMuaXNTdHJpbmcoYWRkcmVzcykpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgLy8gQ29udmVydCBIRVggdG8gQmFzZTU4XG4gICAgICAgIGlmKGFkZHJlc3MubGVuZ3RoID09PSA0Mikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJvbldlYi5pc0FkZHJlc3MoXG4gICAgICAgICAgICAgICAgICAgIHV0aWxzLmNyeXB0by5nZXRCYXNlNThDaGVja0FkZHJlc3MoXG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5jb2RlLmhleFN0cjJieXRlQXJyYXkoYWRkcmVzcykgLy8gaXQgdGhyb3dzIGFuIGVycm9yIGlmIHRoZSBhZGRyZXNzIHN0YXJ0cyB3aXRoIDB4XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBjYXRjaChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB1dGlscy5jcnlwdG8uaXNBZGRyZXNzVmFsaWQoYWRkcmVzcyk7XG4gICAgICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlQWNjb3VudChjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IGFjY291bnQgPSB1dGlscy5hY2NvdW50cy5nZW5lcmF0ZUFjY291bnQoKTtcblxuICAgICAgICBpZihjYWxsYmFjaylcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGFjY291bnQpO1xuXG4gICAgICAgIHJldHVybiBhY2NvdW50O1xuICAgIH1cblxuICAgIGFzeW5jIGlzQ29ubmVjdGVkKGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmlzQ29ubmVjdGVkKTtcblxuICAgICAgICBjYWxsYmFjayhudWxsLCB7XG4gICAgICAgICAgICBmdWxsTm9kZTogYXdhaXQgdGhpcy5mdWxsTm9kZS5pc0Nvbm5lY3RlZCgpLFxuICAgICAgICAgICAgc29saWRpdHlOb2RlOiBhd2FpdCB0aGlzLnNvbGlkaXR5Tm9kZS5pc0Nvbm5lY3RlZCgpLFxuICAgICAgICAgICAgZXZlbnRTZXJ2ZXI6IHRoaXMuZXZlbnRTZXJ2ZXIgJiYgYXdhaXQgdGhpcy5ldmVudFNlcnZlci5pc0Nvbm5lY3RlZCgpXG4gICAgICAgIH0pO1xuICAgIH1cbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7Ozs7QUFPQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFFQTtBQUdBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQU1BO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBMUNBO0FBMkNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFJQTtBQUFBO0FBSkE7QUFLQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQWtLQTtBQUNBO0FBQUE7Ozs7O0FBQ0E7QUFDQTs7QUFDQTs7QUFDQTtBQUNBOzs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQURBO0FBQ0E7Ozs7Ozs7QUFIQTtBQUNBO0FBQ0E7O0FBSEE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FBM0lBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUdBO0FBR0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FBOUpBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFyQkE7QUF1QkE7Ozs7QUE5UEE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFnWkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/lib/contract/index.js":
/*!***********************************!*\
  !*** ./src/lib/contract/index.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Contract; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"@babel/runtime/helpers/classCallCheck\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"@babel/runtime/helpers/createClass\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var index__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! index */ \"./src/index.js\");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils */ \"./src/utils/index.js\");\n/* harmony import */ var _method__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./method */ \"./src/lib/contract/method.js\");\n\n\n\n\n\n\n\n\n\nvar Contract =\n/*#__PURE__*/\nfunction () {\n  function Contract() {\n    var tronWeb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var abi = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var address = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, Contract);\n\n    if (!tronWeb || !tronWeb instanceof index__WEBPACK_IMPORTED_MODULE_5__[\"default\"]) throw new Error('Expected instance of TronWeb');\n    this.tronWeb = tronWeb;\n    this.injectPromise = utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].promiseInjector(this);\n    this.address = address;\n    this.abi = abi;\n    this.eventListener = false;\n    this.bytecode = false;\n    this.deployed = false;\n    this.lastBlock = false;\n    this.methods = {};\n    this.methodInstances = {};\n    this.props = [];\n    if (this.tronWeb.isAddress(address)) this.deployed = true;else this.address = false;\n    this.loadAbi(abi);\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(Contract, [{\n    key: \"_getEvents\",\n    value: function () {\n      var _getEvents2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n        var _this = this;\n\n        var options,\n            events,\n            _events$sort,\n            _events$sort2,\n            latestEvent,\n            newEvents,\n            _args = arguments;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n                _context.next = 3;\n                return this.tronWeb.getEventResult(this.address);\n\n              case 3:\n                events = _context.sent;\n                _events$sort = events.sort(function (a, b) {\n                  return b.block - a.block;\n                }), _events$sort2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_events$sort, 1), latestEvent = _events$sort2[0];\n                newEvents = events.filter(function (event, index) {\n                  if (options.resourceNode && !RegExp(options.resourceNode, 'i').test(event.resourceNode)) return false;\n                  var duplicate = events.slice(0, index).some(function (priorEvent) {\n                    return JSON.stringify(priorEvent) == JSON.stringify(event);\n                  });\n                  if (duplicate) return false;\n                  if (!_this.lastBlock) return true;\n                  return event.block > _this.lastBlock;\n                });\n                if (latestEvent) this.lastBlock = latestEvent.block;\n                return _context.abrupt(\"return\", newEvents);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function _getEvents() {\n        return _getEvents2.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"_startEventListener\",\n    value: function () {\n      var _startEventListener2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {\n        var _this2 = this;\n\n        var options,\n            callback,\n            _args2 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                options = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {};\n                callback = _args2.length > 1 ? _args2[1] : undefined;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].isFunction(options)) {\n                  callback = options;\n                  options = {};\n                }\n\n                if (this.eventListener) clearInterval(this.eventListener);\n\n                if (this.tronWeb.eventServer) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                throw new Error('Event server is not configured');\n\n              case 6:\n                if (this.address) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                throw new Error('Contract is not configured with an address');\n\n              case 8:\n                this.eventCallback = callback;\n                _context2.next = 11;\n                return this._getEvents(options);\n\n              case 11:\n                this.eventListener = setInterval(function () {\n                  _this2._getEvents(options).then(function (newEvents) {\n                    return newEvents.forEach(function (event) {\n                      _this2.eventCallback && _this2.eventCallback(event);\n                    });\n                  }).catch(function (err) {\n                    console.error('Failed to get event list', err);\n                  });\n                }, 3000);\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function _startEventListener() {\n        return _startEventListener2.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"_stopEventListener\",\n    value: function _stopEventListener() {\n      if (!this.eventListener) return;\n      clearInterval(this.eventListener);\n      this.eventListener = false;\n      this.eventCallback = false;\n    }\n  }, {\n    key: \"hasProperty\",\n    value: function hasProperty(property) {\n      return this.hasOwnProperty(property) || this.__proto__.hasOwnProperty(property);\n    }\n  }, {\n    key: \"loadAbi\",\n    value: function loadAbi(abi) {\n      var _this3 = this;\n\n      this.abi = abi;\n      this.methods = {};\n      this.props.forEach(function (prop) {\n        return delete _this3[prop];\n      });\n      abi.forEach(function (func) {\n        // Don't build a method for constructor function. That's handled through contract create.\n        if (func.type.toLowerCase() === 'constructor') return;\n        var method = new _method__WEBPACK_IMPORTED_MODULE_7__[\"default\"](_this3, func);\n        var methodCall = method.onMethod.bind(method);\n        var name = method.name,\n            functionSelector = method.functionSelector,\n            signature = method.signature;\n        _this3.methods[name] = methodCall;\n        _this3.methods[functionSelector] = methodCall;\n        _this3.methods[signature] = methodCall;\n        _this3.methodInstances[name] = method;\n        _this3.methodInstances[functionSelector] = method;\n        _this3.methodInstances[signature] = method;\n\n        if (!_this3.hasProperty(name)) {\n          _this3[name] = methodCall;\n\n          _this3.props.push(name);\n        }\n\n        if (!_this3.hasProperty(functionSelector)) {\n          _this3[functionSelector] = methodCall;\n\n          _this3.props.push(functionSelector);\n        }\n\n        if (!_this3.hasProperty(signature)) {\n          _this3[signature] = methodCall;\n\n          _this3.props.push(signature);\n        }\n      });\n    }\n  }, {\n    key: \"decodeInput\",\n    value: function decodeInput(data) {\n      var methodName = data.substring(0, 8);\n      var inputData = data.substring(8);\n      if (!this.methodInstances[methodName]) throw new Error('Contract method ' + methodName + \" not found\");\n      var methodInstance = this.methodInstances[methodName];\n      return {\n        name: methodInstance.name,\n        params: this.methodInstances[methodName].decodeInput(inputData)\n      };\n    }\n  }, {\n    key: \"new\",\n    value: function () {\n      var _new2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(options) {\n        var privateKey,\n            callback,\n            address,\n            transaction,\n            signedTransaction,\n            contract,\n            _args3 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                privateKey = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : this.tronWeb.defaultPrivateKey;\n                callback = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : false;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].isFunction(privateKey)) {\n                  callback = privateKey;\n                  privateKey = this.tronWeb.defaultPrivateKey;\n                }\n\n                if (callback) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", this.injectPromise(this.new, options, privateKey));\n\n              case 5:\n                _context3.prev = 5;\n                address = this.tronWeb.address.fromPrivateKey(privateKey);\n                _context3.next = 9;\n                return this.tronWeb.transactionBuilder.createSmartContract(options, address);\n\n              case 9:\n                transaction = _context3.sent;\n                _context3.next = 12;\n                return this.tronWeb.trx.sign(transaction, privateKey);\n\n              case 12:\n                signedTransaction = _context3.sent;\n                _context3.next = 15;\n                return this.tronWeb.trx.sendRawTransaction(signedTransaction);\n\n              case 15:\n                contract = _context3.sent;\n\n                if (contract.result) {\n                  _context3.next = 18;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", callback('Unknown error: ' + JSON.stringify(contract, null, 2)));\n\n              case 18:\n                return _context3.abrupt(\"return\", this.at(signedTransaction.contract_address, callback));\n\n              case 21:\n                _context3.prev = 21;\n                _context3.t0 = _context3[\"catch\"](5);\n                return _context3.abrupt(\"return\", callback(_context3.t0));\n\n              case 24:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[5, 21]]);\n      }));\n\n      return function _new(_x) {\n        return _new2.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"at\",\n    value: function () {\n      var _at = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(contractAddress) {\n        var callback,\n            contract,\n            _args4 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                callback = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : false;\n\n                if (callback) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", this.injectPromise(this.at, contractAddress));\n\n              case 3:\n                _context4.prev = 3;\n                _context4.next = 6;\n                return this.tronWeb.trx.getContract(contractAddress);\n\n              case 6:\n                contract = _context4.sent;\n                if (!contract.contract_address) callback('Unknown error: ' + JSON.stringify(contract, null, 2));\n                this.address = contract.contract_address;\n                this.bytecode = contract.bytecode;\n                this.deployed = true;\n                this.loadAbi(contract.abi.entrys);\n                callback(null, this);\n                _context4.next = 20;\n                break;\n\n              case 15:\n                _context4.prev = 15;\n                _context4.t0 = _context4[\"catch\"](3);\n\n                if (!_context4.t0.toString().includes('does not exist')) {\n                  _context4.next = 19;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", callback('Contract has not been deployed on the network'));\n\n              case 19:\n                return _context4.abrupt(\"return\", callback(_context4.t0));\n\n              case 20:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[3, 15]]);\n      }));\n\n      return function at(_x2) {\n        return _at.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"events\",\n    value: function events() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].isFunction(options)) {\n        callback = options;\n        options = {};\n      }\n\n      if (!utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].isFunction(callback)) throw new Error('Callback function expected');\n      var self = this;\n      return {\n        start: function start() {\n          var startCallback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n          if (!startCallback) {\n            self._startEventListener(options, callback);\n\n            return this;\n          }\n\n          self._startEventListener(options, callback).then(function () {\n            startCallback();\n          }).catch(function (err) {\n            startCallback(err);\n          });\n\n          return this;\n        },\n        stop: function stop() {\n          self._stopEventListener();\n        }\n      };\n    }\n  }]);\n\n  return Contract;\n}();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL2NvbnRyYWN0L2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9jb250cmFjdC9pbmRleC5qcz81YzhlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUcm9uV2ViIGZyb20gJ2luZGV4JztcbmltcG9ydCB1dGlscyBmcm9tICd1dGlscyc7XG5pbXBvcnQgTWV0aG9kIGZyb20gJy4vbWV0aG9kJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udHJhY3Qge1xuICAgIGNvbnN0cnVjdG9yKHRyb25XZWIgPSBmYWxzZSwgYWJpID0gW10sIGFkZHJlc3MgPSBmYWxzZSkge1xuICAgICAgICBpZighdHJvbldlYiB8fCAhdHJvbldlYiBpbnN0YW5jZW9mIFRyb25XZWIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIGluc3RhbmNlIG9mIFRyb25XZWInKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIgPSB0cm9uV2ViO1xuICAgICAgICB0aGlzLmluamVjdFByb21pc2UgPSB1dGlscy5wcm9taXNlSW5qZWN0b3IodGhpcyk7XG5cbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgdGhpcy5hYmkgPSBhYmk7XG5cbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYnl0ZWNvZGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXBsb3llZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxhc3RCbG9jayA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMubWV0aG9kcyA9IHt9O1xuICAgICAgICB0aGlzLm1ldGhvZEluc3RhbmNlcyA9IHt9O1xuICAgICAgICB0aGlzLnByb3BzID0gW107XG5cbiAgICAgICAgaWYodGhpcy50cm9uV2ViLmlzQWRkcmVzcyhhZGRyZXNzKSlcbiAgICAgICAgICAgIHRoaXMuZGVwbG95ZWQgPSB0cnVlO1xuICAgICAgICBlbHNlIHRoaXMuYWRkcmVzcyA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMubG9hZEFiaShhYmkpO1xuICAgIH1cblxuICAgIGFzeW5jIF9nZXRFdmVudHMob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IHRoaXMudHJvbldlYi5nZXRFdmVudFJlc3VsdCh0aGlzLmFkZHJlc3MpO1xuICAgICAgICBjb25zdCBbIGxhdGVzdEV2ZW50IF0gPSBldmVudHMuc29ydCgoYSwgYikgPT4gYi5ibG9jayAtIGEuYmxvY2spO1xuICAgICAgICBjb25zdCBuZXdFdmVudHMgPSBldmVudHMuZmlsdGVyKChldmVudCwgaW5kZXgpID0+IHtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVzb3VyY2VOb2RlICYmICFSZWdFeHAob3B0aW9ucy5yZXNvdXJjZU5vZGUsICdpJykudGVzdChldmVudC5yZXNvdXJjZU5vZGUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3QgZHVwbGljYXRlID0gZXZlbnRzLnNsaWNlKDAsIGluZGV4KS5zb21lKHByaW9yRXZlbnQgPT4gKFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHByaW9yRXZlbnQpID09IEpTT04uc3RyaW5naWZ5KGV2ZW50KVxuICAgICAgICAgICAgKSk7XG5cbiAgICAgICAgICAgIGlmKGR1cGxpY2F0ZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmKCF0aGlzLmxhc3RCbG9jaylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgICAgcmV0dXJuIGV2ZW50LmJsb2NrID4gdGhpcy5sYXN0QmxvY2s7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmKGxhdGVzdEV2ZW50KVxuICAgICAgICAgICAgdGhpcy5sYXN0QmxvY2sgPSBsYXRlc3RFdmVudC5ibG9jaztcblxuICAgICAgICByZXR1cm4gbmV3RXZlbnRzO1xuICAgIH1cblxuICAgIGFzeW5jIF9zdGFydEV2ZW50TGlzdGVuZXIob3B0aW9ucyA9IHt9LCBjYWxsYmFjaykge1xuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmV2ZW50TGlzdGVuZXIpXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuZXZlbnRMaXN0ZW5lcik7XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5ldmVudFNlcnZlcilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXZlbnQgc2VydmVyIGlzIG5vdCBjb25maWd1cmVkJyk7XG5cbiAgICAgICAgaWYoIXRoaXMuYWRkcmVzcylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29udHJhY3QgaXMgbm90IGNvbmZpZ3VyZWQgd2l0aCBhbiBhZGRyZXNzJyk7XG5cbiAgICAgICAgdGhpcy5ldmVudENhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIGF3YWl0IHRoaXMuX2dldEV2ZW50cyhvcHRpb25zKTtcblxuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9nZXRFdmVudHMob3B0aW9ucykudGhlbihuZXdFdmVudHMgPT4gbmV3RXZlbnRzLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRDYWxsYmFjayAmJiB0aGlzLmV2ZW50Q2FsbGJhY2soZXZlbnQpXG4gICAgICAgICAgICB9KSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IGV2ZW50IGxpc3QnLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDMwMDApO1xuICAgIH1cblxuICAgIF9zdG9wRXZlbnRMaXN0ZW5lcigpIHtcbiAgICAgICAgaWYoIXRoaXMuZXZlbnRMaXN0ZW5lcilcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuZXZlbnRMaXN0ZW5lcik7XG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lciA9IGZhbHNlO1xuICAgICAgICB0aGlzLmV2ZW50Q2FsbGJhY2sgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBoYXNQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkgfHwgdGhpcy5fX3Byb3RvX18uaGFzT3duUHJvcGVydHkocHJvcGVydHkpO1xuICAgIH1cblxuICAgIGxvYWRBYmkoYWJpKSB7XG4gICAgICAgIHRoaXMuYWJpID0gYWJpO1xuICAgICAgICB0aGlzLm1ldGhvZHMgPSB7fTtcblxuICAgICAgICB0aGlzLnByb3BzLmZvckVhY2gocHJvcCA9PiBkZWxldGUgdGhpc1twcm9wXSk7XG5cbiAgICAgICAgYWJpLmZvckVhY2goZnVuYyA9PiB7XG4gICAgICAgICAgICAvLyBEb24ndCBidWlsZCBhIG1ldGhvZCBmb3IgY29uc3RydWN0b3IgZnVuY3Rpb24uIFRoYXQncyBoYW5kbGVkIHRocm91Z2ggY29udHJhY3QgY3JlYXRlLlxuICAgICAgICAgICAgaWYgKGZ1bmMudHlwZS50b0xvd2VyQ2FzZSgpID09PSAnY29uc3RydWN0b3InKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gbmV3IE1ldGhvZCh0aGlzLCBmdW5jKTtcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZENhbGwgPSBtZXRob2Qub25NZXRob2QuYmluZChtZXRob2QpO1xuXG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvblNlbGVjdG9yLFxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZVxuICAgICAgICAgICAgfSA9IG1ldGhvZDtcblxuICAgICAgICAgICAgdGhpcy5tZXRob2RzW25hbWVdID0gbWV0aG9kQ2FsbDtcbiAgICAgICAgICAgIHRoaXMubWV0aG9kc1tmdW5jdGlvblNlbGVjdG9yXSA9IG1ldGhvZENhbGw7XG4gICAgICAgICAgICB0aGlzLm1ldGhvZHNbc2lnbmF0dXJlXSA9IG1ldGhvZENhbGw7XG5cbiAgICAgICAgICAgIHRoaXMubWV0aG9kSW5zdGFuY2VzW25hbWVdID0gbWV0aG9kO1xuICAgICAgICAgICAgdGhpcy5tZXRob2RJbnN0YW5jZXNbZnVuY3Rpb25TZWxlY3Rvcl0gPSBtZXRob2Q7XG4gICAgICAgICAgICB0aGlzLm1ldGhvZEluc3RhbmNlc1tzaWduYXR1cmVdID0gbWV0aG9kO1xuXG4gICAgICAgICAgICBpZighdGhpcy5oYXNQcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgICAgIHRoaXNbbmFtZV0gPSBtZXRob2RDYWxsO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHVzaChuYW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoIXRoaXMuaGFzUHJvcGVydHkoZnVuY3Rpb25TZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzW2Z1bmN0aW9uU2VsZWN0b3JdID0gbWV0aG9kQ2FsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnB1c2goZnVuY3Rpb25TZWxlY3Rvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCF0aGlzLmhhc1Byb3BlcnR5KHNpZ25hdHVyZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzW3NpZ25hdHVyZV0gPSBtZXRob2RDYWxsO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHVzaChzaWduYXR1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkZWNvZGVJbnB1dChkYXRhKSB7XG5cbiAgICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IGRhdGEuc3Vic3RyaW5nKDAsIDgpO1xuICAgICAgICBjb25zdCBpbnB1dERhdGEgPSBkYXRhLnN1YnN0cmluZyg4KTtcblxuICAgICAgICBpZiAoIXRoaXMubWV0aG9kSW5zdGFuY2VzW21ldGhvZE5hbWVdKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb250cmFjdCBtZXRob2QgJyArIG1ldGhvZE5hbWUgKyBcIiBub3QgZm91bmRcIik7XG5cbiAgICAgICAgY29uc3QgbWV0aG9kSW5zdGFuY2UgPSB0aGlzLm1ldGhvZEluc3RhbmNlc1ttZXRob2ROYW1lXTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogbWV0aG9kSW5zdGFuY2UubmFtZSxcbiAgICAgICAgICAgIHBhcmFtczogdGhpcy5tZXRob2RJbnN0YW5jZXNbbWV0aG9kTmFtZV0uZGVjb2RlSW5wdXQoaW5wdXREYXRhKSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIG5ldyhvcHRpb25zLCBwcml2YXRlS2V5ID0gdGhpcy50cm9uV2ViLmRlZmF1bHRQcml2YXRlS2V5LCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24ocHJpdmF0ZUtleSkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gcHJpdmF0ZUtleTtcbiAgICAgICAgICAgIHByaXZhdGVLZXkgPSB0aGlzLnRyb25XZWIuZGVmYXVsdFByaXZhdGVLZXk7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMubmV3LCBvcHRpb25zLCBwcml2YXRlS2V5KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5hZGRyZXNzLmZyb21Qcml2YXRlS2V5KHByaXZhdGVLZXkpO1xuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCB0aGlzLnRyb25XZWIudHJhbnNhY3Rpb25CdWlsZGVyLmNyZWF0ZVNtYXJ0Q29udHJhY3Qob3B0aW9ucywgYWRkcmVzcyk7XG4gICAgICAgICAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IHRoaXMudHJvbldlYi50cnguc2lnbih0cmFuc2FjdGlvbiwgcHJpdmF0ZUtleSk7XG4gICAgICAgICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IHRoaXMudHJvbldlYi50cnguc2VuZFJhd1RyYW5zYWN0aW9uKHNpZ25lZFRyYW5zYWN0aW9uKTtcblxuICAgICAgICAgICAgaWYoIWNvbnRyYWN0LnJlc3VsdClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ1Vua25vd24gZXJyb3I6ICcgKyBKU09OLnN0cmluZ2lmeShjb250cmFjdCwgbnVsbCwgMikpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hdChzaWduZWRUcmFuc2FjdGlvbi5jb250cmFjdF9hZGRyZXNzLCBjYWxsYmFjayk7XG4gICAgICAgIH0gY2F0Y2goZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBhdChjb250cmFjdEFkZHJlc3MsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmF0LCBjb250cmFjdEFkZHJlc3MpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IHRoaXMudHJvbldlYi50cnguZ2V0Q29udHJhY3QoY29udHJhY3RBZGRyZXNzKTtcblxuICAgICAgICAgICAgaWYoIWNvbnRyYWN0LmNvbnRyYWN0X2FkZHJlc3MpXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soJ1Vua25vd24gZXJyb3I6ICcgKyBKU09OLnN0cmluZ2lmeShjb250cmFjdCwgbnVsbCwgMikpO1xuXG4gICAgICAgICAgICB0aGlzLmFkZHJlc3MgPSBjb250cmFjdC5jb250cmFjdF9hZGRyZXNzO1xuICAgICAgICAgICAgdGhpcy5ieXRlY29kZSA9IGNvbnRyYWN0LmJ5dGVjb2RlO1xuICAgICAgICAgICAgdGhpcy5kZXBsb3llZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHRoaXMubG9hZEFiaShjb250cmFjdC5hYmkuZW50cnlzKTtcblxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgdGhpcyk7XG4gICAgICAgIH0gY2F0Y2goZXgpIHtcbiAgICAgICAgICAgIGlmKGV4LnRvU3RyaW5nKCkuaW5jbHVkZXMoJ2RvZXMgbm90IGV4aXN0JykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdDb250cmFjdCBoYXMgbm90IGJlZW4gZGVwbG95ZWQgb24gdGhlIG5ldHdvcmsnKTtcblxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGV4KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV2ZW50cyhvcHRpb25zID0ge30sIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzRnVuY3Rpb24oY2FsbGJhY2spKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYWxsYmFjayBmdW5jdGlvbiBleHBlY3RlZCcpO1xuXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGFydChzdGFydENhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZighc3RhcnRDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdGFydEV2ZW50TGlzdGVuZXIob3B0aW9ucywgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzZWxmLl9zdGFydEV2ZW50TGlzdGVuZXIob3B0aW9ucywgY2FsbGJhY2spLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzdGFydENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRDYWxsYmFjayhlcnIpXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdG9wKCkge1xuICAgICAgICAgICAgICAgIHNlbGYuX3N0b3BFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBOztBQUNBO0FBQ0E7O0FBREE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQUFBO0FBSUE7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFOQTtBQUFBO0FBQUE7QUFjQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTs7Ozs7O0FBRUE7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBOzs7QUFFQTs7QUFDQTtBQUNBOztBQURBOztBQUNBO0FBQ0E7O0FBREE7O0FBQ0E7QUFDQTs7QUFEQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7O0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7Ozs7Ozs7O0FBQUE7QUFDQTtBQUFBOzs7OztBQUNBO0FBQ0E7Ozs7QUFFQTtBQUNBOztBQURBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUVBOzs7Ozs7OztBQUVBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpCQTtBQW1CQTs7Ozs7OyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lib/contract/index.js\n");

/***/ }),

/***/ "./src/lib/contract/method.js":
/*!************************************!*\
  !*** ./src/lib/contract/method.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Method; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread */ \"@babel/runtime/helpers/objectSpread\");\n/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"@babel/runtime/helpers/classCallCheck\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"@babel/runtime/helpers/createClass\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils */ \"./src/utils/index.js\");\n\n\n\n\n\n\n\n\nvar getFunctionSelector = function getFunctionSelector(abi) {\n  return abi.name + '(' + getParamTypes(abi.inputs || []).join(',') + ')';\n};\n\nvar getParamTypes = function getParamTypes(params) {\n  return params.map(function (_ref) {\n    var type = _ref.type;\n    return type;\n  });\n};\n\nvar decodeOutput = function decodeOutput(abi, output) {\n  var names = abi.map(function (_ref2) {\n    var name = _ref2.name;\n    return name;\n  }).filter(function (name) {\n    return !!name;\n  });\n  var types = abi.map(function (_ref3) {\n    var type = _ref3.type;\n    return type;\n  });\n  return utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].abi.decodeParams(names, types, output);\n};\n\nvar Method =\n/*#__PURE__*/\nfunction () {\n  function Method(contract, abi) {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this, Method);\n\n    this.tronWeb = contract.tronWeb;\n    this.contract = contract;\n    this.abi = abi;\n    this.name = abi.name || (abi.name = abi.type);\n    this.inputs = abi.inputs || [];\n    this.outputs = abi.outputs || [];\n    this.functionSelector = getFunctionSelector(abi);\n    this.signature = this.tronWeb.sha3(this.functionSelector, false).slice(0, 8);\n    this.injectPromise = utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].promiseInjector(this);\n    this.defaultOptions = {\n      feeLimit: 1000000000,\n      callValue: 0,\n      from: this.tronWeb.defaultAddress.hex,\n      // Only used for send()\n      shouldPollResponse: false // Only used for sign()\n\n    };\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(Method, [{\n    key: \"decodeInput\",\n    value: function decodeInput(data) {\n      return decodeOutput(this.inputs, '0x' + data);\n    }\n  }, {\n    key: \"onMethod\",\n    value: function onMethod() {\n      var _this = this;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var types = getParamTypes(this.inputs);\n      args.forEach(function (arg, index) {\n        if (types[index] == 'address') args[index] = _this.tronWeb.address.toHex(arg).replace(/^(41)/, '0x');\n\n        if (types[index] == 'address[]') {\n          args[index] = args[index].map(function (address) {\n            return _this.tronWeb.address.toHex(address).replace(/^(41)/, '0x');\n          });\n        }\n      });\n      return {\n        call: function call() {\n          for (var _len2 = arguments.length, methodArgs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            methodArgs[_key2] = arguments[_key2];\n          }\n\n          return _this._call.apply(_this, [types, args].concat(methodArgs));\n        },\n        send: function send() {\n          for (var _len3 = arguments.length, methodArgs = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            methodArgs[_key3] = arguments[_key3];\n          }\n\n          return _this._send.apply(_this, [types, args].concat(methodArgs));\n        },\n        watch: function watch() {\n          return _this._watch.apply(_this, arguments);\n        }\n      };\n    }\n  }, {\n    key: \"_call\",\n    value: function () {\n      var _call2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(types, args) {\n        var _this2 = this;\n\n        var options,\n            callback,\n            stateMutability,\n            parameters,\n            _args = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n                callback = _args.length > 3 && _args[3] !== undefined ? _args[3] : false;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].isFunction(options)) {\n                  callback = options;\n                  options = {};\n                }\n\n                if (callback) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", this.injectPromise(this._call, types, args, options));\n\n              case 5:\n                if (!(types.length !== args.length)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", callback('Invalid argument count provided'));\n\n              case 7:\n                if (this.contract.address) {\n                  _context.next = 9;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", callback('Smart contract is missing address'));\n\n              case 9:\n                if (this.contract.deployed) {\n                  _context.next = 11;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", callback('Calling smart contracts requires you to load the contract first'));\n\n              case 11:\n                stateMutability = this.abi.stateMutability;\n\n                if (['pure', 'view'].includes(stateMutability.toLowerCase())) {\n                  _context.next = 14;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", callback(\"Methods with state mutability \\\"\".concat(stateMutability, \"\\\" must use send()\")));\n\n              case 14:\n                options = _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_2___default()({}, this.defaultOptions, options);\n                parameters = args.map(function (value, index) {\n                  return {\n                    type: types[index],\n                    value: value\n                  };\n                });\n                this.tronWeb.transactionBuilder.triggerSmartContract(this.contract.address, this.functionSelector, options.feeLimit, options.callValue, parameters, this.tronWeb.address.toHex(options.from), function (err, transaction) {\n                  if (err) return callback(err);\n                  if (!utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].hasProperty(transaction, 'constant_result')) return callback('Failed to execute');\n\n                  try {\n                    var output = decodeOutput(_this2.outputs, '0x' + transaction.constant_result[0]);\n                    if (output.length === 1) output = output[0];\n                    return callback(null, output);\n                  } catch (ex) {\n                    return callback(ex);\n                  }\n                });\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function _call(_x, _x2) {\n        return _call2.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"_send\",\n    value: function () {\n      var _send2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee3(types, args) {\n        var _this3 = this;\n\n        var options,\n            privateKey,\n            callback,\n            stateMutability,\n            parameters,\n            address,\n            transaction,\n            signedTransaction,\n            broadcast,\n            checkResult,\n            _args3 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                options = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : {};\n                privateKey = _args3.length > 3 && _args3[3] !== undefined ? _args3[3] : this.tronWeb.defaultPrivateKey;\n                callback = _args3.length > 4 && _args3[4] !== undefined ? _args3[4] : false;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].isFunction(privateKey)) {\n                  callback = privateKey;\n                  privateKey = this.tronWeb.defaultPrivateKey;\n                }\n\n                if (utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].isFunction(options)) {\n                  callback = options;\n                  options = {};\n                }\n\n                if (callback) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", this.injectPromise(this._send, types, args, options, privateKey));\n\n              case 7:\n                if (!(types.length !== args.length)) {\n                  _context3.next = 9;\n                  break;\n                }\n\n                throw new Error('Invalid argument count provided');\n\n              case 9:\n                if (this.contract.address) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", callback('Smart contract is missing address'));\n\n              case 11:\n                if (this.contract.deployed) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", callback('Calling smart contracts requires you to load the contract first'));\n\n              case 13:\n                stateMutability = this.abi.stateMutability;\n\n                if (!['pure', 'view'].includes(stateMutability.toLowerCase())) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", callback(\"Methods with state mutability \\\"\".concat(stateMutability, \"\\\" must use call()\")));\n\n              case 16:\n                // If a function isn't payable, dont provide a callValue.\n                if (!['payable'].includes(stateMutability.toLowerCase())) options.callValue = 0;\n                options = _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_2___default()({}, this.defaultOptions, options);\n                parameters = args.map(function (value, index) {\n                  return {\n                    type: types[index],\n                    value: value\n                  };\n                });\n                _context3.prev = 19;\n                address = privateKey ? this.tronWeb.address.fromPrivateKey(privateKey) : this.tronWeb.defaultAddress.base58;\n                _context3.next = 23;\n                return this.tronWeb.transactionBuilder.triggerSmartContract(this.contract.address, this.functionSelector, options.feeLimit, options.callValue, parameters, this.tronWeb.address.toHex(address));\n\n              case 23:\n                transaction = _context3.sent;\n\n                if (!(!transaction.result || !transaction.result.result)) {\n                  _context3.next = 26;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", callback('Unknown error: ' + JSON.stringify(transaction, null, 2)));\n\n              case 26:\n                _context3.next = 28;\n                return this.tronWeb.trx.sign(transaction.transaction, privateKey);\n\n              case 28:\n                signedTransaction = _context3.sent;\n\n                if (signedTransaction.signature) {\n                  _context3.next = 33;\n                  break;\n                }\n\n                if (privateKey) {\n                  _context3.next = 32;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", callback('Transaction was not signed properly'));\n\n              case 32:\n                return _context3.abrupt(\"return\", callback('Invalid private key provided'));\n\n              case 33:\n                _context3.next = 35;\n                return this.tronWeb.trx.sendRawTransaction(signedTransaction);\n\n              case 35:\n                broadcast = _context3.sent;\n\n                if (broadcast.result) {\n                  _context3.next = 38;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", callback('Unknown error: ' + JSON.stringify(broadcast, null, 2)));\n\n              case 38:\n                if (options.shouldPollResponse) {\n                  _context3.next = 40;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", callback(null, signedTransaction.txID));\n\n              case 40:\n                checkResult =\n                /*#__PURE__*/\n                function () {\n                  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n                  /*#__PURE__*/\n                  _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2() {\n                    var index,\n                        output,\n                        decoded,\n                        _args2 = arguments;\n                    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            index = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : 0;\n\n                            if (!(index == 20)) {\n                              _context2.next = 3;\n                              break;\n                            }\n\n                            return _context2.abrupt(\"return\", callback({\n                              error: 'Cannot find result in solidity node',\n                              transaction: signedTransaction\n                            }));\n\n                          case 3:\n                            _context2.next = 5;\n                            return _this3.tronWeb.trx.getTransactionInfo(signedTransaction.txID);\n\n                          case 5:\n                            output = _context2.sent;\n\n                            if (Object.keys(output).length) {\n                              _context2.next = 8;\n                              break;\n                            }\n\n                            return _context2.abrupt(\"return\", setTimeout(function () {\n                              checkResult(index + 1);\n                            }, 3000));\n\n                          case 8:\n                            if (!(output.result && output.result == 'FAILED')) {\n                              _context2.next = 10;\n                              break;\n                            }\n\n                            return _context2.abrupt(\"return\", callback({\n                              error: _this3.tronWeb.toUtf8(output.resMessage),\n                              transaction: signedTransaction,\n                              output: output\n                            }));\n\n                          case 10:\n                            if (utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].hasProperty(output, 'contractResult')) {\n                              _context2.next = 12;\n                              break;\n                            }\n\n                            return _context2.abrupt(\"return\", callback({\n                              error: 'Failed to execute: ' + JSON.stringify(output, null, 2),\n                              transaction: signedTransaction,\n                              output: output\n                            }));\n\n                          case 12:\n                            decoded = decodeOutput(_this3.outputs, '0x' + output.contractResult[0]);\n                            if (decoded.length === 1) decoded = decoded[0];\n                            return _context2.abrupt(\"return\", callback(null, decoded));\n\n                          case 15:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2, this);\n                  }));\n\n                  return function checkResult() {\n                    return _ref4.apply(this, arguments);\n                  };\n                }();\n\n                checkResult();\n                _context3.next = 47;\n                break;\n\n              case 44:\n                _context3.prev = 44;\n                _context3.t0 = _context3[\"catch\"](19);\n                return _context3.abrupt(\"return\", callback(_context3.t0));\n\n              case 47:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[19, 44]]);\n      }));\n\n      return function _send(_x3, _x4) {\n        return _send2.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"_watch\",\n    value: function () {\n      var _watch2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee5() {\n        var _this4 = this;\n\n        var options,\n            callback,\n            listener,\n            lastBlock,\n            sinceTimestamp,\n            getEvents,\n            bindListener,\n            _args5 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                options = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {};\n                callback = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : false;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].isFunction(options)) {\n                  callback = options;\n                  options = {};\n                }\n\n                if (utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].isFunction(callback)) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                throw new Error('Expected callback to be provided');\n\n              case 5:\n                if (this.contract.address) {\n                  _context5.next = 7;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", callback('Smart contract is missing address'));\n\n              case 7:\n                if (!(this.abi.type.toLowerCase() !== 'event')) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", callback('Invalid method type for event watching'));\n\n              case 9:\n                if (this.tronWeb.eventServer) {\n                  _context5.next = 11;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", callback('No event server configured'));\n\n              case 11:\n                listener = false;\n                lastBlock = false;\n                sinceTimestamp = new Date().getTime();\n\n                getEvents =\n                /*#__PURE__*/\n                function () {\n                  var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n                  /*#__PURE__*/\n                  _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee4() {\n                    var events, _events$sort, _events$sort2, latestEvent, newEvents;\n\n                    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            _context4.prev = 0;\n                            _context4.next = 3;\n                            return _this4.tronWeb.getEventResult(_this4.contract.address, sinceTimestamp, _this4.name);\n\n                          case 3:\n                            events = _context4.sent;\n                            _events$sort = events.sort(function (a, b) {\n                              return b.block - a.block;\n                            }), _events$sort2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_events$sort, 1), latestEvent = _events$sort2[0];\n                            newEvents = events.filter(function (event, index) {\n                              if (options.resourceNode && !RegExp(options.resourceNode, 'i').test(event.resourceNode)) return false;\n                              var duplicate = events.slice(0, index).some(function (priorEvent) {\n                                return JSON.stringify(priorEvent) == JSON.stringify(event);\n                              });\n                              if (duplicate) return false;\n                              if (!lastBlock) return true;\n                              return event.block > lastBlock;\n                            });\n                            if (latestEvent) lastBlock = latestEvent.block;\n                            return _context4.abrupt(\"return\", newEvents);\n\n                          case 10:\n                            _context4.prev = 10;\n                            _context4.t0 = _context4[\"catch\"](0);\n                            return _context4.abrupt(\"return\", Promise.reject(_context4.t0));\n\n                          case 13:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4, this, [[0, 10]]);\n                  }));\n\n                  return function getEvents() {\n                    return _ref5.apply(this, arguments);\n                  };\n                }();\n\n                bindListener = function bindListener() {\n                  if (listener) clearInterval(listener);\n                  listener = setInterval(function () {\n                    getEvents().then(function (events) {\n                      return events.forEach(function (event) {\n                        callback(null, utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"].parseEvent(event, _this4.abi));\n                      });\n                    }).catch(function (err) {\n                      return callback(err);\n                    });\n                  }, 3000);\n                };\n\n                _context5.next = 18;\n                return getEvents();\n\n              case 18:\n                bindListener();\n                return _context5.abrupt(\"return\", {\n                  start: bindListener(),\n                  stop: function stop() {\n                    if (!listener) return;\n                    clearInterval(listener);\n                    listener = false;\n                  }\n                });\n\n              case 20:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      return function _watch() {\n        return _watch2.apply(this, arguments);\n      };\n    }()\n  }]);\n\n  return Method;\n}();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL2NvbnRyYWN0L21ldGhvZC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9saWIvY29udHJhY3QvbWV0aG9kLmpzP2M2MWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHV0aWxzIGZyb20gJ3V0aWxzJztcblxuY29uc3QgZ2V0RnVuY3Rpb25TZWxlY3RvciA9IGFiaSA9PiB7XG4gICAgcmV0dXJuIGFiaS5uYW1lICsgJygnICsgZ2V0UGFyYW1UeXBlcyhhYmkuaW5wdXRzIHx8IFtdKS5qb2luKCcsJykgKyAnKSc7XG59XG5cbmNvbnN0IGdldFBhcmFtVHlwZXMgPSBwYXJhbXMgPT4ge1xuICAgIHJldHVybiBwYXJhbXMubWFwKCh7IHR5cGUgfSkgPT4gdHlwZSk7XG59XG5cbmNvbnN0IGRlY29kZU91dHB1dCA9IChhYmksIG91dHB1dCkgPT4ge1xuICAgIGNvbnN0IG5hbWVzID0gYWJpLm1hcCgoeyBuYW1lIH0pID0+IG5hbWUpLmZpbHRlcihuYW1lID0+ICEhbmFtZSk7XG4gICAgY29uc3QgdHlwZXMgPSBhYmkubWFwKCh7IHR5cGUgfSkgPT4gdHlwZSk7XG5cbiAgICByZXR1cm4gdXRpbHMuYWJpLmRlY29kZVBhcmFtcyhuYW1lcywgdHlwZXMsIG91dHB1dCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZXRob2Qge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRyYWN0LCBhYmkpIHtcbiAgICAgICAgdGhpcy50cm9uV2ViID0gY29udHJhY3QudHJvbldlYjtcbiAgICAgICAgdGhpcy5jb250cmFjdCA9IGNvbnRyYWN0O1xuXG4gICAgICAgIHRoaXMuYWJpID0gYWJpO1xuICAgICAgICB0aGlzLm5hbWUgPSBhYmkubmFtZSB8fCAoYWJpLm5hbWUgPSBhYmkudHlwZSk7XG5cbiAgICAgICAgdGhpcy5pbnB1dHMgPSBhYmkuaW5wdXRzIHx8IFtdO1xuICAgICAgICB0aGlzLm91dHB1dHMgPSBhYmkub3V0cHV0cyB8fCBbXTtcblxuICAgICAgICB0aGlzLmZ1bmN0aW9uU2VsZWN0b3IgPSBnZXRGdW5jdGlvblNlbGVjdG9yKGFiaSk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlID0gdGhpcy50cm9uV2ViLnNoYTModGhpcy5mdW5jdGlvblNlbGVjdG9yLCBmYWxzZSkuc2xpY2UoMCwgOCk7XG4gICAgICAgIHRoaXMuaW5qZWN0UHJvbWlzZSA9IHV0aWxzLnByb21pc2VJbmplY3Rvcih0aGlzKTtcblxuICAgICAgICB0aGlzLmRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgICAgICAgZmVlTGltaXQ6IDEwMDAwMDAwMDAsXG4gICAgICAgICAgICBjYWxsVmFsdWU6IDAsXG4gICAgICAgICAgICBmcm9tOiB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LCAvLyBPbmx5IHVzZWQgZm9yIHNlbmQoKVxuICAgICAgICAgICAgc2hvdWxkUG9sbFJlc3BvbnNlOiBmYWxzZSAvLyBPbmx5IHVzZWQgZm9yIHNpZ24oKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGRlY29kZUlucHV0KGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZU91dHB1dCh0aGlzLmlucHV0cywgJzB4JyArIGRhdGEpO1xuICAgIH1cblxuICAgIG9uTWV0aG9kKC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgdHlwZXMgPSBnZXRQYXJhbVR5cGVzKHRoaXMuaW5wdXRzKTtcblxuICAgICAgICBhcmdzLmZvckVhY2goKGFyZywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlc1tpbmRleF0gPT0gJ2FkZHJlc3MnKVxuICAgICAgICAgICAgICAgIGFyZ3NbaW5kZXhdID0gdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgoYXJnKS5yZXBsYWNlKC9eKDQxKS8sICcweCcpXG5cbiAgICAgICAgICAgIGlmICh0eXBlc1tpbmRleF0gPT0gJ2FkZHJlc3NbXScpIHtcbiAgICAgICAgICAgICAgICBhcmdzW2luZGV4XSA9IGFyZ3NbaW5kZXhdLm1hcChhZGRyZXNzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KGFkZHJlc3MpLnJlcGxhY2UoL14oNDEpLywgJzB4JylcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2FsbDogKC4uLm1ldGhvZEFyZ3MpID0+IHRoaXMuX2NhbGwodHlwZXMsIGFyZ3MsIC4uLm1ldGhvZEFyZ3MpLFxuICAgICAgICAgICAgc2VuZDogKC4uLm1ldGhvZEFyZ3MpID0+IHRoaXMuX3NlbmQodHlwZXMsIGFyZ3MsIC4uLm1ldGhvZEFyZ3MpLFxuICAgICAgICAgICAgd2F0Y2g6ICguLi5tZXRob2RBcmdzKSA9PiB0aGlzLl93YXRjaCguLi5tZXRob2RBcmdzKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgX2NhbGwodHlwZXMsIGFyZ3MsIG9wdGlvbnMgPSB7fSwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZiAodXRpbHMuaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5fY2FsbCwgdHlwZXMsIGFyZ3MsIG9wdGlvbnMpO1xuXG4gICAgICAgIGlmICh0eXBlcy5sZW5ndGggIT09IGFyZ3MubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGFyZ3VtZW50IGNvdW50IHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmNvbnRyYWN0LmFkZHJlc3MpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ1NtYXJ0IGNvbnRyYWN0IGlzIG1pc3NpbmcgYWRkcmVzcycpO1xuXG4gICAgICAgIGlmICghdGhpcy5jb250cmFjdC5kZXBsb3llZClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnQ2FsbGluZyBzbWFydCBjb250cmFjdHMgcmVxdWlyZXMgeW91IHRvIGxvYWQgdGhlIGNvbnRyYWN0IGZpcnN0Jyk7XG5cbiAgICAgICAgY29uc3Qge3N0YXRlTXV0YWJpbGl0eX0gPSB0aGlzLmFiaTtcblxuICAgICAgICBpZiAoIVsncHVyZScsICd2aWV3J10uaW5jbHVkZXMoc3RhdGVNdXRhYmlsaXR5LnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGBNZXRob2RzIHdpdGggc3RhdGUgbXV0YWJpbGl0eSBcIiR7c3RhdGVNdXRhYmlsaXR5fVwiIG11c3QgdXNlIHNlbmQoKWApO1xuXG4gICAgICAgIG9wdGlvbnMgPSB7IC4uLnRoaXMuZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcblxuICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gYXJncy5tYXAoKHZhbHVlLCBpbmRleCkgPT4gKHtcbiAgICAgICAgICAgIHR5cGU6IHR5cGVzW2luZGV4XSxcbiAgICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0pKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIudHJhbnNhY3Rpb25CdWlsZGVyLnRyaWdnZXJTbWFydENvbnRyYWN0KFxuICAgICAgICAgICAgdGhpcy5jb250cmFjdC5hZGRyZXNzLFxuICAgICAgICAgICAgdGhpcy5mdW5jdGlvblNlbGVjdG9yLFxuICAgICAgICAgICAgb3B0aW9ucy5mZWVMaW1pdCxcbiAgICAgICAgICAgIG9wdGlvbnMuY2FsbFZhbHVlLFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KG9wdGlvbnMuZnJvbSksXG4gICAgICAgICAgICAoZXJyLCB0cmFuc2FjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCF1dGlscy5oYXNQcm9wZXJ0eSh0cmFuc2FjdGlvbiwgJ2NvbnN0YW50X3Jlc3VsdCcpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ZhaWxlZCB0byBleGVjdXRlJyk7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3V0cHV0ID0gZGVjb2RlT3V0cHV0KHRoaXMub3V0cHV0cywgJzB4JyArIHRyYW5zYWN0aW9uLmNvbnN0YW50X3Jlc3VsdFswXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dC5sZW5ndGggPT09IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXRbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIG91dHB1dCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBfc2VuZCh0eXBlcywgYXJncywgb3B0aW9ucyA9IHt9LCBwcml2YXRlS2V5ID0gdGhpcy50cm9uV2ViLmRlZmF1bHRQcml2YXRlS2V5LCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh1dGlscy5pc0Z1bmN0aW9uKHByaXZhdGVLZXkpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IHByaXZhdGVLZXk7XG4gICAgICAgICAgICBwcml2YXRlS2V5ID0gdGhpcy50cm9uV2ViLmRlZmF1bHRQcml2YXRlS2V5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHV0aWxzLmlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuX3NlbmQsIHR5cGVzLCBhcmdzLCBvcHRpb25zLCBwcml2YXRlS2V5KTtcblxuICAgICAgICBpZiAodHlwZXMubGVuZ3RoICE9PSBhcmdzLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudCBjb3VudCBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmICghdGhpcy5jb250cmFjdC5hZGRyZXNzKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdTbWFydCBjb250cmFjdCBpcyBtaXNzaW5nIGFkZHJlc3MnKTtcblxuICAgICAgICBpZiAoIXRoaXMuY29udHJhY3QuZGVwbG95ZWQpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0NhbGxpbmcgc21hcnQgY29udHJhY3RzIHJlcXVpcmVzIHlvdSB0byBsb2FkIHRoZSBjb250cmFjdCBmaXJzdCcpO1xuXG4gICAgICAgIGNvbnN0IHtzdGF0ZU11dGFiaWxpdHl9ID0gdGhpcy5hYmk7XG5cbiAgICAgICAgaWYgKFsncHVyZScsICd2aWV3J10uaW5jbHVkZXMoc3RhdGVNdXRhYmlsaXR5LnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGBNZXRob2RzIHdpdGggc3RhdGUgbXV0YWJpbGl0eSBcIiR7c3RhdGVNdXRhYmlsaXR5fVwiIG11c3QgdXNlIGNhbGwoKWApO1xuXG4gICAgICAgIC8vIElmIGEgZnVuY3Rpb24gaXNuJ3QgcGF5YWJsZSwgZG9udCBwcm92aWRlIGEgY2FsbFZhbHVlLlxuICAgICAgICBpZiAoIVsncGF5YWJsZSddLmluY2x1ZGVzKHN0YXRlTXV0YWJpbGl0eS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICAgICAgIG9wdGlvbnMuY2FsbFZhbHVlID0gMDtcblxuICAgICAgICBvcHRpb25zID0gey4uLnRoaXMuZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnN9O1xuXG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBhcmdzLm1hcCgodmFsdWUsIGluZGV4KSA9PiAoe1xuICAgICAgICAgICAgdHlwZTogdHlwZXNbaW5kZXhdLFxuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhZGRyZXNzID0gcHJpdmF0ZUtleSA/IHRoaXMudHJvbldlYi5hZGRyZXNzLmZyb21Qcml2YXRlS2V5KHByaXZhdGVLZXkpIDogdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmJhc2U1ODtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgdGhpcy50cm9uV2ViLnRyYW5zYWN0aW9uQnVpbGRlci50cmlnZ2VyU21hcnRDb250cmFjdChcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyYWN0LmFkZHJlc3MsXG4gICAgICAgICAgICAgICAgdGhpcy5mdW5jdGlvblNlbGVjdG9yLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmVlTGltaXQsXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsVmFsdWUsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICB0aGlzLnRyb25XZWIuYWRkcmVzcy50b0hleChhZGRyZXNzKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKCF0cmFuc2FjdGlvbi5yZXN1bHQgfHwgIXRyYW5zYWN0aW9uLnJlc3VsdC5yZXN1bHQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdVbmtub3duIGVycm9yOiAnICsgSlNPTi5zdHJpbmdpZnkodHJhbnNhY3Rpb24sIG51bGwsIDIpKTtcblxuICAgICAgICAgICAgLy8gSWYgcHJpdmF0ZUtleSBpcyBmYWxzZSwgdGhpcyB3b24ndCBiZSBzaWduZWQgaGVyZS4gV2UgYXNzdW1lIHNpZ24gZnVuY3Rpb25hbGl0eSB3aWxsIGJlIHJlcGxhY2VkLlxuICAgICAgICAgICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCB0aGlzLnRyb25XZWIudHJ4LnNpZ24odHJhbnNhY3Rpb24udHJhbnNhY3Rpb24sIHByaXZhdGVLZXkpO1xuXG4gICAgICAgICAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnNpZ25hdHVyZSkge1xuICAgICAgICAgICAgICAgIGlmICghcHJpdmF0ZUtleSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdUcmFuc2FjdGlvbiB3YXMgbm90IHNpZ25lZCBwcm9wZXJseScpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBwcml2YXRlIGtleSBwcm92aWRlZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBicm9hZGNhc3QgPSBhd2FpdCB0aGlzLnRyb25XZWIudHJ4LnNlbmRSYXdUcmFuc2FjdGlvbihzaWduZWRUcmFuc2FjdGlvbik7XG5cbiAgICAgICAgICAgIGlmICghYnJvYWRjYXN0LnJlc3VsdClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ1Vua25vd24gZXJyb3I6ICcgKyBKU09OLnN0cmluZ2lmeShicm9hZGNhc3QsIG51bGwsIDIpKTtcblxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLnNob3VsZFBvbGxSZXNwb25zZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgc2lnbmVkVHJhbnNhY3Rpb24udHhJRCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNoZWNrUmVzdWx0ID0gYXN5bmMgKGluZGV4ID0gMCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSAyMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdDYW5ub3QgZmluZCByZXN1bHQgaW4gc29saWRpdHkgbm9kZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogc2lnbmVkVHJhbnNhY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgdGhpcy50cm9uV2ViLnRyeC5nZXRUcmFuc2FjdGlvbkluZm8oc2lnbmVkVHJhbnNhY3Rpb24udHhJRCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5rZXlzKG91dHB1dCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrUmVzdWx0KGluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvdXRwdXQucmVzdWx0ICYmIG91dHB1dC5yZXN1bHQgPT0gJ0ZBSUxFRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiB0aGlzLnRyb25XZWIudG9VdGY4KG91dHB1dC5yZXNNZXNzYWdlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uOiBzaWduZWRUcmFuc2FjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIXV0aWxzLmhhc1Byb3BlcnR5KG91dHB1dCwgJ2NvbnRyYWN0UmVzdWx0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGV4ZWN1dGU6ICcgKyBKU09OLnN0cmluZ2lmeShvdXRwdXQsIG51bGwsIDIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb246IHNpZ25lZFRyYW5zYWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxldCBkZWNvZGVkID0gZGVjb2RlT3V0cHV0KHRoaXMub3V0cHV0cywgJzB4JyArIG91dHB1dC5jb250cmFjdFJlc3VsdFswXSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGVjb2RlZC5sZW5ndGggPT09IDEpXG4gICAgICAgICAgICAgICAgICAgIGRlY29kZWQgPSBkZWNvZGVkWzBdO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGRlY29kZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaGVja1Jlc3VsdCgpO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGV4KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIF93YXRjaChvcHRpb25zID0ge30sIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzRnVuY3Rpb24oY2FsbGJhY2spKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBjYWxsYmFjayB0byBiZSBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmICghdGhpcy5jb250cmFjdC5hZGRyZXNzKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdTbWFydCBjb250cmFjdCBpcyBtaXNzaW5nIGFkZHJlc3MnKTtcblxuICAgICAgICBpZiAodGhpcy5hYmkudHlwZS50b0xvd2VyQ2FzZSgpICE9PSAnZXZlbnQnKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIG1ldGhvZCB0eXBlIGZvciBldmVudCB3YXRjaGluZycpO1xuXG4gICAgICAgIGlmICghdGhpcy50cm9uV2ViLmV2ZW50U2VydmVyKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdObyBldmVudCBzZXJ2ZXIgY29uZmlndXJlZCcpO1xuXG4gICAgICAgIGxldCBsaXN0ZW5lciA9IGZhbHNlO1xuICAgICAgICBsZXQgbGFzdEJsb2NrID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHNpbmNlVGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAgICAgY29uc3QgZ2V0RXZlbnRzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudHMgPSBhd2FpdCB0aGlzLnRyb25XZWIuZ2V0RXZlbnRSZXN1bHQodGhpcy5jb250cmFjdC5hZGRyZXNzLCBzaW5jZVRpbWVzdGFtcCwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBbIGxhdGVzdEV2ZW50IF0gPSBldmVudHMuc29ydCgoYSwgYikgPT4gYi5ibG9jayAtIGEuYmxvY2spO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0V2ZW50cyA9IGV2ZW50cy5maWx0ZXIoKGV2ZW50LCBpbmRleCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlc291cmNlTm9kZSAmJiAhUmVnRXhwKG9wdGlvbnMucmVzb3VyY2VOb2RlLCAnaScpLnRlc3QoZXZlbnQucmVzb3VyY2VOb2RlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkdXBsaWNhdGUgPSBldmVudHMuc2xpY2UoMCwgaW5kZXgpLnNvbWUocHJpb3JFdmVudCA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcmlvckV2ZW50KSA9PSBKU09OLnN0cmluZ2lmeShldmVudClcbiAgICAgICAgICAgICAgICAgICAgKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGR1cGxpY2F0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9jaylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudC5ibG9jayA+IGxhc3RCbG9jaztcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChsYXRlc3RFdmVudClcbiAgICAgICAgICAgICAgICAgICAgbGFzdEJsb2NrID0gbGF0ZXN0RXZlbnQuYmxvY2s7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3RXZlbnRzO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJpbmRMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lcilcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGxpc3RlbmVyKTtcblxuICAgICAgICAgICAgbGlzdGVuZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZ2V0RXZlbnRzKCkudGhlbihldmVudHMgPT4gZXZlbnRzLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCB1dGlscy5wYXJzZUV2ZW50KGV2ZW50LCB0aGlzLmFiaSkpXG4gICAgICAgICAgICAgICAgfSkpLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IGdldEV2ZW50cygpO1xuICAgICAgICBiaW5kTGlzdGVuZXIoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhcnQ6IGJpbmRMaXN0ZW5lcigpLFxuICAgICAgICAgICAgc3RvcDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghbGlzdGVuZXIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwobGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUxBO0FBTUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFLQTs7Ozs7O0FBRUE7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBS0E7QUFRQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7O0FBTUE7O0FBQ0E7QUFDQTs7QUFEQTtBQUNBO0FBUUE7Ozs7O0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7QUFEQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQURBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFGQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVFBO0FBQ0E7QUFUQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFZQTtBQUNBO0FBQ0E7QUFkQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWtCQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBbEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBMEJBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUExQkE7QUFnQ0E7QUFFQTtBQWxDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBOzs7OztBQXdDQTs7Ozs7OztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFGQTtBQUdBO0FBQUE7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQUFBO0FBSUE7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQXRCQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTs7Ozs7QUErQkE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBUkE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lib/contract/method.js\n");

/***/ }),

/***/ "./src/lib/providers/HttpProvider.js":
/*!*******************************************!*\
  !*** ./src/lib/providers/HttpProvider.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return HttpProvider; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"@babel/runtime/helpers/classCallCheck\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"@babel/runtime/helpers/createClass\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils */ \"./src/utils/index.js\");\n\n\n\n\n\n\n\nvar HttpProvider =\n/*#__PURE__*/\nfunction () {\n  function HttpProvider(host) {\n    var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 30000;\n    var user = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var password = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var headers = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    var statusPage = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : '/';\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, HttpProvider);\n\n    if (!utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].isValidURL(host)) throw new Error('Invalid URL provided to HttpProvider');\n    if (isNaN(timeout) || timeout < 0) throw new Error('Invalid timeout duration provided');\n    if (!utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].isObject(headers)) throw new Error('Invalid headers object provided');\n    host = host.replace(/\\/+$/, '');\n    this.host = host;\n    this.timeout = timeout;\n    this.user = user;\n    this.password = password;\n    this.headers = headers;\n    this.statusPage = statusPage;\n    this.instance = axios__WEBPACK_IMPORTED_MODULE_4___default.a.create({\n      baseURL: host,\n      timeout: timeout,\n      headers: headers,\n      auth: user && {\n        user: user,\n        password: password\n      }\n    });\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(HttpProvider, [{\n    key: \"setStatusPage\",\n    value: function setStatusPage() {\n      var statusPage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '/';\n      this.statusPage = statusPage;\n    }\n  }, {\n    key: \"isConnected\",\n    value: function () {\n      var _isConnected = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n        var statusPage,\n            _args = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                statusPage = _args.length > 0 && _args[0] !== undefined ? _args[0] : this.statusPage;\n                return _context.abrupt(\"return\", this.request(statusPage).then(function (data) {\n                  return utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].hasProperties(data, 'blockID', 'block_header');\n                }).catch(function () {\n                  return false;\n                }));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function isConnected() {\n        return _isConnected.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"request\",\n    value: function request(url) {\n      var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'get';\n      method = method.toLowerCase();\n      return this.instance.request({\n        data: method == 'post' && Object.keys(payload).length ? payload : null,\n        params: method == 'get' && payload,\n        url: url,\n        method: method\n      }).then(function (_ref) {\n        var data = _ref.data;\n        return data;\n      });\n    }\n  }]);\n\n  return HttpProvider;\n}();\n\n\n;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL3Byb3ZpZGVycy9IdHRwUHJvdmlkZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbGliL3Byb3ZpZGVycy9IdHRwUHJvdmlkZXIuanM/MWEwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHV0aWxzIGZyb20gJ3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSHR0cFByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0LCB0aW1lb3V0ID0gMzAwMDAsIHVzZXIgPSBmYWxzZSwgcGFzc3dvcmQgPSBmYWxzZSwgaGVhZGVycyA9IHt9LCBzdGF0dXNQYWdlID0gJy8nKSB7XG4gICAgICAgIGlmKCF1dGlscy5pc1ZhbGlkVVJMKGhvc3QpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFVSTCBwcm92aWRlZCB0byBIdHRwUHJvdmlkZXInKTtcblxuICAgICAgICBpZihpc05hTih0aW1lb3V0KSB8fCB0aW1lb3V0IDwgMClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0aW1lb3V0IGR1cmF0aW9uIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzT2JqZWN0KGhlYWRlcnMpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhlYWRlcnMgb2JqZWN0IHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaG9zdCA9IGhvc3QucmVwbGFjZSgvXFwvKyQvLCcnKTtcblxuICAgICAgICB0aGlzLmhvc3QgPSBob3N0O1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0O1xuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgICAgIHRoaXMuc3RhdHVzUGFnZSA9IHN0YXR1c1BhZ2U7XG5cbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7XG4gICAgICAgICAgICBiYXNlVVJMOiBob3N0LFxuICAgICAgICAgICAgdGltZW91dDogdGltZW91dCxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICBhdXRoOiB1c2VyICYmIHtcbiAgICAgICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzZXRTdGF0dXNQYWdlKHN0YXR1c1BhZ2UgPSAnLycpIHtcbiAgICAgICAgdGhpcy5zdGF0dXNQYWdlID0gc3RhdHVzUGFnZTtcbiAgICB9XG5cbiAgICBhc3luYyBpc0Nvbm5lY3RlZChzdGF0dXNQYWdlID0gdGhpcy5zdGF0dXNQYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoc3RhdHVzUGFnZSkudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgIHJldHVybiB1dGlscy5oYXNQcm9wZXJ0aWVzKGRhdGEsICdibG9ja0lEJywgJ2Jsb2NrX2hlYWRlcicpO1xuICAgICAgICB9KS5jYXRjaCgoKSA9PiBmYWxzZSk7XG4gICAgfVxuXG4gICAgcmVxdWVzdCh1cmwsIHBheWxvYWQgPSB7fSwgbWV0aG9kID0gJ2dldCcpIHtcbiAgICAgICAgbWV0aG9kID0gbWV0aG9kLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2UucmVxdWVzdCh7XG4gICAgICAgICAgICBkYXRhOiBtZXRob2QgPT0gJ3Bvc3QnICYmIE9iamVjdC5rZXlzKHBheWxvYWQpLmxlbmd0aCA/IHBheWxvYWQgOiBudWxsLFxuICAgICAgICAgICAgcGFyYW1zOiBtZXRob2QgPT0nZ2V0JyAmJiBwYXlsb2FkLFxuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgbWV0aG9kXG4gICAgICAgIH0pLnRoZW4oKHsgZGF0YSB9KSA9PiBkYXRhKTtcbiAgICB9XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBR0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7Ozs7OztBQWxEQTtBQW1EQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lib/providers/HttpProvider.js\n");

/***/ }),

/***/ "./src/lib/providers/index.js":
/*!************************************!*\
  !*** ./src/lib/providers/index.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _HttpProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./HttpProvider */ \"./src/lib/providers/HttpProvider.js\");\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  HttpProvider: _HttpProvider__WEBPACK_IMPORTED_MODULE_0__[\"default\"]\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL3Byb3ZpZGVycy9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9saWIvcHJvdmlkZXJzL2luZGV4LmpzP2JkMDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEh0dHBQcm92aWRlciBmcm9tICcuL0h0dHBQcm92aWRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBIdHRwUHJvdmlkZXJcbn07Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBREEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/lib/providers/index.js\n");

/***/ }),

/***/ "./src/lib/transactionBuilder.js":
/*!***************************************!*\
  !*** ./src/lib/transactionBuilder.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return TransactionBuilder; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"@babel/runtime/helpers/classCallCheck\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"@babel/runtime/helpers/createClass\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! index */ \"./src/index.js\");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ \"./src/utils/index.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ethers */ \"ethers\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ethers__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\nvar _this = undefined;\n\n\n\n\n\nvar transactionResultManager = function transactionResultManager(transaction, callback) {\n  if (transaction.Error) return callback(transaction.Error);\n\n  if (transaction.result && transaction.result.message) {\n    return callback(_this.tronWeb.toUtf8(transaction.result.message));\n  }\n\n  callback(null, transaction);\n};\n\nvar TransactionBuilder =\n/*#__PURE__*/\nfunction () {\n  function TransactionBuilder() {\n    var tronWeb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, TransactionBuilder);\n\n    if (!tronWeb || !tronWeb instanceof index__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) throw new Error('Expected instance of TronWeb');\n    this.tronWeb = tronWeb;\n    this.injectPromise = utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].promiseInjector(this);\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(TransactionBuilder, [{\n    key: \"sendTrx\",\n    value: function sendTrx() {\n      var to = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var amount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var from = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(from)) {\n        callback = from;\n        from = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.sendTrx, to, amount, from);\n      if (!this.tronWeb.isAddress(to)) return callback('Invalid recipient address provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(amount) || amount <= 0) return callback('Invalid amount provided');\n      if (!this.tronWeb.isAddress(from)) return callback('Invalid origin address provided');\n      to = this.tronWeb.address.toHex(to);\n      from = this.tronWeb.address.toHex(from);\n      if (to === from) return callback('Cannot transfer TRX to the same account');\n      this.tronWeb.fullNode.request('wallet/createtransaction', {\n        to_address: to,\n        owner_address: from,\n        amount: parseInt(amount)\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"sendToken\",\n    value: function sendToken() {\n      var to = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var amount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var tokenID = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var from = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(from)) {\n        callback = from;\n        from = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.sendToken, to, amount, tokenID, from);\n      if (!this.tronWeb.isAddress(to)) return callback('Invalid recipient address provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(amount) || amount <= 0) return callback('Invalid amount provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(tokenID) || !tokenID.length) return callback('Invalid token ID provided');\n      if (!this.tronWeb.isAddress(from)) return callback('Invalid origin address provided');\n      to = this.tronWeb.address.toHex(to);\n      tokenID = this.tronWeb.fromUtf8(tokenID);\n      from = this.tronWeb.address.toHex(from);\n      if (to === from) return callback('Cannot transfer tokens to the same account');\n      this.tronWeb.fullNode.request('wallet/transferasset', {\n        to_address: to,\n        owner_address: from,\n        asset_name: tokenID,\n        amount: parseInt(amount)\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"purchaseToken\",\n    value: function purchaseToken() {\n      var issuerAddress = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var tokenID = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var amount = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var buyer = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(buyer)) {\n        callback = buyer;\n        buyer = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.purchaseToken, issuerAddress, tokenID, amount, buyer);\n      if (!this.tronWeb.isAddress(issuerAddress)) return callback('Invalid issuer address provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(tokenID) || !tokenID.length) return callback('Invalid token ID provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(amount) || amount <= 0) return callback('Invalid amount provided');\n      if (!this.tronWeb.isAddress(buyer)) return callback('Invalid buyer address provided');\n      this.tronWeb.fullNode.request('wallet/participateassetissue', {\n        to_address: this.tronWeb.address.toHex(issuerAddress),\n        owner_address: this.tronWeb.address.toHex(buyer),\n        asset_name: this.tronWeb.fromUtf8(tokenID),\n        amount: parseInt(amount)\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"freezeBalance\",\n    value: function freezeBalance() {\n      var amount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n      var resource = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"BANDWIDTH\";\n      var address = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(address)) {\n        callback = address;\n        address = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(duration)) {\n        callback = duration;\n        duration = 3;\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(resource)) {\n        callback = resource;\n        resource = \"BANDWIDTH\";\n      }\n\n      if (!callback) return this.injectPromise(this.freezeBalance, amount, duration, resource, address);\n      if (!['BANDWIDTH', 'ENERGY'].includes(resource)) return callback('Invalid resource provided: Expected \"BANDWIDTH\" or \"ENERGY\"');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(amount) || amount <= 0) return callback('Invalid amount provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(duration) || duration < 3) return callback('Invalid duration provided, minimum of 3 days');\n      if (!this.tronWeb.isAddress(address)) return callback('Invalid address provided');\n      this.tronWeb.fullNode.request('wallet/freezebalance', {\n        owner_address: this.tronWeb.address.toHex(address),\n        frozen_balance: parseInt(amount),\n        frozen_duration: parseInt(duration),\n        resource: resource\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"unfreezeBalance\",\n    value: function unfreezeBalance() {\n      var resource = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"BANDWIDTH\";\n      var address = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(address)) {\n        callback = address;\n        address = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(resource)) {\n        callback = resource;\n        resource = \"BANDWIDTH\";\n      }\n\n      if (!callback) return this.injectPromise(this.unfreezeBalance, resource, address);\n      if (!['BANDWIDTH', 'ENERGY'].includes(resource)) return callback('Invalid resource provided: Expected \"BANDWIDTH\" or \"ENERGY\"');\n      if (!this.tronWeb.isAddress(address)) return callback('Invalid address provided');\n      this.tronWeb.fullNode.request('wallet/unfreezebalance', {\n        owner_address: this.tronWeb.address.toHex(address),\n        resource: resource\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"withdrawBlockRewards\",\n    value: function withdrawBlockRewards() {\n      var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(address)) {\n        callback = address;\n        address = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.withdrawBlockRewards, address);\n      if (!this.tronWeb.isAddress(address)) return callback('Invalid address provided');\n      this.tronWeb.fullNode.request('wallet/withdrawbalance', {\n        owner_address: this.tronWeb.address.toHex(address)\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"applyForSR\",\n    value: function applyForSR() {\n      var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isValidURL(address)) {\n        callback = url || false;\n        url = address;\n        address = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.applyForSR, address, url);\n      if (!this.tronWeb.isAddress(address)) return callback('Invalid address provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isValidURL(url)) return callback('Invalid url provided');\n      this.tronWeb.fullNode.request('wallet/createwitness', {\n        owner_address: this.tronWeb.address.toHex(address),\n        url: this.tronWeb.fromUtf8(url)\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"vote\",\n    value: function vote() {\n      var _this2 = this;\n\n      var votes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var voterAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(voterAddress)) {\n        callback = voterAddress;\n        voterAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.vote, votes, voterAddress);\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isObject(votes) || !Object.keys(votes).length) return callback('Invalid votes object provided');\n      if (!this.tronWeb.isAddress(voterAddress)) return callback('Invalid voter address provided');\n      var invalid = false;\n      votes = Object.entries(votes).map(function (_ref) {\n        var _ref2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_ref, 2),\n            srAddress = _ref2[0],\n            voteCount = _ref2[1];\n\n        if (invalid) return;\n\n        if (!_this2.tronWeb.isAddress(srAddress)) {\n          callback('Invalid SR address provided: ' + srAddress);\n          return invalid = true;\n        }\n\n        if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(voteCount) || voteCount <= 0) {\n          callback('Invalid vote count provided for SR: ' + srAddress);\n          return invalid = true;\n        }\n\n        return {\n          vote_address: _this2.tronWeb.address.toHex(srAddress),\n          vote_count: parseInt(voteCount)\n        };\n      });\n      if (invalid) return;\n      this.tronWeb.fullNode.request('wallet/votewitnessaccount', {\n        owner_address: this.tronWeb.address.toHex(voterAddress),\n        votes: votes\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"createSmartContract\",\n    value: function createSmartContract() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var issuerAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(issuerAddress)) {\n        callback = issuerAddress;\n        issuerAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.createSmartContract, options, issuerAddress);\n      var feeLimit = options.feeLimit || options.fee_limit || 1000000000;\n      var userFeePercentage = options.userFeePercentage || options.consume_user_resource_percent || 0;\n      var originEnergyLimit = options.originEnergyLimit || options.origin_energy_limit || 10000000;\n      var callValue = options.callValue || options.call_value || 0;\n      var tokenValue = options.tokenValue || options.token_value;\n      var tokenId = options.tokenId || options.token_id;\n      var _options$abi = options.abi,\n          abi = _options$abi === void 0 ? false : _options$abi,\n          _options$bytecode = options.bytecode,\n          bytecode = _options$bytecode === void 0 ? false : _options$bytecode,\n          _options$parameters = options.parameters,\n          parameters = _options$parameters === void 0 ? [] : _options$parameters,\n          _options$name = options.name,\n          name = _options$name === void 0 ? \"\" : _options$name;\n\n      if (abi && utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(abi)) {\n        try {\n          abi = JSON.parse(abi);\n        } catch (_unused) {\n          return callback('Invalid options.abi provided');\n        }\n      }\n\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isArray(abi)) return callback('Invalid options.abi provided');\n      var payable = abi.some(function (func) {\n        return func.type == 'constructor' && func.payable;\n      });\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isHex(bytecode)) return callback('Invalid options.bytecode provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(feeLimit) || feeLimit <= 0 || feeLimit > 1000000000) return callback('Invalid options.feeLimit provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(callValue) || callValue < 0) return callback('Invalid options.callValue provided');\n      if (payable && callValue == 0) return callback('When contract is payable, options.callValue must be a positive integer');\n      if (!payable && callValue > 0) return callback('When contract is not payable, options.callValue must be 0');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(userFeePercentage) || userFeePercentage < 0 || userFeePercentage > 100) return callback('Invalid options.userFeePercentage provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(originEnergyLimit) || originEnergyLimit < 0 || originEnergyLimit > 10000000) return callback('Invalid options.originEnergyLimit provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isArray(parameters)) return callback('Invalid parameters provided');\n      if (!this.tronWeb.isAddress(issuerAddress)) return callback('Invalid issuer address provided');\n      var constructorParams = abi.find(function (it) {\n        return it.type === 'constructor';\n      });\n      if (tokenValue && !utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(tokenValue) || tokenValue < 0) return callback('Invalid options.tokenValue provided');\n      if (tokenId && !utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(tokenId) || tokenValue < 0) return callback('Invalid options.tokenValue provided');\n\n      if (typeof constructorParams !== 'undefined' && constructorParams) {\n        var abiCoder = new ethers__WEBPACK_IMPORTED_MODULE_5__[\"utils\"].AbiCoder();\n        var types = [];\n        var values = [];\n        constructorParams = constructorParams.inputs;\n        if (parameters.length != constructorParams.length) return callback(\"constructor needs \".concat(constructorParams.length, \" but \").concat(parameters.length, \" provided\"));\n\n        for (var i = 0; i < parameters.length; i++) {\n          var type = constructorParams[i].type;\n          var value = parameters[i];\n          if (!type || !utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(type) || !type.length) return callback('Invalid parameter type provided: ' + type);\n          if (type == 'address') value = this.tronWeb.address.toHex(value).replace(/^(41)/, '0x');\n          types.push(type);\n          values.push(value);\n        }\n\n        try {\n          parameters = abiCoder.encode(types, values).replace(/^(0x)/, '');\n        } catch (ex) {\n          return callback(ex);\n        }\n      } else parameters = '';\n\n      var args = {\n        owner_address: this.tronWeb.address.toHex(issuerAddress),\n        fee_limit: parseInt(feeLimit),\n        call_value: parseInt(callValue),\n        consume_user_resource_percent: userFeePercentage,\n        origin_energy_limit: originEnergyLimit,\n        abi: JSON.stringify(abi),\n        bytecode: bytecode,\n        parameter: parameters,\n        name: name // tokenValue and tokenId can cause errors if provided when the trx10 proposal has not been approved yet. So we set them only if they are passed to the method.\n\n      };\n      if (tokenValue) args.token_value = tokenValue;\n      if (tokenId) args.token_id = tokenId;\n      this.tronWeb.fullNode.request('wallet/deploycontract', args, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"triggerSmartContract\",\n    value: function triggerSmartContract(contractAddress, functionSelector) {\n      var feeLimit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000000000;\n      var callValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var parameters = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n      var issuerAddress = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(issuerAddress)) {\n        callback = issuerAddress;\n        issuerAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(parameters)) {\n        callback = parameters;\n        parameters = [];\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(callValue)) {\n        callback = callValue;\n        callValue = 0;\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(feeLimit)) {\n        callback = feeLimit;\n        feeLimit = 1000000000;\n      }\n\n      if (!callback) {\n        return this.injectPromise(this.triggerSmartContract, contractAddress, functionSelector, feeLimit, callValue, parameters, issuerAddress);\n      }\n\n      if (!this.tronWeb.isAddress(contractAddress)) return callback('Invalid contract address provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(functionSelector) || !functionSelector.length) return callback('Invalid function selector provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(callValue) || callValue < 0) return callback('Invalid call value provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(feeLimit) || feeLimit <= 0 || feeLimit > 1000000000) return callback('Invalid fee limit provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isArray(parameters)) return callback('Invalid parameters provided');\n      if (!this.tronWeb.isAddress(issuerAddress)) return callback('Invalid issuer address provided');\n      functionSelector = functionSelector.replace('/\\s*/g', '');\n\n      if (parameters.length) {\n        var abiCoder = new ethers__WEBPACK_IMPORTED_MODULE_5__[\"utils\"].AbiCoder();\n        var types = [];\n        var values = [];\n\n        for (var i = 0; i < parameters.length; i++) {\n          var _parameters$i = parameters[i],\n              type = _parameters$i.type,\n              value = _parameters$i.value;\n          if (!type || !utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(type) || !type.length) return callback('Invalid parameter type provided: ' + type);\n          if (type == 'address') value = this.tronWeb.address.toHex(value).replace(/^(41)/, '0x');\n          types.push(type);\n          values.push(value);\n        }\n\n        try {\n          parameters = abiCoder.encode(types, values).replace(/^(0x)/, '');\n        } catch (ex) {\n          return callback(ex);\n        }\n      } else parameters = '';\n\n      this.tronWeb.fullNode.request('wallet/triggersmartcontract', {\n        contract_address: this.tronWeb.address.toHex(contractAddress),\n        owner_address: this.tronWeb.address.toHex(issuerAddress),\n        function_selector: functionSelector,\n        fee_limit: parseInt(feeLimit),\n        call_value: parseInt(callValue),\n        parameter: parameters\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"createToken\",\n    value: function createToken() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var issuerAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(issuerAddress)) {\n        callback = issuerAddress;\n        issuerAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.createToken, options, issuerAddress);\n      var _options$name2 = options.name,\n          name = _options$name2 === void 0 ? false : _options$name2,\n          _options$abbreviation = options.abbreviation,\n          abbreviation = _options$abbreviation === void 0 ? false : _options$abbreviation,\n          _options$description = options.description,\n          description = _options$description === void 0 ? false : _options$description,\n          _options$url = options.url,\n          url = _options$url === void 0 ? false : _options$url,\n          _options$totalSupply = options.totalSupply,\n          totalSupply = _options$totalSupply === void 0 ? 0 : _options$totalSupply,\n          _options$trxRatio = options.trxRatio,\n          trxRatio = _options$trxRatio === void 0 ? 1 : _options$trxRatio,\n          _options$tokenRatio = options.tokenRatio,\n          tokenRatio = _options$tokenRatio === void 0 ? 1 : _options$tokenRatio,\n          _options$saleStart = options.saleStart,\n          saleStart = _options$saleStart === void 0 ? Date.now() : _options$saleStart,\n          _options$saleEnd = options.saleEnd,\n          saleEnd = _options$saleEnd === void 0 ? false : _options$saleEnd,\n          _options$freeBandwidt = options.freeBandwidth,\n          freeBandwidth = _options$freeBandwidt === void 0 ? 0 : _options$freeBandwidt,\n          _options$freeBandwidt2 = options.freeBandwidthLimit,\n          freeBandwidthLimit = _options$freeBandwidt2 === void 0 ? 0 : _options$freeBandwidt2,\n          _options$frozenAmount = options.frozenAmount,\n          frozenAmount = _options$frozenAmount === void 0 ? 0 : _options$frozenAmount,\n          _options$frozenDurati = options.frozenDuration,\n          frozenDuration = _options$frozenDurati === void 0 ? 0 : _options$frozenDurati;\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(name) || !name.length) return callback('Invalid token name provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(abbreviation) || !abbreviation.length) return callback('Invalid token abbreviation provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(totalSupply) || totalSupply <= 0) return callback('Invalid supply amount provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(trxRatio) || trxRatio <= 0) return callback('TRX ratio must be a positive integer');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(tokenRatio) || tokenRatio <= 0) return callback('Token ratio must be a positive integer');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(saleStart) || saleStart < Date.now()) return callback('Invalid sale start timestamp provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(saleEnd) || saleEnd <= saleStart) return callback('Invalid sale end timestamp provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(description) || !description.length) return callback('Invalid token description provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(url) || !url.length || !utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isValidURL(url)) return callback('Invalid token url provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(freeBandwidth) || freeBandwidth < 0) return callback('Invalid free bandwidth amount provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(freeBandwidthLimit) || freeBandwidthLimit < 0 || freeBandwidth && !freeBandwidthLimit) return callback('Invalid free bandwidth limit provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(frozenAmount) || frozenAmount < 0 || !frozenDuration && frozenAmount) return callback('Invalid frozen supply provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(frozenDuration) || frozenDuration < 0 || frozenDuration && !frozenAmount) return callback('Invalid frozen duration provided');\n      if (!this.tronWeb.isAddress(issuerAddress)) return callback('Invalid issuer address provided');\n      this.tronWeb.fullNode.request('wallet/createassetissue', {\n        owner_address: this.tronWeb.address.toHex(issuerAddress),\n        name: this.tronWeb.fromUtf8(name),\n        abbr: this.tronWeb.fromUtf8(abbreviation),\n        description: this.tronWeb.fromUtf8(description),\n        url: this.tronWeb.fromUtf8(url),\n        total_supply: parseInt(totalSupply),\n        trx_num: parseInt(trxRatio),\n        num: parseInt(tokenRatio),\n        start_time: parseInt(saleStart),\n        end_time: parseInt(saleEnd),\n        free_asset_net_limit: parseInt(freeBandwidth),\n        public_free_asset_net_limit: parseInt(freeBandwidthLimit),\n        frozen_supply: {\n          frozen_amount: parseInt(frozenAmount),\n          frozen_days: parseInt(frozenDuration)\n        }\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"updateAccount\",\n    value: function updateAccount() {\n      var accountName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var address = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(address)) {\n        callback = address;\n        address = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) {\n        return this.injectPromise(this.updateAccount, accountName, address);\n      }\n\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(accountName) || !accountName.length) {\n        return callback('Name must be a string');\n      }\n\n      if (!this.tronWeb.isAddress(address)) {\n        return callback('Invalid origin address provided');\n      }\n\n      this.tronWeb.fullNode.request('wallet/updateaccount', {\n        account_name: this.tronWeb.fromUtf8(accountName),\n        owner_address: this.tronWeb.address.toHex(address)\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"updateToken\",\n    value: function updateToken() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var issuerAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(issuerAddress)) {\n        callback = issuerAddress;\n        issuerAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.updateToken, options, issuerAddress);\n      var _options$description2 = options.description,\n          description = _options$description2 === void 0 ? false : _options$description2,\n          _options$url2 = options.url,\n          url = _options$url2 === void 0 ? false : _options$url2,\n          _options$freeBandwidt3 = options.freeBandwidth,\n          freeBandwidth = _options$freeBandwidt3 === void 0 ? 0 : _options$freeBandwidt3,\n          _options$freeBandwidt4 = options.freeBandwidthLimit,\n          freeBandwidthLimit = _options$freeBandwidt4 === void 0 ? 0 : _options$freeBandwidt4;\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(description) || !description.length) return callback('Invalid token description provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(url) || !url.length || !utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isValidURL(url)) return callback('Invalid token url provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(freeBandwidth) || freeBandwidth < 0) return callback('Invalid free bandwidth amount provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(freeBandwidthLimit) || freeBandwidthLimit < 0 || freeBandwidth && !freeBandwidthLimit) return callback('Invalid free bandwidth limit provided');\n      if (!this.tronWeb.isAddress(issuerAddress)) return callback('Invalid issuer address provided');\n      this.tronWeb.fullNode.request('wallet/updateasset', {\n        owner_address: this.tronWeb.address.toHex(issuerAddress),\n        description: this.tronWeb.fromUtf8(description),\n        url: this.tronWeb.fromUtf8(url),\n        new_limit: parseInt(freeBandwidth),\n        new_public_limit: parseInt(freeBandwidthLimit)\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"sendAsset\",\n    value: function sendAsset() {\n      return this.sendToken.apply(this, arguments);\n    }\n  }, {\n    key: \"purchaseAsset\",\n    value: function purchaseAsset() {\n      return this.purchaseToken.apply(this, arguments);\n    }\n  }, {\n    key: \"createAsset\",\n    value: function createAsset() {\n      return this.createToken.apply(this, arguments);\n    }\n  }, {\n    key: \"updateAsset\",\n    value: function updateAsset() {\n      return this.updateToken.apply(this, arguments);\n    }\n    /**\n     * Creates a proposal to modify the network.\n     * Can only be created by a current Super Representative.\n     */\n\n  }, {\n    key: \"createProposal\",\n    value: function createProposal() {\n      var parameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var issuerAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(issuerAddress)) {\n        callback = issuerAddress;\n        issuerAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.createProposal, parameters, issuerAddress);\n      if (!this.tronWeb.isAddress(issuerAddress)) return callback('Invalid issuerAddress provided');\n      var invalid = 'Invalid proposal parameters provided';\n      if (!parameters) return callback(invalid);\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isArray(parameters)) parameters = [parameters];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = parameters[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var parameter = _step.value;\n          if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isObject(parameter)) return callback(invalid);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.tronWeb.fullNode.request('wallet/proposalcreate', {\n        owner_address: this.tronWeb.address.toHex(issuerAddress),\n        parameters: parameters\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Deletes a network modification proposal that the owner issued.\n     * Only current Super Representative can vote on a proposal.\n     */\n\n  }, {\n    key: \"deleteProposal\",\n    value: function deleteProposal() {\n      var proposalID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var issuerAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(issuerAddress)) {\n        callback = issuerAddress;\n        issuerAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.deleteProposal, proposalID, issuerAddress);\n      if (!this.tronWeb.isAddress(issuerAddress)) return callback('Invalid issuerAddress provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(proposalID) || proposalID < 0) return callback('Invalid proposalID provided');\n      this.tronWeb.fullNode.request('wallet/proposaldelete', {\n        owner_address: this.tronWeb.address.toHex(issuerAddress),\n        proposal_id: parseInt(proposalID)\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Adds a vote to an issued network modification proposal.\n     * Only current Super Representative can vote on a proposal.\n     */\n\n  }, {\n    key: \"voteProposal\",\n    value: function voteProposal() {\n      var proposalID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var isApproval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var voterAddress = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(voterAddress)) {\n        callback = voterAddress;\n        voterAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.voteProposal, proposalID, isApproval, voterAddress);\n      if (!this.tronWeb.isAddress(voterAddress)) return callback('Invalid voterAddress address provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(proposalID) || proposalID < 0) return callback('Invalid proposalID provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isBoolean(isApproval)) return callback('Invalid hasApproval provided');\n      this.tronWeb.fullNode.request('wallet/proposalapprove', {\n        owner_address: this.tronWeb.address.toHex(voterAddress),\n        proposal_id: parseInt(proposalID),\n        is_add_approval: isApproval\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Create an exchange between a token and TRX.\n     * Token Name should be a CASE SENSITIVE string.\n     * PLEASE VERIFY THIS ON TRONSCAN.\n     */\n\n  }, {\n    key: \"createTRXExchange\",\n    value: function createTRXExchange(tokenName, tokenBalance, trxBalance) {\n      var ownerAddress = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(ownerAddress)) {\n        callback = ownerAddress;\n        ownerAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.createTRXExchange, tokenName, tokenBalance, trxBalance, ownerAddress);\n      if (!this.tronWeb.isAddress(ownerAddress)) return callback('Invalid address provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(tokenName) || !tokenName.length) return callback('Invalid tokenName provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(tokenBalance) || tokenBalance <= 0 || !utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(trxBalance) || trxBalance <= 0) return callback('Invalid amount provided');\n      this.tronWeb.fullNode.request('wallet/exchangecreate', {\n        owner_address: this.tronWeb.address.toHex(ownerAddress),\n        first_token_id: this.tronWeb.fromUtf8(tokenName),\n        first_token_balance: tokenBalance,\n        second_token_id: '5f',\n        // Constant for TRX.\n        second_token_balance: trxBalance\n      }, 'post').then(function (resources) {\n        callback(null, resources);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Create an exchange between a token and another token.\n     * DO NOT USE THIS FOR TRX.\n     * Token Names should be a CASE SENSITIVE string.\n     * PLEASE VERIFY THIS ON TRONSCAN.\n     */\n\n  }, {\n    key: \"createTokenExchange\",\n    value: function createTokenExchange(firstTokenName, firstTokenBalance, secondTokenName, secondTokenBalance) {\n      var ownerAddress = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(ownerAddress)) {\n        callback = ownerAddress;\n        ownerAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.createTRXExchange, firstTokenName, firstTokenBalance, secondTokenName, secondTokenBalance, ownerAddress);\n      if (!this.tronWeb.isAddress(ownerAddress)) return callback('Invalid address provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(firstTokenName) || !firstTokenName.length) return callback('Invalid firstTokenName provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(secondTokenName) || !secondTokenName.length) return callback('Invalid secondTokenName provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(firstTokenBalance) || firstTokenBalance <= 0 || !utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(secondTokenBalance) || secondTokenBalance <= 0) return callback('Invalid amount provided');\n      this.tronWeb.fullNode.request('wallet/exchangecreate', {\n        owner_address: this.tronWeb.address.toHex(ownerAddress),\n        first_token_id: this.tronWeb.fromUtf8(firstTokenName),\n        first_token_balance: firstTokenBalance,\n        second_token_id: this.tronWeb.fromUtf8(secondTokenName),\n        second_token_balance: secondTokenBalance\n      }, 'post').then(function (resources) {\n        callback(null, resources);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Adds tokens into a bancor style exchange.\n     * Will add both tokens at market rate.\n     * Use \"_\" for the constant value for TRX.\n     */\n\n  }, {\n    key: \"injectExchangeTokens\",\n    value: function injectExchangeTokens() {\n      var exchangeID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var tokenName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var tokenAmount = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var ownerAddress = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(ownerAddress)) {\n        callback = ownerAddress;\n        ownerAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.injectExchangeTokens, exchangeID, tokenName, tokenAmount, ownerAddress);\n      if (!this.tronWeb.isAddress(ownerAddress)) return callback('Invalid ownerAddress provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(exchangeID) || exchangeID < 0) return callback('Invalid exchangeID provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(tokenName) || !tokenName.length) return callback('Invalid tokenName provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(tokenAmount) || tokenAmount < 1) return callback('Invalid tokenAmount provided');\n      this.tronWeb.fullNode.request('wallet/exchangeinject', {\n        owner_address: this.tronWeb.address.toHex(ownerAddress),\n        exchange_id: parseInt(exchangeID),\n        token_id: this.tronWeb.fromUtf8(tokenName),\n        quant: parseInt(tokenAmount)\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Withdraws tokens from a bancor style exchange.\n     * Will withdraw at market rate both tokens.\n     * Use \"_\" for the constant value for TRX.\n     */\n\n  }, {\n    key: \"withdrawExchangeTokens\",\n    value: function withdrawExchangeTokens() {\n      var exchangeID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var tokenName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var tokenAmount = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var ownerAddress = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(ownerAddress)) {\n        callback = ownerAddress;\n        ownerAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.withdrawExchangeTokens, exchangeID, tokenName, tokenAmount, ownerAddress);\n      if (!this.tronWeb.isAddress(ownerAddress)) return callback('Invalid ownerAddress provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(exchangeID) || exchangeID < 0) return callback('Invalid exchangeID provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(tokenName) || !tokenName.length) return callback('Invalid tokenName provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(tokenAmount) || tokenAmount < 1) return callback('Invalid tokenAmount provided');\n      this.tronWeb.fullNode.request('wallet/exchangewithdraw', {\n        owner_address: this.tronWeb.address.toHex(ownerAddress),\n        exchange_id: parseInt(exchangeID),\n        token_id: this.tronWeb.fromUtf8(tokenName),\n        quant: parseInt(tokenAmount)\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Trade tokens on a bancor style exchange.\n     * Expected value is a validation and used to cap the total amt of token 2 spent.\n     * Use \"_\" for the constant value for TRX.\n     */\n\n  }, {\n    key: \"tradeExchangeTokens\",\n    value: function tradeExchangeTokens() {\n      var exchangeID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var tokenName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var tokenAmountSold = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var tokenAmountExpected = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var ownerAddress = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isFunction(ownerAddress)) {\n        callback = ownerAddress;\n        ownerAddress = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.tradeExchangeTokens, exchangeID, tokenName, tokenAmountSold, tokenAmountExpected, ownerAddress);\n      if (!this.tronWeb.isAddress(ownerAddress)) return callback('Invalid ownerAddress provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(exchangeID) || exchangeID < 0) return callback('Invalid exchangeID provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isString(tokenName) || !tokenName.length) return callback('Invalid tokenName provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(tokenAmountSold) || tokenAmountSold < 1) return callback('Invalid tokenAmountSold provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(tokenAmountExpected) || tokenAmountExpected < 1) return callback('Invalid tokenAmountExpected provided');\n      this.tronWeb.fullNode.request('wallet/exchangetransaction', {\n        owner_address: this.tronWeb.address.toHex(ownerAddress),\n        exchange_id: parseInt(exchangeID),\n        token_id: this.tronWeb.fromAscii(tokenName),\n        quant: parseInt(tokenAmountSold),\n        expected: parseInt(tokenAmountExpected)\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Update userFeePercentage.\n     */\n\n  }, {\n    key: \"updateSetting\",\n    value: function updateSetting() {\n      var ownerAddress = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var contractAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var userFeePercentage = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      if (!callback) return this.injectPromise(this.updateSetting, ownerAddress, contractAddress, userFeePercentage);\n      if (!this.tronWeb.isAddress(ownerAddress)) return callback('Invalid ownerAddress provided');\n      if (!this.tronWeb.isAddress(contractAddress)) return callback('Invalid contractAddress provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(userFeePercentage) || userFeePercentage < 0 || userFeePercentage > 100) return callback('Invalid options.userFeePercentage provided');\n      this.tronWeb.fullNode.request('wallet/updatesetting', {\n        owner_address: ownerAddress,\n        contract_address: contractAddress,\n        consume_user_resource_percent: userFeePercentage\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Update energy limit.\n     */\n\n  }, {\n    key: \"updateEnergyLimit\",\n    value: function updateEnergyLimit() {\n      var ownerAddress = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var contractAddress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var originEnergyLimit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      if (!callback) return this.injectPromise(this.updateEnergyLimit, ownerAddress, contractAddress, originEnergyLimit);\n      if (!this.tronWeb.isAddress(ownerAddress)) return callback('Invalid ownerAddress provided');\n      if (!this.tronWeb.isAddress(contractAddress)) return callback('Invalid contractAddress provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isInteger(originEnergyLimit) || originEnergyLimit < 0 || originEnergyLimit > 10000000) return callback('Invalid options.originEnergyLimit provided');\n      this.tronWeb.fullNode.request('wallet/updateenergylimit', {\n        owner_address: ownerAddress,\n        contract_address: contractAddress,\n        origin_energy_limit: originEnergyLimit\n      }, 'post').then(function (transaction) {\n        return transactionResultManager(transaction, callback);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }]);\n\n  return TransactionBuilder;\n}();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL3RyYW5zYWN0aW9uQnVpbGRlci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9saWIvdHJhbnNhY3Rpb25CdWlsZGVyLmpzPzZiNzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRyb25XZWIgZnJvbSAnaW5kZXgnO1xuaW1wb3J0IHV0aWxzIGZyb20gJ3V0aWxzJztcbmltcG9ydCAqIGFzIEV0aGVycyBmcm9tICdldGhlcnMnO1xuXG5cbmNvbnN0IHRyYW5zYWN0aW9uUmVzdWx0TWFuYWdlciA9ICh0cmFuc2FjdGlvbiwgY2FsbGJhY2spID0+IHtcbiAgICBpZih0cmFuc2FjdGlvbi5FcnJvcilcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHRyYW5zYWN0aW9uLkVycm9yKTtcblxuICAgIGlmKHRyYW5zYWN0aW9uLnJlc3VsdCAmJiB0cmFuc2FjdGlvbi5yZXN1bHQubWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soXG4gICAgICAgICAgICB0aGlzLnRyb25XZWIudG9VdGY4KHRyYW5zYWN0aW9uLnJlc3VsdC5tZXNzYWdlKVxuICAgICAgICApO1xuICAgIH1cbiAgICBjYWxsYmFjayhudWxsLCB0cmFuc2FjdGlvbik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyYW5zYWN0aW9uQnVpbGRlciB7XG4gICAgY29uc3RydWN0b3IodHJvbldlYiA9IGZhbHNlKSB7XG4gICAgICAgIGlmKCF0cm9uV2ViIHx8ICF0cm9uV2ViIGluc3RhbmNlb2YgVHJvbldlYilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgaW5zdGFuY2Ugb2YgVHJvbldlYicpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYiA9IHRyb25XZWI7XG4gICAgICAgIHRoaXMuaW5qZWN0UHJvbWlzZSA9IHV0aWxzLnByb21pc2VJbmplY3Rvcih0aGlzKTtcbiAgICB9XG5cbiAgICBzZW5kVHJ4KHRvID0gZmFsc2UsIGFtb3VudCA9IDAsIGZyb20gPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24oZnJvbSkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gZnJvbTtcbiAgICAgICAgICAgIGZyb20gPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLnNlbmRUcngsIHRvLCBhbW91bnQsIGZyb20pO1xuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKHRvKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCByZWNpcGllbnQgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIoYW1vdW50KSB8fCBhbW91bnQgPD0gMClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBhbW91bnQgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdGhpcy50cm9uV2ViLmlzQWRkcmVzcyhmcm9tKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBvcmlnaW4gYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIHRvID0gdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgodG8pO1xuICAgICAgICBmcm9tID0gdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgoZnJvbSk7XG5cbiAgICAgICAgaWYodG8gPT09IGZyb20pXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0Nhbm5vdCB0cmFuc2ZlciBUUlggdG8gdGhlIHNhbWUgYWNjb3VudCcpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvY3JlYXRldHJhbnNhY3Rpb24nLCB7XG4gICAgICAgICAgICB0b19hZGRyZXNzOiB0byxcbiAgICAgICAgICAgIG93bmVyX2FkZHJlc3M6IGZyb20sXG4gICAgICAgICAgICBhbW91bnQ6IHBhcnNlSW50KGFtb3VudClcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKHRyYW5zYWN0aW9uID0+IHRyYW5zYWN0aW9uUmVzdWx0TWFuYWdlcih0cmFuc2FjdGlvbiwgY2FsbGJhY2spKS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgc2VuZFRva2VuKHRvID0gZmFsc2UsIGFtb3VudCA9IDAsIHRva2VuSUQgPSBmYWxzZSwgZnJvbSA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihmcm9tKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBmcm9tO1xuICAgICAgICAgICAgZnJvbSA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuc2VuZFRva2VuLCB0bywgYW1vdW50LCB0b2tlbklELCBmcm9tKTtcblxuICAgICAgICBpZighdGhpcy50cm9uV2ViLmlzQWRkcmVzcyh0bykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgcmVjaXBpZW50IGFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKGFtb3VudCkgfHwgYW1vdW50IDw9IDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgYW1vdW50IHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzU3RyaW5nKHRva2VuSUQpIHx8ICF0b2tlbklELmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCB0b2tlbiBJRCBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKGZyb20pKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIG9yaWdpbiBhZGRyZXNzIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgdG8gPSB0aGlzLnRyb25XZWIuYWRkcmVzcy50b0hleCh0byk7XG4gICAgICAgIHRva2VuSUQgPSB0aGlzLnRyb25XZWIuZnJvbVV0ZjgodG9rZW5JRCk7XG4gICAgICAgIGZyb20gPSB0aGlzLnRyb25XZWIuYWRkcmVzcy50b0hleChmcm9tKTtcblxuICAgICAgICBpZih0byA9PT0gZnJvbSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnQ2Fubm90IHRyYW5zZmVyIHRva2VucyB0byB0aGUgc2FtZSBhY2NvdW50Jyk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoJ3dhbGxldC90cmFuc2ZlcmFzc2V0Jywge1xuICAgICAgICAgICAgdG9fYWRkcmVzczogdG8sXG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzOiBmcm9tLFxuICAgICAgICAgICAgYXNzZXRfbmFtZTogdG9rZW5JRCxcbiAgICAgICAgICAgIGFtb3VudDogcGFyc2VJbnQoYW1vdW50KVxuICAgICAgICB9LCAncG9zdCcpLnRoZW4odHJhbnNhY3Rpb24gPT4gdHJhbnNhY3Rpb25SZXN1bHRNYW5hZ2VyKHRyYW5zYWN0aW9uLCBjYWxsYmFjaykpLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICBwdXJjaGFzZVRva2VuKGlzc3VlckFkZHJlc3MgPSBmYWxzZSwgdG9rZW5JRCA9IGZhbHNlLCBhbW91bnQgPSAwLCBidXllciA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihidXllcikpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gYnV5ZXI7XG4gICAgICAgICAgICBidXllciA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMucHVyY2hhc2VUb2tlbiwgaXNzdWVyQWRkcmVzcywgdG9rZW5JRCwgYW1vdW50LCBidXllcik7XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5pc0FkZHJlc3MoaXNzdWVyQWRkcmVzcykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgaXNzdWVyIGFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNTdHJpbmcodG9rZW5JRCkgfHwgIXRva2VuSUQubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIHRva2VuIElEIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcihhbW91bnQpIHx8IGFtb3VudCA8PSAwKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGFtb3VudCBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKGJ1eWVyKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBidXllciBhZGRyZXNzIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoJ3dhbGxldC9wYXJ0aWNpcGF0ZWFzc2V0aXNzdWUnLCB7XG4gICAgICAgICAgICB0b19hZGRyZXNzOiB0aGlzLnRyb25XZWIuYWRkcmVzcy50b0hleChpc3N1ZXJBZGRyZXNzKSxcbiAgICAgICAgICAgIG93bmVyX2FkZHJlc3M6IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KGJ1eWVyKSxcbiAgICAgICAgICAgIGFzc2V0X25hbWU6IHRoaXMudHJvbldlYi5mcm9tVXRmOCh0b2tlbklEKSxcbiAgICAgICAgICAgIGFtb3VudDogcGFyc2VJbnQoYW1vdW50KVxuICAgICAgICB9LCAncG9zdCcpLnRoZW4odHJhbnNhY3Rpb24gPT4gdHJhbnNhY3Rpb25SZXN1bHRNYW5hZ2VyKHRyYW5zYWN0aW9uLCBjYWxsYmFjaykpLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICBmcmVlemVCYWxhbmNlKGFtb3VudCA9IDAsIGR1cmF0aW9uID0gMywgcmVzb3VyY2UgPSBcIkJBTkRXSURUSFwiLCBhZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleCwgY2FsbGJhY2sgPSBmYWxzZSlcbiAgICB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24oYWRkcmVzcykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gYWRkcmVzcztcbiAgICAgICAgICAgIGFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihkdXJhdGlvbikpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gZHVyYXRpb247XG4gICAgICAgICAgICBkdXJhdGlvbiA9IDM7XG4gICAgICAgIH1cblxuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKHJlc291cmNlKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSByZXNvdXJjZTtcbiAgICAgICAgICAgIHJlc291cmNlID0gXCJCQU5EV0lEVEhcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5mcmVlemVCYWxhbmNlLCBhbW91bnQsIGR1cmF0aW9uLCByZXNvdXJjZSwgYWRkcmVzcyk7XG5cbiAgICAgICAgaWYoIVsgJ0JBTkRXSURUSCcsICdFTkVSR1knIF0uaW5jbHVkZXMocmVzb3VyY2UpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIHJlc291cmNlIHByb3ZpZGVkOiBFeHBlY3RlZCBcIkJBTkRXSURUSFwiIG9yIFwiRU5FUkdZXCInKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKGFtb3VudCkgfHwgYW1vdW50IDw9IDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgYW1vdW50IHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcihkdXJhdGlvbikgfHwgZHVyYXRpb24gPCAzKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGR1cmF0aW9uIHByb3ZpZGVkLCBtaW5pbXVtIG9mIDMgZGF5cycpO1xuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKGFkZHJlc3MpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L2ZyZWV6ZWJhbGFuY2UnLCB7XG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzOiB0aGlzLnRyb25XZWIuYWRkcmVzcy50b0hleChhZGRyZXNzKSxcbiAgICAgICAgICAgIGZyb3plbl9iYWxhbmNlOiBwYXJzZUludChhbW91bnQpLFxuICAgICAgICAgICAgZnJvemVuX2R1cmF0aW9uOiBwYXJzZUludChkdXJhdGlvbiksXG4gICAgICAgICAgICByZXNvdXJjZTogcmVzb3VyY2VcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKHRyYW5zYWN0aW9uID0+IHRyYW5zYWN0aW9uUmVzdWx0TWFuYWdlcih0cmFuc2FjdGlvbiwgY2FsbGJhY2spKS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgdW5mcmVlemVCYWxhbmNlKHJlc291cmNlID0gXCJCQU5EV0lEVEhcIiwgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIGNhbGxiYWNrID0gZmFsc2UpXG4gICAge1xuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKGFkZHJlc3MpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGFkZHJlc3M7XG4gICAgICAgICAgICBhZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24ocmVzb3VyY2UpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IHJlc291cmNlO1xuICAgICAgICAgICAgcmVzb3VyY2UgPSBcIkJBTkRXSURUSFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLnVuZnJlZXplQmFsYW5jZSwgcmVzb3VyY2UsIGFkZHJlc3MpO1xuXG4gICAgICAgIGlmKCFbICdCQU5EV0lEVEgnLCAnRU5FUkdZJyBdLmluY2x1ZGVzKHJlc291cmNlKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCByZXNvdXJjZSBwcm92aWRlZDogRXhwZWN0ZWQgXCJCQU5EV0lEVEhcIiBvciBcIkVORVJHWVwiJyk7XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5pc0FkZHJlc3MoYWRkcmVzcykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvdW5mcmVlemViYWxhbmNlJywge1xuICAgICAgICAgICAgb3duZXJfYWRkcmVzczogdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgoYWRkcmVzcyksXG4gICAgICAgICAgICByZXNvdXJjZTogcmVzb3VyY2VcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKHRyYW5zYWN0aW9uID0+IHRyYW5zYWN0aW9uUmVzdWx0TWFuYWdlcih0cmFuc2FjdGlvbiwgY2FsbGJhY2spKS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgd2l0aGRyYXdCbG9ja1Jld2FyZHMoYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihhZGRyZXNzKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBhZGRyZXNzO1xuICAgICAgICAgICAgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMud2l0aGRyYXdCbG9ja1Jld2FyZHMsIGFkZHJlc3MpO1xuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKGFkZHJlc3MpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L3dpdGhkcmF3YmFsYW5jZScsIHtcbiAgICAgICAgICAgIG93bmVyX2FkZHJlc3M6IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KGFkZHJlc3MpXG4gICAgICAgIH0sICdwb3N0JykudGhlbih0cmFuc2FjdGlvbiA9PiB0cmFuc2FjdGlvblJlc3VsdE1hbmFnZXIodHJhbnNhY3Rpb24sIGNhbGxiYWNrKSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGFwcGx5Rm9yU1IoYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIHVybCA9IGZhbHNlLCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzVmFsaWRVUkwoYWRkcmVzcykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gdXJsIHx8IGZhbHNlO1xuICAgICAgICAgICAgdXJsID0gYWRkcmVzcztcbiAgICAgICAgICAgIGFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmFwcGx5Rm9yU1IsIGFkZHJlc3MsIHVybCk7XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5pc0FkZHJlc3MoYWRkcmVzcykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc1ZhbGlkVVJMKHVybCkpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgdXJsIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoJ3dhbGxldC9jcmVhdGV3aXRuZXNzJywge1xuICAgICAgICAgICAgb3duZXJfYWRkcmVzczogdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgoYWRkcmVzcyksXG4gICAgICAgICAgICB1cmw6IHRoaXMudHJvbldlYi5mcm9tVXRmOCh1cmwpXG4gICAgICAgIH0sICdwb3N0JykudGhlbih0cmFuc2FjdGlvbiA9PiB0cmFuc2FjdGlvblJlc3VsdE1hbmFnZXIodHJhbnNhY3Rpb24sIGNhbGxiYWNrKSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIHZvdGUodm90ZXMgPSB7fSwgdm90ZXJBZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleCwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKHZvdGVyQWRkcmVzcykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gdm90ZXJBZGRyZXNzO1xuICAgICAgICAgICAgdm90ZXJBZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy52b3RlLCB2b3Rlcywgdm90ZXJBZGRyZXNzKTtcblxuICAgICAgICBpZighdXRpbHMuaXNPYmplY3Qodm90ZXMpIHx8ICFPYmplY3Qua2V5cyh2b3RlcykubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIHZvdGVzIG9iamVjdCBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKHZvdGVyQWRkcmVzcykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgdm90ZXIgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIGxldCBpbnZhbGlkID0gZmFsc2U7XG5cbiAgICAgICAgdm90ZXMgPSBPYmplY3QuZW50cmllcyh2b3RlcykubWFwKChbIHNyQWRkcmVzcywgdm90ZUNvdW50IF0pID0+IHtcbiAgICAgICAgICAgIGlmKGludmFsaWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZighdGhpcy50cm9uV2ViLmlzQWRkcmVzcyhzckFkZHJlc3MpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soJ0ludmFsaWQgU1IgYWRkcmVzcyBwcm92aWRlZDogJyArIHNyQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGludmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKHZvdGVDb3VudCkgfHwgdm90ZUNvdW50IDw9IDApIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygnSW52YWxpZCB2b3RlIGNvdW50IHByb3ZpZGVkIGZvciBTUjogJyArIHNyQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGludmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHZvdGVfYWRkcmVzczogdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgoc3JBZGRyZXNzKSxcbiAgICAgICAgICAgICAgICB2b3RlX2NvdW50OiBwYXJzZUludCh2b3RlQ291bnQpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICBpZihpbnZhbGlkKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvdm90ZXdpdG5lc3NhY2NvdW50Jywge1xuICAgICAgICAgICAgb3duZXJfYWRkcmVzczogdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgodm90ZXJBZGRyZXNzKSxcbiAgICAgICAgICAgIHZvdGVzXG4gICAgICAgIH0sICdwb3N0JykudGhlbih0cmFuc2FjdGlvbiA9PiB0cmFuc2FjdGlvblJlc3VsdE1hbmFnZXIodHJhbnNhY3Rpb24sIGNhbGxiYWNrKSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGNyZWF0ZVNtYXJ0Q29udHJhY3Qob3B0aW9ucyA9IHt9LCBpc3N1ZXJBZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleCwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKGlzc3VlckFkZHJlc3MpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGlzc3VlckFkZHJlc3M7XG4gICAgICAgICAgICBpc3N1ZXJBZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5jcmVhdGVTbWFydENvbnRyYWN0LCBvcHRpb25zLCBpc3N1ZXJBZGRyZXNzKTtcblxuICAgICAgICBjb25zdCBmZWVMaW1pdCA9IG9wdGlvbnMuZmVlTGltaXQgfHwgb3B0aW9ucy5mZWVfbGltaXQgfHwgMV8wMDBfMDAwXzAwMDtcbiAgICAgICAgY29uc3QgdXNlckZlZVBlcmNlbnRhZ2UgPSBvcHRpb25zLnVzZXJGZWVQZXJjZW50YWdlIHx8IG9wdGlvbnMuY29uc3VtZV91c2VyX3Jlc291cmNlX3BlcmNlbnQgfHwgMDtcbiAgICAgICAgY29uc3Qgb3JpZ2luRW5lcmd5TGltaXQgPSBvcHRpb25zLm9yaWdpbkVuZXJneUxpbWl0IHx8IG9wdGlvbnMub3JpZ2luX2VuZXJneV9saW1pdCB8fCAxMF8wMDBfMDAwO1xuICAgICAgICBjb25zdCBjYWxsVmFsdWUgPSBvcHRpb25zLmNhbGxWYWx1ZSB8fCBvcHRpb25zLmNhbGxfdmFsdWUgfHwgMDtcbiAgICAgICAgY29uc3QgdG9rZW5WYWx1ZSA9IG9wdGlvbnMudG9rZW5WYWx1ZSB8fCBvcHRpb25zLnRva2VuX3ZhbHVlO1xuICAgICAgICBjb25zdCB0b2tlbklkID0gb3B0aW9ucy50b2tlbklkIHx8IG9wdGlvbnMudG9rZW5faWQ7XG5cbiAgICAgICAgbGV0IHtcbiAgICAgICAgICAgIGFiaSA9IGZhbHNlLFxuICAgICAgICAgICAgYnl0ZWNvZGUgPSBmYWxzZSxcbiAgICAgICAgICAgIHBhcmFtZXRlcnMgPSBbXSxcbiAgICAgICAgICAgIG5hbWUgPSBcIlwiXG4gICAgICAgIH0gPSBvcHRpb25zO1xuXG5cbiAgICAgICAgaWYoYWJpICYmIHV0aWxzLmlzU3RyaW5nKGFiaSkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYWJpID0gSlNPTi5wYXJzZShhYmkpO1xuICAgICAgICAgICAgfSBjYXRjaHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgb3B0aW9ucy5hYmkgcHJvdmlkZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCF1dGlscy5pc0FycmF5KGFiaSkpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgb3B0aW9ucy5hYmkgcHJvdmlkZWQnKTtcblxuXG4gICAgICAgIGNvbnN0IHBheWFibGUgPSBhYmkuc29tZShmdW5jID0+IHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jLnR5cGUgPT0gJ2NvbnN0cnVjdG9yJyAmJiBmdW5jLnBheWFibGU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0hleChieXRlY29kZSkpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgb3B0aW9ucy5ieXRlY29kZSBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIoZmVlTGltaXQpIHx8IGZlZUxpbWl0IDw9IDAgfHwgZmVlTGltaXQgPiAxXzAwMF8wMDBfMDAwKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIG9wdGlvbnMuZmVlTGltaXQgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKGNhbGxWYWx1ZSkgfHwgY2FsbFZhbHVlIDwgMClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBvcHRpb25zLmNhbGxWYWx1ZSBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKHBheWFibGUgJiYgY2FsbFZhbHVlID09IDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ1doZW4gY29udHJhY3QgaXMgcGF5YWJsZSwgb3B0aW9ucy5jYWxsVmFsdWUgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXInKTtcblxuICAgICAgICBpZighcGF5YWJsZSAmJiBjYWxsVmFsdWUgPiAwKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdXaGVuIGNvbnRyYWN0IGlzIG5vdCBwYXlhYmxlLCBvcHRpb25zLmNhbGxWYWx1ZSBtdXN0IGJlIDAnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKHVzZXJGZWVQZXJjZW50YWdlKSB8fCB1c2VyRmVlUGVyY2VudGFnZSA8IDAgfHwgdXNlckZlZVBlcmNlbnRhZ2UgPiAxMDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgb3B0aW9ucy51c2VyRmVlUGVyY2VudGFnZSBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIob3JpZ2luRW5lcmd5TGltaXQpIHx8IG9yaWdpbkVuZXJneUxpbWl0IDwgMCB8fCBvcmlnaW5FbmVyZ3lMaW1pdCA+IDEwXzAwMF8wMDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgb3B0aW9ucy5vcmlnaW5FbmVyZ3lMaW1pdCBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0FycmF5KHBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIHBhcmFtZXRlcnMgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdGhpcy50cm9uV2ViLmlzQWRkcmVzcyhpc3N1ZXJBZGRyZXNzKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBpc3N1ZXIgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIHZhciBjb25zdHJ1Y3RvclBhcmFtcyA9IGFiaS5maW5kKFxuICAgICAgICAgICAgKGl0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0LnR5cGUgPT09ICdjb25zdHJ1Y3Rvcic7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYodG9rZW5WYWx1ZSAmJiAhdXRpbHMuaXNJbnRlZ2VyKHRva2VuVmFsdWUpIHx8IHRva2VuVmFsdWUgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIG9wdGlvbnMudG9rZW5WYWx1ZSBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKHRva2VuSWQgJiYgIXV0aWxzLmlzSW50ZWdlcih0b2tlbklkKSB8fCB0b2tlblZhbHVlIDwgMClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBvcHRpb25zLnRva2VuVmFsdWUgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZih0eXBlb2YgY29uc3RydWN0b3JQYXJhbXMgIT09ICd1bmRlZmluZWQnICYmIGNvbnN0cnVjdG9yUGFyYW1zKSB7XG4gICAgICAgICAgICBjb25zdCBhYmlDb2RlciA9IG5ldyBFdGhlcnMudXRpbHMuQWJpQ29kZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVzID0gW107XG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yUGFyYW1zID0gY29uc3RydWN0b3JQYXJhbXMuaW5wdXRzO1xuXG4gICAgICAgICAgICBpZihwYXJhbWV0ZXJzLmxlbmd0aCAhPSBjb25zdHJ1Y3RvclBhcmFtcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGBjb25zdHJ1Y3RvciBuZWVkcyAke2NvbnN0cnVjdG9yUGFyYW1zLmxlbmd0aH0gYnV0ICR7cGFyYW1ldGVycy5sZW5ndGh9IHByb3ZpZGVkYCk7XG5cbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwYXJhbWV0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHR5cGUgPSBjb25zdHJ1Y3RvclBhcmFtc1tpXS50eXBlO1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHBhcmFtZXRlcnNbaV07XG5cbiAgICAgICAgICAgICAgICBpZighdHlwZSB8fCAhdXRpbHMuaXNTdHJpbmcodHlwZSkgfHwgIXR5cGUubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgcGFyYW1ldGVyIHR5cGUgcHJvdmlkZWQ6ICcgKyB0eXBlKTtcblxuICAgICAgICAgICAgICAgIGlmKHR5cGUgPT0gJ2FkZHJlc3MnKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KHZhbHVlKS5yZXBsYWNlKC9eKDQxKS8sICcweCcpO1xuXG4gICAgICAgICAgICAgICAgdHlwZXMucHVzaCh0eXBlKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyA9IGFiaUNvZGVyLmVuY29kZSh0eXBlcywgdmFsdWVzKS5yZXBsYWNlKC9eKDB4KS8sICcnKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHBhcmFtZXRlcnMgPSAnJztcblxuICAgICAgICBjb25zdCBhcmdzID0ge1xuICAgICAgICAgICAgb3duZXJfYWRkcmVzczogdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgoaXNzdWVyQWRkcmVzcyksXG4gICAgICAgICAgICBmZWVfbGltaXQ6IHBhcnNlSW50KGZlZUxpbWl0KSxcbiAgICAgICAgICAgIGNhbGxfdmFsdWU6IHBhcnNlSW50KGNhbGxWYWx1ZSksXG4gICAgICAgICAgICBjb25zdW1lX3VzZXJfcmVzb3VyY2VfcGVyY2VudDogdXNlckZlZVBlcmNlbnRhZ2UsXG4gICAgICAgICAgICBvcmlnaW5fZW5lcmd5X2xpbWl0OiBvcmlnaW5FbmVyZ3lMaW1pdCxcbiAgICAgICAgICAgIGFiaTogSlNPTi5zdHJpbmdpZnkoYWJpKSxcbiAgICAgICAgICAgIGJ5dGVjb2RlLFxuICAgICAgICAgICAgcGFyYW1ldGVyOiBwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgbmFtZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdG9rZW5WYWx1ZSBhbmQgdG9rZW5JZCBjYW4gY2F1c2UgZXJyb3JzIGlmIHByb3ZpZGVkIHdoZW4gdGhlIHRyeDEwIHByb3Bvc2FsIGhhcyBub3QgYmVlbiBhcHByb3ZlZCB5ZXQuIFNvIHdlIHNldCB0aGVtIG9ubHkgaWYgdGhleSBhcmUgcGFzc2VkIHRvIHRoZSBtZXRob2QuXG4gICAgICAgIGlmICh0b2tlblZhbHVlKVxuICAgICAgICAgICAgYXJncy50b2tlbl92YWx1ZSA9IHRva2VuVmFsdWVcbiAgICAgICAgaWYgKHRva2VuSWQpXG4gICAgICAgICAgICBhcmdzLnRva2VuX2lkID0gdG9rZW5JZFxuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvZGVwbG95Y29udHJhY3QnLCBhcmdzLCAncG9zdCcpLnRoZW4odHJhbnNhY3Rpb24gPT4gdHJhbnNhY3Rpb25SZXN1bHRNYW5hZ2VyKHRyYW5zYWN0aW9uLCBjYWxsYmFjaykpLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICB0cmlnZ2VyU21hcnRDb250cmFjdChcbiAgICAgICAgY29udHJhY3RBZGRyZXNzLFxuICAgICAgICBmdW5jdGlvblNlbGVjdG9yLFxuICAgICAgICBmZWVMaW1pdCA9IDFfMDAwXzAwMF8wMDAsXG4gICAgICAgIGNhbGxWYWx1ZSA9IDAsXG4gICAgICAgIHBhcmFtZXRlcnMgPSBbXSxcbiAgICAgICAgaXNzdWVyQWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsXG4gICAgICAgIGNhbGxiYWNrID0gZmFsc2VcbiAgICApIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihpc3N1ZXJBZGRyZXNzKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBpc3N1ZXJBZGRyZXNzO1xuICAgICAgICAgICAgaXNzdWVyQWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKHBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IHBhcmFtZXRlcnM7XG4gICAgICAgICAgICBwYXJhbWV0ZXJzID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKGNhbGxWYWx1ZSkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gY2FsbFZhbHVlO1xuICAgICAgICAgICAgY2FsbFZhbHVlID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24oZmVlTGltaXQpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGZlZUxpbWl0O1xuICAgICAgICAgICAgZmVlTGltaXQgPSAxXzAwMF8wMDBfMDAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWNhbGxiYWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKFxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlclNtYXJ0Q29udHJhY3QsXG4gICAgICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uU2VsZWN0b3IsXG4gICAgICAgICAgICAgICAgZmVlTGltaXQsXG4gICAgICAgICAgICAgICAgY2FsbFZhbHVlLFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgaXNzdWVyQWRkcmVzc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKGNvbnRyYWN0QWRkcmVzcykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgY29udHJhY3QgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc1N0cmluZyhmdW5jdGlvblNlbGVjdG9yKSB8fCAhZnVuY3Rpb25TZWxlY3Rvci5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgZnVuY3Rpb24gc2VsZWN0b3IgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKGNhbGxWYWx1ZSkgfHwgY2FsbFZhbHVlIDwgMClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBjYWxsIHZhbHVlIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcihmZWVMaW1pdCkgfHwgZmVlTGltaXQgPD0gMCB8fCBmZWVMaW1pdCA+IDFfMDAwXzAwMF8wMDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgZmVlIGxpbWl0IHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzQXJyYXkocGFyYW1ldGVycykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgcGFyYW1ldGVycyBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKGlzc3VlckFkZHJlc3MpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGlzc3VlciBhZGRyZXNzIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgZnVuY3Rpb25TZWxlY3RvciA9IGZ1bmN0aW9uU2VsZWN0b3IucmVwbGFjZSgnL1xccyovZycsICcnKTtcblxuICAgICAgICBpZihwYXJhbWV0ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgYWJpQ29kZXIgPSBuZXcgRXRoZXJzLnV0aWxzLkFiaUNvZGVyKCk7XG4gICAgICAgICAgICBjb25zdCB0eXBlcyA9IFtdO1xuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gW107XG5cbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwYXJhbWV0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgdHlwZSwgdmFsdWUgfSA9IHBhcmFtZXRlcnNbaV07XG5cbiAgICAgICAgICAgICAgICBpZighdHlwZSB8fCAhdXRpbHMuaXNTdHJpbmcodHlwZSkgfHwgIXR5cGUubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgcGFyYW1ldGVyIHR5cGUgcHJvdmlkZWQ6ICcgKyB0eXBlKTtcblxuICAgICAgICAgICAgICAgIGlmKHR5cGUgPT0gJ2FkZHJlc3MnKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KHZhbHVlKS5yZXBsYWNlKC9eKDQxKS8sICcweCcpO1xuXG4gICAgICAgICAgICAgICAgdHlwZXMucHVzaCh0eXBlKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycyA9IGFiaUNvZGVyLmVuY29kZSh0eXBlcywgdmFsdWVzKS5yZXBsYWNlKC9eKDB4KS8sICcnKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHBhcmFtZXRlcnMgPSAnJztcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L3RyaWdnZXJzbWFydGNvbnRyYWN0Jywge1xuICAgICAgICAgICAgY29udHJhY3RfYWRkcmVzczogdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgoY29udHJhY3RBZGRyZXNzKSxcbiAgICAgICAgICAgIG93bmVyX2FkZHJlc3M6IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KGlzc3VlckFkZHJlc3MpLFxuICAgICAgICAgICAgZnVuY3Rpb25fc2VsZWN0b3I6IGZ1bmN0aW9uU2VsZWN0b3IsXG4gICAgICAgICAgICBmZWVfbGltaXQ6IHBhcnNlSW50KGZlZUxpbWl0KSxcbiAgICAgICAgICAgIGNhbGxfdmFsdWU6IHBhcnNlSW50KGNhbGxWYWx1ZSksXG4gICAgICAgICAgICBwYXJhbWV0ZXI6IHBhcmFtZXRlcnNcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKHRyYW5zYWN0aW9uID0+IHRyYW5zYWN0aW9uUmVzdWx0TWFuYWdlcih0cmFuc2FjdGlvbiwgY2FsbGJhY2spKS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgY3JlYXRlVG9rZW4ob3B0aW9ucyA9IHt9LCBpc3N1ZXJBZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleCwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKGlzc3VlckFkZHJlc3MpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGlzc3VlckFkZHJlc3M7XG4gICAgICAgICAgICBpc3N1ZXJBZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5jcmVhdGVUb2tlbiwgb3B0aW9ucywgaXNzdWVyQWRkcmVzcyk7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgbmFtZSA9IGZhbHNlLFxuICAgICAgICAgICAgYWJicmV2aWF0aW9uID0gZmFsc2UsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGZhbHNlLFxuICAgICAgICAgICAgdXJsID0gZmFsc2UsXG4gICAgICAgICAgICB0b3RhbFN1cHBseSA9IDAsXG4gICAgICAgICAgICB0cnhSYXRpbyA9IDEsIC8vIEhvdyBtdWNoIFRSWCB3aWxsIGB0b2tlblJhdGlvYCBjb3N0P1xuICAgICAgICAgICAgdG9rZW5SYXRpbyA9IDEsIC8vIEhvdyBtYW55IHRva2VucyB3aWxsIGB0cnhSYXRpb2AgYWZmb3JkP1xuICAgICAgICAgICAgc2FsZVN0YXJ0ID0gRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIHNhbGVFbmQgPSBmYWxzZSxcbiAgICAgICAgICAgIGZyZWVCYW5kd2lkdGggPSAwLCAvLyBUaGUgY3JlYXRvcidzIFwiZG9uYXRlZFwiIGJhbmR3aWR0aCBmb3IgdXNlIGJ5IHRva2VuIGhvbGRlcnNcbiAgICAgICAgICAgIGZyZWVCYW5kd2lkdGhMaW1pdCA9IDAsIC8vIE91dCBvZiBgdG90YWxGcmVlQmFuZHdpZHRoYCwgdGhlIGFtb3VudCBlYWNoIHRva2VuIGhvbGRlciBnZXRcbiAgICAgICAgICAgIGZyb3plbkFtb3VudCA9IDAsXG4gICAgICAgICAgICBmcm96ZW5EdXJhdGlvbiA9IDBcbiAgICAgICAgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzU3RyaW5nKG5hbWUpIHx8ICFuYW1lLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCB0b2tlbiBuYW1lIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzU3RyaW5nKGFiYnJldmlhdGlvbikgfHwgIWFiYnJldmlhdGlvbi5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgdG9rZW4gYWJicmV2aWF0aW9uIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcih0b3RhbFN1cHBseSkgfHwgdG90YWxTdXBwbHkgPD0gMClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBzdXBwbHkgYW1vdW50IHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcih0cnhSYXRpbykgfHwgdHJ4UmF0aW8gPD0gMClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnVFJYIHJhdGlvIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcih0b2tlblJhdGlvKSB8fCB0b2tlblJhdGlvIDw9IDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ1Rva2VuIHJhdGlvIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcihzYWxlU3RhcnQpIHx8IHNhbGVTdGFydCA8IERhdGUubm93KCkpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgc2FsZSBzdGFydCB0aW1lc3RhbXAgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKHNhbGVFbmQpIHx8IHNhbGVFbmQgPD0gc2FsZVN0YXJ0KVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIHNhbGUgZW5kIHRpbWVzdGFtcCBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc1N0cmluZyhkZXNjcmlwdGlvbikgfHwgIWRlc2NyaXB0aW9uLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCB0b2tlbiBkZXNjcmlwdGlvbiBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc1N0cmluZyh1cmwpIHx8ICF1cmwubGVuZ3RoIHx8ICF1dGlscy5pc1ZhbGlkVVJMKHVybCkpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgdG9rZW4gdXJsIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcihmcmVlQmFuZHdpZHRoKSB8fCBmcmVlQmFuZHdpZHRoIDwgMClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBmcmVlIGJhbmR3aWR0aCBhbW91bnQgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKGZyZWVCYW5kd2lkdGhMaW1pdCkgfHwgZnJlZUJhbmR3aWR0aExpbWl0IDwgMCB8fCAoZnJlZUJhbmR3aWR0aCAmJiAhZnJlZUJhbmR3aWR0aExpbWl0KSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBmcmVlIGJhbmR3aWR0aCBsaW1pdCBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIoZnJvemVuQW1vdW50KSB8fCBmcm96ZW5BbW91bnQgPCAwIHx8ICghZnJvemVuRHVyYXRpb24gJiYgZnJvemVuQW1vdW50KSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBmcm96ZW4gc3VwcGx5IHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcihmcm96ZW5EdXJhdGlvbikgfHwgZnJvemVuRHVyYXRpb24gPCAwIHx8IChmcm96ZW5EdXJhdGlvbiAmJiAhZnJvemVuQW1vdW50KSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBmcm96ZW4gZHVyYXRpb24gcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdGhpcy50cm9uV2ViLmlzQWRkcmVzcyhpc3N1ZXJBZGRyZXNzKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBpc3N1ZXIgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvY3JlYXRlYXNzZXRpc3N1ZScsIHtcbiAgICAgICAgICAgIG93bmVyX2FkZHJlc3M6IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KGlzc3VlckFkZHJlc3MpLFxuICAgICAgICAgICAgbmFtZTogdGhpcy50cm9uV2ViLmZyb21VdGY4KG5hbWUpLFxuICAgICAgICAgICAgYWJicjogdGhpcy50cm9uV2ViLmZyb21VdGY4KGFiYnJldmlhdGlvbiksXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy50cm9uV2ViLmZyb21VdGY4KGRlc2NyaXB0aW9uKSxcbiAgICAgICAgICAgIHVybDogdGhpcy50cm9uV2ViLmZyb21VdGY4KHVybCksXG4gICAgICAgICAgICB0b3RhbF9zdXBwbHk6IHBhcnNlSW50KHRvdGFsU3VwcGx5KSxcbiAgICAgICAgICAgIHRyeF9udW06IHBhcnNlSW50KHRyeFJhdGlvKSxcbiAgICAgICAgICAgIG51bTogcGFyc2VJbnQodG9rZW5SYXRpbyksXG4gICAgICAgICAgICBzdGFydF90aW1lOiBwYXJzZUludChzYWxlU3RhcnQpLFxuICAgICAgICAgICAgZW5kX3RpbWU6IHBhcnNlSW50KHNhbGVFbmQpLFxuICAgICAgICAgICAgZnJlZV9hc3NldF9uZXRfbGltaXQ6IHBhcnNlSW50KGZyZWVCYW5kd2lkdGgpLFxuICAgICAgICAgICAgcHVibGljX2ZyZWVfYXNzZXRfbmV0X2xpbWl0OiBwYXJzZUludChmcmVlQmFuZHdpZHRoTGltaXQpLFxuICAgICAgICAgICAgZnJvemVuX3N1cHBseToge1xuICAgICAgICAgICAgICAgIGZyb3plbl9hbW91bnQ6IHBhcnNlSW50KGZyb3plbkFtb3VudCksXG4gICAgICAgICAgICAgICAgZnJvemVuX2RheXM6IHBhcnNlSW50KGZyb3plbkR1cmF0aW9uKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCAncG9zdCcpLnRoZW4odHJhbnNhY3Rpb24gPT4gdHJhbnNhY3Rpb25SZXN1bHRNYW5hZ2VyKHRyYW5zYWN0aW9uLCBjYWxsYmFjaykpLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICB1cGRhdGVBY2NvdW50KGFjY291bnROYW1lID0gZmFsc2UsIGFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LCBjYWxsYmFjayA9IGZhbHNlKVxuICAgIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihhZGRyZXNzKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBhZGRyZXNzO1xuICAgICAgICAgICAgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy51cGRhdGVBY2NvdW50LCBhY2NvdW50TmFtZSwgYWRkcmVzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXV0aWxzLmlzU3RyaW5nKGFjY291bnROYW1lKSB8fCAhYWNjb3VudE5hbWUubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ05hbWUgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5pc0FkZHJlc3MoYWRkcmVzcykpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBvcmlnaW4gYWRkcmVzcyBwcm92aWRlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoJ3dhbGxldC91cGRhdGVhY2NvdW50Jywge1xuICAgICAgICAgICAgYWNjb3VudF9uYW1lOiB0aGlzLnRyb25XZWIuZnJvbVV0ZjgoYWNjb3VudE5hbWUpLFxuICAgICAgICAgICAgb3duZXJfYWRkcmVzczogdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgoYWRkcmVzcyksXG4gICAgICAgIH0sICdwb3N0JykudGhlbih0cmFuc2FjdGlvbiA9PiB0cmFuc2FjdGlvblJlc3VsdE1hbmFnZXIodHJhbnNhY3Rpb24sIGNhbGxiYWNrKSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIHVwZGF0ZVRva2VuKG9wdGlvbnMgPSB7fSwgaXNzdWVyQWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihpc3N1ZXJBZGRyZXNzKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBpc3N1ZXJBZGRyZXNzO1xuICAgICAgICAgICAgaXNzdWVyQWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMudXBkYXRlVG9rZW4sIG9wdGlvbnMsIGlzc3VlckFkZHJlc3MpO1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZmFsc2UsXG4gICAgICAgICAgICB1cmwgPSBmYWxzZSxcbiAgICAgICAgICAgIGZyZWVCYW5kd2lkdGggPSAwLCAvLyBUaGUgY3JlYXRvcidzIFwiZG9uYXRlZFwiIGJhbmR3aWR0aCBmb3IgdXNlIGJ5IHRva2VuIGhvbGRlcnNcbiAgICAgICAgICAgIGZyZWVCYW5kd2lkdGhMaW1pdCA9IDAgLy8gT3V0IG9mIGB0b3RhbEZyZWVCYW5kd2lkdGhgLCB0aGUgYW1vdW50IGVhY2ggdG9rZW4gaG9sZGVyIGdldFxuICAgICAgICB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZighdXRpbHMuaXNTdHJpbmcoZGVzY3JpcHRpb24pIHx8ICFkZXNjcmlwdGlvbi5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgdG9rZW4gZGVzY3JpcHRpb24gcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNTdHJpbmcodXJsKSB8fCAhdXJsLmxlbmd0aCB8fCAhdXRpbHMuaXNWYWxpZFVSTCh1cmwpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIHRva2VuIHVybCBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIoZnJlZUJhbmR3aWR0aCkgfHwgZnJlZUJhbmR3aWR0aCA8IDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgZnJlZSBiYW5kd2lkdGggYW1vdW50IHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcihmcmVlQmFuZHdpZHRoTGltaXQpIHx8IGZyZWVCYW5kd2lkdGhMaW1pdCA8IDAgfHwgKGZyZWVCYW5kd2lkdGggJiYgIWZyZWVCYW5kd2lkdGhMaW1pdCkpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgZnJlZSBiYW5kd2lkdGggbGltaXQgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdGhpcy50cm9uV2ViLmlzQWRkcmVzcyhpc3N1ZXJBZGRyZXNzKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBpc3N1ZXIgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvdXBkYXRlYXNzZXQnLCB7XG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzOiB0aGlzLnRyb25XZWIuYWRkcmVzcy50b0hleChpc3N1ZXJBZGRyZXNzKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnRyb25XZWIuZnJvbVV0ZjgoZGVzY3JpcHRpb24pLFxuICAgICAgICAgICAgdXJsOiB0aGlzLnRyb25XZWIuZnJvbVV0ZjgodXJsKSxcbiAgICAgICAgICAgIG5ld19saW1pdDogcGFyc2VJbnQoZnJlZUJhbmR3aWR0aCksXG4gICAgICAgICAgICBuZXdfcHVibGljX2xpbWl0OiBwYXJzZUludChmcmVlQmFuZHdpZHRoTGltaXQpXG4gICAgICAgIH0sICdwb3N0JykudGhlbih0cmFuc2FjdGlvbiA9PiB0cmFuc2FjdGlvblJlc3VsdE1hbmFnZXIodHJhbnNhY3Rpb24sIGNhbGxiYWNrKSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIHNlbmRBc3NldCguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRUb2tlbiguLi5hcmdzKTtcbiAgICB9XG5cbiAgICBwdXJjaGFzZUFzc2V0KC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHVyY2hhc2VUb2tlbiguLi5hcmdzKTtcbiAgICB9XG5cbiAgICBjcmVhdGVBc3NldCguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRva2VuKC4uLmFyZ3MpO1xuICAgIH1cblxuICAgIHVwZGF0ZUFzc2V0KC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlVG9rZW4oLi4uYXJncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHByb3Bvc2FsIHRvIG1vZGlmeSB0aGUgbmV0d29yay5cbiAgICAgKiBDYW4gb25seSBiZSBjcmVhdGVkIGJ5IGEgY3VycmVudCBTdXBlciBSZXByZXNlbnRhdGl2ZS5cbiAgICAgKi9cbiAgICBjcmVhdGVQcm9wb3NhbChwYXJhbWV0ZXJzID0gZmFsc2UsIGlzc3VlckFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24oaXNzdWVyQWRkcmVzcykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gaXNzdWVyQWRkcmVzcztcbiAgICAgICAgICAgIGlzc3VlckFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmNyZWF0ZVByb3Bvc2FsLCBwYXJhbWV0ZXJzLCBpc3N1ZXJBZGRyZXNzKTtcblxuICAgICAgICBpZighdGhpcy50cm9uV2ViLmlzQWRkcmVzcyhpc3N1ZXJBZGRyZXNzKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBpc3N1ZXJBZGRyZXNzIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgY29uc3QgaW52YWxpZCA9ICdJbnZhbGlkIHByb3Bvc2FsIHBhcmFtZXRlcnMgcHJvdmlkZWQnO1xuXG4gICAgICAgIGlmKCFwYXJhbWV0ZXJzKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGludmFsaWQpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0FycmF5KHBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgcGFyYW1ldGVycyA9IFtwYXJhbWV0ZXJzXTtcblxuICAgICAgICBmb3IgKGxldCBwYXJhbWV0ZXIgb2YgcGFyYW1ldGVycykge1xuICAgICAgICAgICAgaWYoIXV0aWxzLmlzT2JqZWN0KHBhcmFtZXRlcikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGludmFsaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoJ3dhbGxldC9wcm9wb3NhbGNyZWF0ZScsIHtcbiAgICAgICAgICAgIG93bmVyX2FkZHJlc3M6IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KGlzc3VlckFkZHJlc3MpLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogcGFyYW1ldGVyc1xuICAgICAgICB9LCAncG9zdCcpLnRoZW4odHJhbnNhY3Rpb24gPT4gdHJhbnNhY3Rpb25SZXN1bHRNYW5hZ2VyKHRyYW5zYWN0aW9uLCBjYWxsYmFjaykpLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGEgbmV0d29yayBtb2RpZmljYXRpb24gcHJvcG9zYWwgdGhhdCB0aGUgb3duZXIgaXNzdWVkLlxuICAgICAqIE9ubHkgY3VycmVudCBTdXBlciBSZXByZXNlbnRhdGl2ZSBjYW4gdm90ZSBvbiBhIHByb3Bvc2FsLlxuICAgICAqL1xuICAgIGRlbGV0ZVByb3Bvc2FsKHByb3Bvc2FsSUQgPSBmYWxzZSwgaXNzdWVyQWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihpc3N1ZXJBZGRyZXNzKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBpc3N1ZXJBZGRyZXNzO1xuICAgICAgICAgICAgaXNzdWVyQWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZGVsZXRlUHJvcG9zYWwsIHByb3Bvc2FsSUQsIGlzc3VlckFkZHJlc3MpO1xuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKGlzc3VlckFkZHJlc3MpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGlzc3VlckFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKHByb3Bvc2FsSUQpIHx8IHByb3Bvc2FsSUQgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIHByb3Bvc2FsSUQgcHJvdmlkZWQnKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L3Byb3Bvc2FsZGVsZXRlJywge1xuICAgICAgICAgICAgb3duZXJfYWRkcmVzczogdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgoaXNzdWVyQWRkcmVzcyksXG4gICAgICAgICAgICBwcm9wb3NhbF9pZDogcGFyc2VJbnQocHJvcG9zYWxJRClcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKHRyYW5zYWN0aW9uID0+IHRyYW5zYWN0aW9uUmVzdWx0TWFuYWdlcih0cmFuc2FjdGlvbiwgY2FsbGJhY2spKS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHZvdGUgdG8gYW4gaXNzdWVkIG5ldHdvcmsgbW9kaWZpY2F0aW9uIHByb3Bvc2FsLlxuICAgICAqIE9ubHkgY3VycmVudCBTdXBlciBSZXByZXNlbnRhdGl2ZSBjYW4gdm90ZSBvbiBhIHByb3Bvc2FsLlxuICAgICAqL1xuICAgIHZvdGVQcm9wb3NhbChwcm9wb3NhbElEID0gZmFsc2UsIGlzQXBwcm92YWwgPSBmYWxzZSwgdm90ZXJBZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleCwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKHZvdGVyQWRkcmVzcykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gdm90ZXJBZGRyZXNzO1xuICAgICAgICAgICAgdm90ZXJBZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy52b3RlUHJvcG9zYWwsIHByb3Bvc2FsSUQsIGlzQXBwcm92YWwsIHZvdGVyQWRkcmVzcyk7XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5pc0FkZHJlc3Modm90ZXJBZGRyZXNzKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCB2b3RlckFkZHJlc3MgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIocHJvcG9zYWxJRCkgfHwgcHJvcG9zYWxJRCA8IDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgcHJvcG9zYWxJRCBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0Jvb2xlYW4oaXNBcHByb3ZhbCkpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgaGFzQXBwcm92YWwgcHJvdmlkZWQnKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L3Byb3Bvc2FsYXBwcm92ZScsIHtcbiAgICAgICAgICAgIG93bmVyX2FkZHJlc3M6IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KHZvdGVyQWRkcmVzcyksXG4gICAgICAgICAgICBwcm9wb3NhbF9pZDogcGFyc2VJbnQocHJvcG9zYWxJRCksXG4gICAgICAgICAgICBpc19hZGRfYXBwcm92YWw6IGlzQXBwcm92YWxcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKHRyYW5zYWN0aW9uID0+IHRyYW5zYWN0aW9uUmVzdWx0TWFuYWdlcih0cmFuc2FjdGlvbiwgY2FsbGJhY2spKS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGV4Y2hhbmdlIGJldHdlZW4gYSB0b2tlbiBhbmQgVFJYLlxuICAgICAqIFRva2VuIE5hbWUgc2hvdWxkIGJlIGEgQ0FTRSBTRU5TSVRJVkUgc3RyaW5nLlxuICAgICAqIFBMRUFTRSBWRVJJRlkgVEhJUyBPTiBUUk9OU0NBTi5cbiAgICAgKi9cbiAgICBjcmVhdGVUUlhFeGNoYW5nZSh0b2tlbk5hbWUsIHRva2VuQmFsYW5jZSwgdHJ4QmFsYW5jZSwgb3duZXJBZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleCwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKG93bmVyQWRkcmVzcykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3duZXJBZGRyZXNzO1xuICAgICAgICAgICAgb3duZXJBZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuY3JlYXRlVFJYRXhjaGFuZ2UsIHRva2VuTmFtZSwgdG9rZW5CYWxhbmNlLCB0cnhCYWxhbmNlLCBvd25lckFkZHJlc3MpO1xuXG4gICAgICAgIGlmICghdGhpcy50cm9uV2ViLmlzQWRkcmVzcyhvd25lckFkZHJlc3MpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZiAoIXV0aWxzLmlzU3RyaW5nKHRva2VuTmFtZSkgfHwgIXRva2VuTmFtZS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgdG9rZW5OYW1lIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYgKCF1dGlscy5pc0ludGVnZXIodG9rZW5CYWxhbmNlKSB8fCB0b2tlbkJhbGFuY2UgPD0gMFxuICAgICAgICAgICAgfHwgIXV0aWxzLmlzSW50ZWdlcih0cnhCYWxhbmNlKSB8fCB0cnhCYWxhbmNlIDw9IDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgYW1vdW50IHByb3ZpZGVkJyk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoJ3dhbGxldC9leGNoYW5nZWNyZWF0ZScsIHtcbiAgICAgICAgICAgIG93bmVyX2FkZHJlc3M6IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KG93bmVyQWRkcmVzcyksXG4gICAgICAgICAgICBmaXJzdF90b2tlbl9pZDogdGhpcy50cm9uV2ViLmZyb21VdGY4KHRva2VuTmFtZSksXG4gICAgICAgICAgICBmaXJzdF90b2tlbl9iYWxhbmNlOiB0b2tlbkJhbGFuY2UsXG4gICAgICAgICAgICBzZWNvbmRfdG9rZW5faWQ6ICc1ZicsIC8vIENvbnN0YW50IGZvciBUUlguXG4gICAgICAgICAgICBzZWNvbmRfdG9rZW5fYmFsYW5jZTogdHJ4QmFsYW5jZVxuICAgICAgICB9LCAncG9zdCcpLnRoZW4ocmVzb3VyY2VzID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc291cmNlcyk7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gZXhjaGFuZ2UgYmV0d2VlbiBhIHRva2VuIGFuZCBhbm90aGVyIHRva2VuLlxuICAgICAqIERPIE5PVCBVU0UgVEhJUyBGT1IgVFJYLlxuICAgICAqIFRva2VuIE5hbWVzIHNob3VsZCBiZSBhIENBU0UgU0VOU0lUSVZFIHN0cmluZy5cbiAgICAgKiBQTEVBU0UgVkVSSUZZIFRISVMgT04gVFJPTlNDQU4uXG4gICAgICovXG4gICAgY3JlYXRlVG9rZW5FeGNoYW5nZShmaXJzdFRva2VuTmFtZSwgZmlyc3RUb2tlbkJhbGFuY2UsIHNlY29uZFRva2VuTmFtZSwgc2Vjb25kVG9rZW5CYWxhbmNlLCBvd25lckFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24ob3duZXJBZGRyZXNzKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvd25lckFkZHJlc3M7XG4gICAgICAgICAgICBvd25lckFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5jcmVhdGVUUlhFeGNoYW5nZSwgZmlyc3RUb2tlbk5hbWUsIGZpcnN0VG9rZW5CYWxhbmNlLCBzZWNvbmRUb2tlbk5hbWUsIHNlY29uZFRva2VuQmFsYW5jZSwgb3duZXJBZGRyZXNzKTtcblxuICAgICAgICBpZiAoIXRoaXMudHJvbldlYi5pc0FkZHJlc3Mob3duZXJBZGRyZXNzKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBhZGRyZXNzIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYgKCF1dGlscy5pc1N0cmluZyhmaXJzdFRva2VuTmFtZSkgfHwgIWZpcnN0VG9rZW5OYW1lLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBmaXJzdFRva2VuTmFtZSBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmICghdXRpbHMuaXNTdHJpbmcoc2Vjb25kVG9rZW5OYW1lKSB8fCAhc2Vjb25kVG9rZW5OYW1lLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBzZWNvbmRUb2tlbk5hbWUgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZiAoIXV0aWxzLmlzSW50ZWdlcihmaXJzdFRva2VuQmFsYW5jZSkgfHwgZmlyc3RUb2tlbkJhbGFuY2UgPD0gMFxuICAgICAgICAgICAgfHwgIXV0aWxzLmlzSW50ZWdlcihzZWNvbmRUb2tlbkJhbGFuY2UpIHx8IHNlY29uZFRva2VuQmFsYW5jZSA8PSAwKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGFtb3VudCBwcm92aWRlZCcpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvZXhjaGFuZ2VjcmVhdGUnLCB7XG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzOiB0aGlzLnRyb25XZWIuYWRkcmVzcy50b0hleChvd25lckFkZHJlc3MpLFxuICAgICAgICAgICAgZmlyc3RfdG9rZW5faWQ6IHRoaXMudHJvbldlYi5mcm9tVXRmOChmaXJzdFRva2VuTmFtZSksXG4gICAgICAgICAgICBmaXJzdF90b2tlbl9iYWxhbmNlOiBmaXJzdFRva2VuQmFsYW5jZSxcbiAgICAgICAgICAgIHNlY29uZF90b2tlbl9pZDogdGhpcy50cm9uV2ViLmZyb21VdGY4KHNlY29uZFRva2VuTmFtZSksXG4gICAgICAgICAgICBzZWNvbmRfdG9rZW5fYmFsYW5jZTogc2Vjb25kVG9rZW5CYWxhbmNlXG4gICAgICAgIH0sICdwb3N0JykudGhlbihyZXNvdXJjZXMgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzb3VyY2VzKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgdG9rZW5zIGludG8gYSBiYW5jb3Igc3R5bGUgZXhjaGFuZ2UuXG4gICAgICogV2lsbCBhZGQgYm90aCB0b2tlbnMgYXQgbWFya2V0IHJhdGUuXG4gICAgICogVXNlIFwiX1wiIGZvciB0aGUgY29uc3RhbnQgdmFsdWUgZm9yIFRSWC5cbiAgICAgKi9cbiAgICBpbmplY3RFeGNoYW5nZVRva2VucyhleGNoYW5nZUlEID0gZmFsc2UsIHRva2VuTmFtZSA9IGZhbHNlLCB0b2tlbkFtb3VudCA9IDAsIG93bmVyQWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihvd25lckFkZHJlc3MpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG93bmVyQWRkcmVzcztcbiAgICAgICAgICAgIG93bmVyQWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuaW5qZWN0RXhjaGFuZ2VUb2tlbnMsIGV4Y2hhbmdlSUQsIHRva2VuTmFtZSwgdG9rZW5BbW91bnQsIG93bmVyQWRkcmVzcyk7XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5pc0FkZHJlc3Mob3duZXJBZGRyZXNzKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBvd25lckFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKGV4Y2hhbmdlSUQpIHx8IGV4Y2hhbmdlSUQgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGV4Y2hhbmdlSUQgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNTdHJpbmcodG9rZW5OYW1lKSB8fCAhdG9rZW5OYW1lLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCB0b2tlbk5hbWUgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKHRva2VuQW1vdW50KSB8fCB0b2tlbkFtb3VudCA8IDEpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgdG9rZW5BbW91bnQgcHJvdmlkZWQnKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L2V4Y2hhbmdlaW5qZWN0Jywge1xuICAgICAgICAgICAgb3duZXJfYWRkcmVzczogdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgob3duZXJBZGRyZXNzKSxcbiAgICAgICAgICAgIGV4Y2hhbmdlX2lkOiBwYXJzZUludChleGNoYW5nZUlEKSxcbiAgICAgICAgICAgIHRva2VuX2lkOiB0aGlzLnRyb25XZWIuZnJvbVV0ZjgodG9rZW5OYW1lKSxcbiAgICAgICAgICAgIHF1YW50OnBhcnNlSW50KHRva2VuQW1vdW50KVxuICAgICAgICB9LCAncG9zdCcpLnRoZW4odHJhbnNhY3Rpb24gPT4gdHJhbnNhY3Rpb25SZXN1bHRNYW5hZ2VyKHRyYW5zYWN0aW9uLCBjYWxsYmFjaykpLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaXRoZHJhd3MgdG9rZW5zIGZyb20gYSBiYW5jb3Igc3R5bGUgZXhjaGFuZ2UuXG4gICAgICogV2lsbCB3aXRoZHJhdyBhdCBtYXJrZXQgcmF0ZSBib3RoIHRva2Vucy5cbiAgICAgKiBVc2UgXCJfXCIgZm9yIHRoZSBjb25zdGFudCB2YWx1ZSBmb3IgVFJYLlxuICAgICAqL1xuICAgIHdpdGhkcmF3RXhjaGFuZ2VUb2tlbnMoZXhjaGFuZ2VJRCA9IGZhbHNlLCB0b2tlbk5hbWUgPSBmYWxzZSwgdG9rZW5BbW91bnQgPSAwLCBvd25lckFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24ob3duZXJBZGRyZXNzKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvd25lckFkZHJlc3M7XG4gICAgICAgICAgICBvd25lckFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLndpdGhkcmF3RXhjaGFuZ2VUb2tlbnMsIGV4Y2hhbmdlSUQsIHRva2VuTmFtZSwgdG9rZW5BbW91bnQsIG93bmVyQWRkcmVzcyk7XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5pc0FkZHJlc3Mob3duZXJBZGRyZXNzKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBvd25lckFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKGV4Y2hhbmdlSUQpIHx8IGV4Y2hhbmdlSUQgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGV4Y2hhbmdlSUQgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNTdHJpbmcodG9rZW5OYW1lKSB8fCAhdG9rZW5OYW1lLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCB0b2tlbk5hbWUgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKHRva2VuQW1vdW50KSB8fCB0b2tlbkFtb3VudCA8IDEpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgdG9rZW5BbW91bnQgcHJvdmlkZWQnKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L2V4Y2hhbmdld2l0aGRyYXcnLCB7XG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzOiB0aGlzLnRyb25XZWIuYWRkcmVzcy50b0hleChvd25lckFkZHJlc3MpLFxuICAgICAgICAgICAgZXhjaGFuZ2VfaWQ6IHBhcnNlSW50KGV4Y2hhbmdlSUQpLFxuICAgICAgICAgICAgdG9rZW5faWQ6IHRoaXMudHJvbldlYi5mcm9tVXRmOCh0b2tlbk5hbWUpLFxuICAgICAgICAgICAgcXVhbnQ6cGFyc2VJbnQodG9rZW5BbW91bnQpXG4gICAgICAgIH0sICdwb3N0JykudGhlbih0cmFuc2FjdGlvbiA9PiB0cmFuc2FjdGlvblJlc3VsdE1hbmFnZXIodHJhbnNhY3Rpb24sIGNhbGxiYWNrKSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYWRlIHRva2VucyBvbiBhIGJhbmNvciBzdHlsZSBleGNoYW5nZS5cbiAgICAgKiBFeHBlY3RlZCB2YWx1ZSBpcyBhIHZhbGlkYXRpb24gYW5kIHVzZWQgdG8gY2FwIHRoZSB0b3RhbCBhbXQgb2YgdG9rZW4gMiBzcGVudC5cbiAgICAgKiBVc2UgXCJfXCIgZm9yIHRoZSBjb25zdGFudCB2YWx1ZSBmb3IgVFJYLlxuICAgICAqL1xuICAgIHRyYWRlRXhjaGFuZ2VUb2tlbnMoZXhjaGFuZ2VJRCA9IGZhbHNlLFxuICAgICAgICB0b2tlbk5hbWUgPSBmYWxzZSxcbiAgICAgICAgdG9rZW5BbW91bnRTb2xkID0gMCxcbiAgICAgICAgdG9rZW5BbW91bnRFeHBlY3RlZCA9IDAsXG4gICAgICAgIG93bmVyQWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsXG4gICAgICAgIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihvd25lckFkZHJlc3MpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG93bmVyQWRkcmVzcztcbiAgICAgICAgICAgIG93bmVyQWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMudHJhZGVFeGNoYW5nZVRva2VucywgZXhjaGFuZ2VJRCwgdG9rZW5OYW1lLCB0b2tlbkFtb3VudFNvbGQsIHRva2VuQW1vdW50RXhwZWN0ZWQsIG93bmVyQWRkcmVzcyk7XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5pc0FkZHJlc3Mob3duZXJBZGRyZXNzKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBvd25lckFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKGV4Y2hhbmdlSUQpIHx8IGV4Y2hhbmdlSUQgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGV4Y2hhbmdlSUQgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNTdHJpbmcodG9rZW5OYW1lKSB8fCAhdG9rZW5OYW1lLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCB0b2tlbk5hbWUgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKHRva2VuQW1vdW50U29sZCkgfHwgdG9rZW5BbW91bnRTb2xkIDwgMSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCB0b2tlbkFtb3VudFNvbGQgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKHRva2VuQW1vdW50RXhwZWN0ZWQpIHx8IHRva2VuQW1vdW50RXhwZWN0ZWQgPCAxKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIHRva2VuQW1vdW50RXhwZWN0ZWQgcHJvdmlkZWQnKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L2V4Y2hhbmdldHJhbnNhY3Rpb24nLCB7XG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzOiB0aGlzLnRyb25XZWIuYWRkcmVzcy50b0hleChvd25lckFkZHJlc3MpLFxuICAgICAgICAgICAgZXhjaGFuZ2VfaWQ6IHBhcnNlSW50KGV4Y2hhbmdlSUQpLFxuICAgICAgICAgICAgdG9rZW5faWQ6IHRoaXMudHJvbldlYi5mcm9tQXNjaWkodG9rZW5OYW1lKSxcbiAgICAgICAgICAgIHF1YW50OnBhcnNlSW50KHRva2VuQW1vdW50U29sZCksXG4gICAgICAgICAgICBleHBlY3RlZDpwYXJzZUludCh0b2tlbkFtb3VudEV4cGVjdGVkKVxuICAgICAgICB9LCAncG9zdCcpLnRoZW4odHJhbnNhY3Rpb24gPT4gdHJhbnNhY3Rpb25SZXN1bHRNYW5hZ2VyKHRyYW5zYWN0aW9uLCBjYWxsYmFjaykpLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdXNlckZlZVBlcmNlbnRhZ2UuXG4gICAgICovXG4gICAgdXBkYXRlU2V0dGluZyhvd25lckFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LFxuICAgICAgICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgICB1c2VyRmVlUGVyY2VudGFnZSA9IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMudXBkYXRlU2V0dGluZywgb3duZXJBZGRyZXNzLCBjb250cmFjdEFkZHJlc3MsIHVzZXJGZWVQZXJjZW50YWdlKTtcblxuICAgICAgICBpZighdGhpcy50cm9uV2ViLmlzQWRkcmVzcyhvd25lckFkZHJlc3MpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIG93bmVyQWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKGNvbnRyYWN0QWRkcmVzcykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgY29udHJhY3RBZGRyZXNzIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcih1c2VyRmVlUGVyY2VudGFnZSkgfHwgdXNlckZlZVBlcmNlbnRhZ2UgPCAwIHx8IHVzZXJGZWVQZXJjZW50YWdlID4gMTAwKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIG9wdGlvbnMudXNlckZlZVBlcmNlbnRhZ2UgcHJvdmlkZWQnKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L3VwZGF0ZXNldHRpbmcnLCB7XG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzOiBvd25lckFkZHJlc3MsXG4gICAgICAgICAgICBjb250cmFjdF9hZGRyZXNzOiBjb250cmFjdEFkZHJlc3MsXG4gICAgICAgICAgICBjb25zdW1lX3VzZXJfcmVzb3VyY2VfcGVyY2VudDogdXNlckZlZVBlcmNlbnRhZ2VcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKHRyYW5zYWN0aW9uID0+IHRyYW5zYWN0aW9uUmVzdWx0TWFuYWdlcih0cmFuc2FjdGlvbiwgY2FsbGJhY2spKS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGVuZXJneSBsaW1pdC5cbiAgICAgKi9cbiAgICB1cGRhdGVFbmVyZ3lMaW1pdChvd25lckFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LFxuICAgICAgICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgICBvcmlnaW5FbmVyZ3lMaW1pdCA9IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMudXBkYXRlRW5lcmd5TGltaXQsIG93bmVyQWRkcmVzcywgY29udHJhY3RBZGRyZXNzLCBvcmlnaW5FbmVyZ3lMaW1pdCk7XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5pc0FkZHJlc3Mob3duZXJBZGRyZXNzKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBvd25lckFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdGhpcy50cm9uV2ViLmlzQWRkcmVzcyhjb250cmFjdEFkZHJlc3MpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGNvbnRyYWN0QWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIob3JpZ2luRW5lcmd5TGltaXQpIHx8IG9yaWdpbkVuZXJneUxpbWl0IDwgMCB8fCBvcmlnaW5FbmVyZ3lMaW1pdCA+IDEwXzAwMF8wMDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgb3B0aW9ucy5vcmlnaW5FbmVyZ3lMaW1pdCBwcm92aWRlZCcpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvdXBkYXRlZW5lcmd5bGltaXQnLCB7XG4gICAgICAgICAgICBvd25lcl9hZGRyZXNzOiBvd25lckFkZHJlc3MsXG4gICAgICAgICAgICBjb250cmFjdF9hZGRyZXNzOiBjb250cmFjdEFkZHJlc3MsXG4gICAgICAgICAgICBvcmlnaW5fZW5lcmd5X2xpbWl0OiBvcmlnaW5FbmVyZ3lMaW1pdFxuICAgICAgICB9LCAncG9zdCcpLnRoZW4odHJhbnNhY3Rpb24gPT4gdHJhbnNhY3Rpb25SZXN1bHRNYW5hZ2VyKHRyYW5zYWN0aW9uLCBjYWxsYmFjaykpLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFDQTs7O0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFDQTs7O0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQURBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBdUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFhQTtBQUVBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFHQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFPQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXlCQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQWJBO0FBaUJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7OztBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWdCQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBRUE7QUFHQTtBQWpCQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBb0JBO0FBQUE7QUFDQTtBQUVBO0FBdkJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXdCQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTs7Ozs7OztBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7Ozs7Ozs7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7OztBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7OztBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7Ozs7Ozs7O0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFVQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7Ozs7OyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lib/transactionBuilder.js\n");

/***/ }),

/***/ "./src/lib/trx.js":
/*!************************!*\
  !*** ./src/lib/trx.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Trx; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"@babel/runtime/helpers/toConsumableArray\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread */ \"@babel/runtime/helpers/objectSpread\");\n/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"@babel/runtime/helpers/classCallCheck\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"@babel/runtime/helpers/createClass\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var index__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! index */ \"./src/index.js\");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! utils */ \"./src/utils/index.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ethers */ \"ethers\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(ethers__WEBPACK_IMPORTED_MODULE_9__);\n\n\n\n\n\n\n\n\n\n\nvar TRX_MESSAGE_HEADER = '\\x19TRON Signed Message:\\n32';\nvar ETH_MESSAGE_HEADER = '\\x19Ethereum Signed Message:\\n32';\n\nvar Trx =\n/*#__PURE__*/\nfunction () {\n  function Trx() {\n    var tronWeb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_5___default()(this, Trx);\n\n    if (!tronWeb || !tronWeb instanceof index__WEBPACK_IMPORTED_MODULE_7__[\"default\"]) throw new Error('Expected instance of TronWeb');\n    this.tronWeb = tronWeb;\n    this.injectPromise = utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].promiseInjector(this);\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6___default()(Trx, [{\n    key: \"parseToken\",\n    value: function parseToken(token) {\n      return _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_4___default()({}, token, {\n        name: this.tronWeb.toUtf8(token.name),\n        abbr: token.abbr && this.tronWeb.toUtf8(token.abbr),\n        description: token.description && this.tronWeb.toUtf8(token.description),\n        url: token.url && this.tronWeb.toUtf8(token.url)\n      });\n    }\n  }, {\n    key: \"getCurrentBlock\",\n    value: function getCurrentBlock() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!callback) return this.injectPromise(this.getCurrentBlock);\n      this.tronWeb.fullNode.request('wallet/getnowblock').then(function (block) {\n        callback(null, block);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getBlock\",\n    value: function getBlock() {\n      var block = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultBlock;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(block)) {\n        callback = block;\n        block = this.tronWeb.defaultBlock;\n      }\n\n      if (!callback) return this.injectPromise(this.getBlock, block);\n      if (block === false) return callback('No block identifier provided');\n      if (block == 'earliest') block = 0;\n      if (block == 'latest') return this.getCurrentBlock(callback);\n      if (isNaN(block) && utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isHex(block)) return this.getBlockByHash(block, callback);\n      this.getBlockByNumber(block, callback);\n    }\n  }, {\n    key: \"getBlockByHash\",\n    value: function getBlockByHash(blockHash) {\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!callback) return this.injectPromise(this.getBlockByHash, blockHash);\n      this.tronWeb.fullNode.request('wallet/getblockbyid', {\n        value: blockHash\n      }, 'post').then(function (block) {\n        if (!Object.keys(block).length) return callback('Block not found');\n        callback(null, block);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getBlockByNumber\",\n    value: function getBlockByNumber(blockID) {\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!callback) return this.injectPromise(this.getBlockByNumber, blockID);\n      if (!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(blockID) || blockID < 0) return callback('Invalid block number provided');\n      this.tronWeb.fullNode.request('wallet/getblockbynum', {\n        num: parseInt(blockID)\n      }, 'post').then(function (block) {\n        if (!Object.keys(block).length) return callback('Block not found');\n        callback(null, block);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getBlockTransactionCount\",\n    value: function getBlockTransactionCount() {\n      var block = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultBlock;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(block)) {\n        callback = block;\n        block = this.tronWeb.defaultBlock;\n      }\n\n      if (!callback) return this.injectPromise(this.getBlockTransactionCount, block);\n      this.getBlock(block).then(function (_ref) {\n        var _ref$transactions = _ref.transactions,\n            transactions = _ref$transactions === void 0 ? [] : _ref$transactions;\n        callback(null, transactions.length);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getTransactionFromBlock\",\n    value: function getTransactionFromBlock() {\n      var block = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultBlock;\n      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(index)) {\n        callback = index;\n        index = 0;\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(block)) {\n        callback = block;\n        block = this.tronWeb.defaultBlock;\n      }\n\n      if (!callback) return this.injectPromise(this.getTransactionFromBlock, block, index);\n      if (!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(index) || index < 0) return callback('Invalid transaction index provided');\n      this.getBlock(block).then(function (_ref2) {\n        var _ref2$transactions = _ref2.transactions,\n            transactions = _ref2$transactions === void 0 ? false : _ref2$transactions;\n        if (!transactions || transactions.length < index) return callback('Transaction not found in block');\n        callback(null, transactions[index]);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getTransaction\",\n    value: function getTransaction(transactionID) {\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!callback) return this.injectPromise(this.getTransaction, transactionID);\n      this.tronWeb.fullNode.request('wallet/gettransactionbyid', {\n        value: transactionID\n      }, 'post').then(function (transaction) {\n        if (!Object.keys(transaction).length) return callback('Transaction not found');\n        callback(null, transaction);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getConfirmedTransaction\",\n    value: function getConfirmedTransaction(transactionID) {\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!callback) return this.injectPromise(this.getConfirmedTransaction, transactionID);\n      this.tronWeb.solidityNode.request('walletsolidity/gettransactionbyid', {\n        value: transactionID\n      }, 'post').then(function (transaction) {\n        if (!Object.keys(transaction).length) return callback('Transaction not found');\n        callback(null, transaction);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getTransactionInfo\",\n    value: function getTransactionInfo(transactionID) {\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!callback) return this.injectPromise(this.getTransactionInfo, transactionID);\n      this.tronWeb.solidityNode.request('walletsolidity/gettransactioninfobyid', {\n        value: transactionID\n      }, 'post').then(function (transaction) {\n        callback(null, transaction);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getTransactionsToAddress\",\n    value: function getTransactionsToAddress() {\n      var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var limit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 30;\n      var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(offset)) {\n        callback = offset;\n        offset = 0;\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(limit)) {\n        callback = limit;\n        limit = 30;\n      }\n\n      if (!callback) return this.injectPromise(this.getTransactionsToAddress, address, limit, offset);\n      address = this.tronWeb.address.toHex(address);\n      return this.getTransactionsRelated(address, 'to', limit, offset, callback);\n    }\n  }, {\n    key: \"getTransactionsFromAddress\",\n    value: function getTransactionsFromAddress() {\n      var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var limit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 30;\n      var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(offset)) {\n        callback = offset;\n        offset = 0;\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(limit)) {\n        callback = limit;\n        limit = 30;\n      }\n\n      if (!callback) return this.injectPromise(this.getTransactionsFromAddress, address, limit, offset);\n      address = this.tronWeb.address.toHex(address);\n      return this.getTransactionsRelated(address, 'from', limit, offset, callback);\n    }\n  }, {\n    key: \"getTransactionsRelated\",\n    value: function () {\n      var _getTransactionsRelated = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n        var address,\n            direction,\n            limit,\n            offset,\n            callback,\n            _ref3,\n            _ref4,\n            from,\n            to,\n            _args = arguments;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                address = _args.length > 0 && _args[0] !== undefined ? _args[0] : this.tronWeb.defaultAddress.hex;\n                direction = _args.length > 1 && _args[1] !== undefined ? _args[1] : 'all';\n                limit = _args.length > 2 && _args[2] !== undefined ? _args[2] : 30;\n                offset = _args.length > 3 && _args[3] !== undefined ? _args[3] : 0;\n                callback = _args.length > 4 && _args[4] !== undefined ? _args[4] : false;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(offset)) {\n                  callback = offset;\n                  offset = 0;\n                }\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(limit)) {\n                  callback = limit;\n                  limit = 30;\n                }\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(direction)) {\n                  callback = direction;\n                  direction = 'all';\n                }\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(address)) {\n                  callback = address;\n                  address = this.tronWeb.defaultAddress.hex;\n                }\n\n                if (callback) {\n                  _context.next = 11;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", this.injectPromise(this.getTransactionsRelated, address, direction, limit, offset));\n\n              case 11:\n                if (['to', 'from', 'all'].includes(direction)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", callback('Invalid direction provided: Expected \"to\", \"from\" or \"all\"'));\n\n              case 13:\n                if (!(direction == 'all')) {\n                  _context.next = 27;\n                  break;\n                }\n\n                _context.prev = 14;\n                _context.next = 17;\n                return Promise.all([this.getTransactionsRelated(address, 'from', limit, offset), this.getTransactionsRelated(address, 'to', limit, offset)]);\n\n              case 17:\n                _ref3 = _context.sent;\n                _ref4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_ref3, 2);\n                from = _ref4[0];\n                to = _ref4[1];\n                return _context.abrupt(\"return\", callback(null, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(from.map(function (tx) {\n                  return tx.direction = 'from', tx;\n                })).concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(to.map(function (tx) {\n                  return tx.direction = 'to', tx;\n                }))).sort(function (a, b) {\n                  return b.raw_data.timestamp - a.raw_data.timestamp;\n                })));\n\n              case 24:\n                _context.prev = 24;\n                _context.t0 = _context[\"catch\"](14);\n                return _context.abrupt(\"return\", callback(_context.t0));\n\n              case 27:\n                if (this.tronWeb.isAddress(address)) {\n                  _context.next = 29;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", callback('Invalid address provided'));\n\n              case 29:\n                if (!(!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(limit) || limit < 0 || offset && limit < 1)) {\n                  _context.next = 31;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", callback('Invalid limit provided'));\n\n              case 31:\n                if (!(!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(offset) || offset < 0)) {\n                  _context.next = 33;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", callback('Invalid offset provided'));\n\n              case 33:\n                address = this.tronWeb.address.toHex(address);\n                this.tronWeb.solidityNode.request(\"walletextension/gettransactions\".concat(direction, \"this\"), {\n                  account: {\n                    address: address\n                  },\n                  offset: offset,\n                  limit: limit\n                }, 'post').then(function (_ref5) {\n                  var transaction = _ref5.transaction;\n                  callback(null, transaction);\n                }).catch(function (err) {\n                  return callback(err);\n                });\n\n              case 35:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[14, 24]]);\n      }));\n\n      return function getTransactionsRelated() {\n        return _getTransactionsRelated.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getAccount\",\n    value: function getAccount() {\n      var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(address)) {\n        callback = address;\n        address = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.getAccount, address);\n      if (!this.tronWeb.isAddress(address)) return callback('Invalid address provided');\n      address = this.tronWeb.address.toHex(address);\n      this.tronWeb.solidityNode.request('walletsolidity/getaccount', {\n        address: address\n      }, 'post').then(function (account) {\n        callback(null, account);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getBalance\",\n    value: function getBalance() {\n      var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(address)) {\n        callback = address;\n        address = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.getBalance, address);\n      this.getAccount(address).then(function (_ref6) {\n        var _ref6$balance = _ref6.balance,\n            balance = _ref6$balance === void 0 ? 0 : _ref6$balance;\n        callback(null, balance);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getUnconfirmedAccount\",\n    value: function getUnconfirmedAccount() {\n      var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(address)) {\n        callback = address;\n        address = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.getUnconfirmedAccount, address);\n      if (!this.tronWeb.isAddress(address)) return callback('Invalid address provided');\n      address = this.tronWeb.address.toHex(address);\n      this.tronWeb.fullNode.request('wallet/getaccount', {\n        address: address\n      }, 'post').then(function (account) {\n        callback(null, account);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getUnconfirmedBalance\",\n    value: function getUnconfirmedBalance() {\n      var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(address)) {\n        callback = address;\n        address = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.getUnconfirmedBalance, address);\n      this.getUnconfirmedAccount(address).then(function (_ref7) {\n        var _ref7$balance = _ref7.balance,\n            balance = _ref7$balance === void 0 ? 0 : _ref7$balance;\n        callback(null, balance);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getBandwidth\",\n    value: function getBandwidth() {\n      var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(address)) {\n        callback = address;\n        address = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.getBandwidth, address);\n      if (!this.tronWeb.isAddress(address)) return callback('Invalid address provided');\n      address = this.tronWeb.address.toHex(address);\n      this.tronWeb.fullNode.request('wallet/getaccountnet', {\n        address: address\n      }, 'post').then(function (_ref8) {\n        var _ref8$freeNetUsed = _ref8.freeNetUsed,\n            freeNetUsed = _ref8$freeNetUsed === void 0 ? 0 : _ref8$freeNetUsed,\n            _ref8$freeNetLimit = _ref8.freeNetLimit,\n            freeNetLimit = _ref8$freeNetLimit === void 0 ? 0 : _ref8$freeNetLimit,\n            _ref8$NetUsed = _ref8.NetUsed,\n            NetUsed = _ref8$NetUsed === void 0 ? 0 : _ref8$NetUsed,\n            _ref8$NetLimit = _ref8.NetLimit,\n            NetLimit = _ref8$NetLimit === void 0 ? 0 : _ref8$NetLimit;\n        callback(null, freeNetLimit - freeNetUsed + (NetLimit - NetUsed));\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getTokensIssuedByAddress\",\n    value: function getTokensIssuedByAddress() {\n      var _this = this;\n\n      var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(address)) {\n        callback = address;\n        address = this.tronWeb.defaultAddress.hex;\n      }\n\n      if (!callback) return this.injectPromise(this.getTokensIssuedByAddress, address);\n      if (!this.tronWeb.isAddress(address)) return callback('Invalid address provided');\n      address = this.tronWeb.address.toHex(address);\n      this.tronWeb.fullNode.request('wallet/getassetissuebyaccount', {\n        address: address\n      }, 'post').then(function (_ref9) {\n        var _ref9$assetIssue = _ref9.assetIssue,\n            assetIssue = _ref9$assetIssue === void 0 ? false : _ref9$assetIssue;\n        if (!assetIssue) return callback(null, {});\n        var tokens = assetIssue.map(function (token) {\n          return _this.parseToken(token);\n        }).reduce(function (tokens, token) {\n          return tokens[token.name] = token, tokens;\n        }, {});\n        callback(null, tokens);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getTokenFromID\",\n    value: function getTokenFromID() {\n      var _this2 = this;\n\n      var tokenID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!callback) return this.injectPromise(this.getTokenFromID, tokenID);\n      if (!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isString(tokenID) || !tokenID.length) return callback('Invalid token ID provided');\n      this.tronWeb.fullNode.request('wallet/getassetissuebyname', {\n        value: this.tronWeb.fromUtf8(tokenID)\n      }, 'post').then(function (token) {\n        if (!token.name) return callback('Token does not exist');\n        callback(null, _this2.parseToken(token));\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"listNodes\",\n    value: function listNodes() {\n      var _this3 = this;\n\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!callback) return this.injectPromise(this.listNodes);\n      this.tronWeb.fullNode.request('wallet/listnodes').then(function (_ref10) {\n        var _ref10$nodes = _ref10.nodes,\n            nodes = _ref10$nodes === void 0 ? [] : _ref10$nodes;\n        callback(null, nodes.map(function (_ref11) {\n          var _ref11$address = _ref11.address,\n              host = _ref11$address.host,\n              port = _ref11$address.port;\n          return \"\".concat(_this3.tronWeb.toUtf8(host), \":\").concat(port);\n        }));\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getBlockRange\",\n    value: function getBlockRange() {\n      var start = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var end = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 30;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(end)) {\n        callback = end;\n        end = 30;\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(start)) {\n        callback = start;\n        start = 0;\n      }\n\n      if (!callback) return this.injectPromise(this.getBlockRange, start, end);\n      if (!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(start) || start < 0) return callback('Invalid start of range provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(end) || end <= start) return callback('Invalid end of range provided');\n      this.tronWeb.fullNode.request('wallet/getblockbylimitnext', {\n        startNum: parseInt(start),\n        endNum: parseInt(end) + 1\n      }, 'post').then(function (_ref12) {\n        var _ref12$block = _ref12.block,\n            block = _ref12$block === void 0 ? [] : _ref12$block;\n        callback(null, block);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"listSuperRepresentatives\",\n    value: function listSuperRepresentatives() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!callback) return this.injectPromise(this.listSuperRepresentatives);\n      this.tronWeb.fullNode.request('wallet/listwitnesses').then(function (_ref13) {\n        var _ref13$witnesses = _ref13.witnesses,\n            witnesses = _ref13$witnesses === void 0 ? [] : _ref13$witnesses;\n        callback(null, witnesses);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"listTokens\",\n    value: function listTokens() {\n      var _this4 = this;\n\n      var limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(offset)) {\n        callback = offset;\n        offset = 0;\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(limit)) {\n        callback = limit;\n        limit = 0;\n      }\n\n      if (!callback) return this.injectPromise(this.listTokens, limit, offset);\n      if (!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(limit) || limit < 0 || offset && limit < 1) return callback('Invalid limit provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(offset) || offset < 0) return callback('Invalid offset provided');\n\n      if (!limit) {\n        return this.tronWeb.fullNode.request('wallet/getassetissuelist').then(function (_ref14) {\n          var _ref14$assetIssue = _ref14.assetIssue,\n              assetIssue = _ref14$assetIssue === void 0 ? [] : _ref14$assetIssue;\n          callback(null, assetIssue.map(function (token) {\n            return _this4.parseToken(token);\n          }));\n        }).catch(function (err) {\n          return callback(err);\n        });\n      }\n\n      this.tronWeb.fullNode.request('wallet/getpaginatedassetissuelist', {\n        offset: parseInt(offset),\n        limit: parseInt(limit)\n      }, 'post').then(function (_ref15) {\n        var _ref15$assetIssue = _ref15.assetIssue,\n            assetIssue = _ref15$assetIssue === void 0 ? [] : _ref15$assetIssue;\n        callback(null, assetIssue.map(function (token) {\n          return _this4.parseToken(token);\n        }));\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"timeUntilNextVoteCycle\",\n    value: function timeUntilNextVoteCycle() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!callback) return this.injectPromise(this.timeUntilNextVoteCycle);\n      this.tronWeb.fullNode.request('wallet/getnextmaintenancetime').then(function (_ref16) {\n        var _ref16$num = _ref16.num,\n            num = _ref16$num === void 0 ? -1 : _ref16$num;\n        if (num == -1) return callback('Failed to get time until next vote cycle');\n        callback(null, Math.floor(num / 1000));\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"getContract\",\n    value: function getContract(contractAddress) {\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!callback) return this.injectPromise(this.getContract, contractAddress);\n      if (!this.tronWeb.isAddress(contractAddress)) return callback('Invalid contract address provided');\n      contractAddress = this.tronWeb.address.toHex(contractAddress);\n      this.tronWeb.fullNode.request('wallet/getcontract', {\n        value: contractAddress\n      }).then(function (contract) {\n        if (contract.Error) return callback('Contract does not exist');\n        callback(null, contract);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"verifyMessage\",\n    value: function () {\n      var _verifyMessage = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {\n        var message,\n            signature,\n            address,\n            useTronHeader,\n            callback,\n            messageBytes,\n            messageDigest,\n            recovered,\n            tronAddress,\n            base58Address,\n            _args2 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                message = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : false;\n                signature = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : false;\n                address = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : this.tronWeb.defaultAddress.base58;\n                useTronHeader = _args2.length > 3 && _args2[3] !== undefined ? _args2[3] : true;\n                callback = _args2.length > 4 && _args2[4] !== undefined ? _args2[4] : false;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(address)) {\n                  callback = address;\n                  address = this.tronWeb.defaultAddress.base58;\n                  useTronHeader = true;\n                }\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(useTronHeader)) {\n                  callback = useTronHeader;\n                  useTronHeader = true;\n                }\n\n                if (callback) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", this.injectPromise(this.verifyMessage, message, signature, address, useTronHeader));\n\n              case 9:\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isHex(message)) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", callback('Expected hex message input'));\n\n              case 11:\n                if (message.substr(0, 2) == '0x') message = message.substring(2);\n                if (signature.substr(0, 2) == '0x') signature = signature.substr(2);\n                messageBytes = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(ethers__WEBPACK_IMPORTED_MODULE_9__[\"utils\"].toUtf8Bytes(useTronHeader ? TRX_MESSAGE_HEADER : ETH_MESSAGE_HEADER)).concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].code.hexStr2byteArray(message)));\n                messageDigest = ethers__WEBPACK_IMPORTED_MODULE_9__[\"utils\"].keccak256(messageBytes);\n                recovered = ethers__WEBPACK_IMPORTED_MODULE_9__[\"utils\"].recoverAddress(messageDigest, {\n                  recoveryParam: signature.substring(128, 130) == '1c' ? 1 : 0,\n                  r: '0x' + signature.substring(0, 64),\n                  s: '0x' + signature.substring(64, 128)\n                });\n                tronAddress = '41' + recovered.substr(2);\n                base58Address = this.tronWeb.address.fromHex(tronAddress);\n\n                if (!(base58Address == this.tronWeb.address.fromHex(address))) {\n                  _context2.next = 20;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", callback(null, true));\n\n              case 20:\n                callback('Signature does not match');\n\n              case 21:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function verifyMessage() {\n        return _verifyMessage.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"sign\",\n    value: function () {\n      var _sign = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {\n        var transaction,\n            privateKey,\n            useTronHeader,\n            callback,\n            signingKey,\n            messageBytes,\n            messageDigest,\n            signature,\n            signatureHex,\n            address,\n            _args3 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                transaction = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : false;\n                privateKey = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : this.tronWeb.defaultPrivateKey;\n                useTronHeader = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : true;\n                callback = _args3.length > 3 && _args3[3] !== undefined ? _args3[3] : false;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(privateKey)) {\n                  callback = privateKey;\n                  privateKey = this.tronWeb.defaultPrivateKey;\n                  useTronHeader = true;\n                }\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(useTronHeader)) {\n                  callback = useTronHeader;\n                  useTronHeader = true;\n                }\n\n                if (callback) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", this.injectPromise(this.sign, transaction, privateKey, useTronHeader));\n\n              case 8:\n                if (!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isString(transaction)) {\n                  _context3.next = 24;\n                  break;\n                }\n\n                if (transaction.substring(0, 2) == '0x') transaction = transaction.substring(2);\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isHex(transaction)) {\n                  _context3.next = 12;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", callback('Expected hex message input'));\n\n              case 12:\n                _context3.prev = 12;\n                signingKey = new ethers__WEBPACK_IMPORTED_MODULE_9__[\"utils\"].SigningKey(privateKey);\n                messageBytes = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(ethers__WEBPACK_IMPORTED_MODULE_9__[\"utils\"].toUtf8Bytes(useTronHeader ? TRX_MESSAGE_HEADER : ETH_MESSAGE_HEADER)).concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].code.hexStr2byteArray(transaction)));\n                messageDigest = ethers__WEBPACK_IMPORTED_MODULE_9__[\"utils\"].keccak256(messageBytes);\n                signature = signingKey.signDigest(messageDigest);\n                signatureHex = ['0x', signature.r.substring(2), signature.s.substring(2), Number(signature.v).toString(16)].join('');\n                return _context3.abrupt(\"return\", callback(null, signatureHex));\n\n              case 21:\n                _context3.prev = 21;\n                _context3.t0 = _context3[\"catch\"](12);\n                callback(_context3.t0);\n\n              case 24:\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isObject(transaction)) {\n                  _context3.next = 26;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", callback('Invalid transaction provided'));\n\n              case 26:\n                if (!transaction.signature) {\n                  _context3.next = 28;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", callback('Transaction is already signed'));\n\n              case 28:\n                _context3.prev = 28;\n                address = this.tronWeb.address.toHex(this.tronWeb.address.fromPrivateKey(privateKey)).toLowerCase();\n\n                if (!(address !== transaction.raw_data.contract[0].parameter.value.owner_address.toLowerCase())) {\n                  _context3.next = 32;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", callback('Private key does not match address in transaction'));\n\n              case 32:\n                return _context3.abrupt(\"return\", callback(null, utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].crypto.signTransaction(privateKey, transaction)));\n\n              case 35:\n                _context3.prev = 35;\n                _context3.t1 = _context3[\"catch\"](28);\n                callback(_context3.t1);\n\n              case 38:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[12, 21], [28, 35]]);\n      }));\n\n      return function sign() {\n        return _sign.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"sendRawTransaction\",\n    value: function sendRawTransaction() {\n      var signedTransaction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(options)) {\n        callback = options;\n        options = {};\n      }\n\n      if (!callback) return this.injectPromise(this.sendRawTransaction, signedTransaction, options);\n      if (!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isObject(signedTransaction)) return callback('Invalid transaction provided');\n      if (!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isObject(options)) return callback('Invalid options provided');\n      if (!signedTransaction.signature || !utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isArray(signedTransaction.signature)) return callback('Transaction is not signed');\n      this.tronWeb.fullNode.request('wallet/broadcasttransaction', signedTransaction, 'post').then(function (result) {\n        if (result.result) result.transaction = signedTransaction;\n        callback(null, result);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n  }, {\n    key: \"sendTransaction\",\n    value: function () {\n      var _sendTransaction = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4() {\n        var to,\n            amount,\n            options,\n            callback,\n            address,\n            transaction,\n            signedTransaction,\n            result,\n            _args4 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                to = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : false;\n                amount = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : false;\n                options = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : {};\n                callback = _args4.length > 3 && _args4[3] !== undefined ? _args4[3] : false;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(options)) {\n                  callback = options;\n                  options = {};\n                }\n\n                if (typeof options === 'string') options = {\n                  privateKey: options\n                };\n\n                if (callback) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", this.injectPromise(this.sendTransaction, to, amount, options));\n\n              case 8:\n                if (this.tronWeb.isAddress(to)) {\n                  _context4.next = 10;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", callback('Invalid recipient provided'));\n\n              case 10:\n                if (!(!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(amount) || amount <= 0)) {\n                  _context4.next = 12;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", callback('Invalid amount provided'));\n\n              case 12:\n                options = _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_4___default()({\n                  privateKey: this.tronWeb.defaultPrivateKey,\n                  address: this.tronWeb.defaultAddress.hex\n                }, options);\n\n                if (!(!options.privateKey && !options.address)) {\n                  _context4.next = 15;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", callback('Function requires either a private key or address to be set'));\n\n              case 15:\n                _context4.prev = 15;\n                address = options.privateKey ? this.tronWeb.address.fromPrivateKey(options.privateKey) : options.address;\n                _context4.next = 19;\n                return this.tronWeb.transactionBuilder.sendTrx(to, amount, address);\n\n              case 19:\n                transaction = _context4.sent;\n                _context4.next = 22;\n                return this.sign(transaction, options.privateKey || undefined);\n\n              case 22:\n                signedTransaction = _context4.sent;\n                _context4.next = 25;\n                return this.sendRawTransaction(signedTransaction);\n\n              case 25:\n                result = _context4.sent;\n                return _context4.abrupt(\"return\", callback(null, result));\n\n              case 29:\n                _context4.prev = 29;\n                _context4.t0 = _context4[\"catch\"](15);\n                return _context4.abrupt(\"return\", callback(_context4.t0));\n\n              case 32:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[15, 29]]);\n      }));\n\n      return function sendTransaction() {\n        return _sendTransaction.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"sendToken\",\n    value: function () {\n      var _sendToken = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5() {\n        var to,\n            amount,\n            tokenID,\n            options,\n            callback,\n            address,\n            transaction,\n            signedTransaction,\n            result,\n            _args5 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                to = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : false;\n                amount = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : false;\n                tokenID = _args5.length > 2 && _args5[2] !== undefined ? _args5[2] : false;\n                options = _args5.length > 3 && _args5[3] !== undefined ? _args5[3] : {};\n                callback = _args5.length > 4 && _args5[4] !== undefined ? _args5[4] : false;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(options)) {\n                  callback = options;\n                  options = {};\n                }\n\n                if (typeof options === 'string') options = {\n                  privateKey: options\n                };\n\n                if (callback) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", this.injectPromise(this.sendToken, to, amount, tokenID, options));\n\n              case 9:\n                if (this.tronWeb.isAddress(to)) {\n                  _context5.next = 11;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", callback('Invalid recipient provided'));\n\n              case 11:\n                if (!(!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(amount) || amount <= 0)) {\n                  _context5.next = 13;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", callback('Invalid amount provided'));\n\n              case 13:\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isString(tokenID)) {\n                  _context5.next = 15;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", callback('Invalid token ID provided'));\n\n              case 15:\n                options = _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_4___default()({\n                  privateKey: this.tronWeb.defaultPrivateKey,\n                  address: this.tronWeb.defaultAddress.hex\n                }, options);\n\n                if (!(!options.privateKey && !options.address)) {\n                  _context5.next = 18;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", callback('Function requires either a private key or address to be set'));\n\n              case 18:\n                _context5.prev = 18;\n                address = options.privateKey ? this.tronWeb.address.fromPrivateKey(options.privateKey) : options.address;\n                _context5.next = 22;\n                return this.tronWeb.transactionBuilder.sendToken(to, amount, tokenID, address);\n\n              case 22:\n                transaction = _context5.sent;\n                _context5.next = 25;\n                return this.sign(transaction, options.privateKey || undefined);\n\n              case 25:\n                signedTransaction = _context5.sent;\n                _context5.next = 28;\n                return this.sendRawTransaction(signedTransaction);\n\n              case 28:\n                result = _context5.sent;\n                return _context5.abrupt(\"return\", callback(null, result));\n\n              case 32:\n                _context5.prev = 32;\n                _context5.t0 = _context5[\"catch\"](18);\n                return _context5.abrupt(\"return\", callback(_context5.t0));\n\n              case 35:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[18, 32]]);\n      }));\n\n      return function sendToken() {\n        return _sendToken.apply(this, arguments);\n      };\n    }()\n    /**\n         * Freezes an amount of TRX.\n         * Will give bandwidth OR Energy and TRON Power(voting rights)\n         * to the owner of the frozen tokens.\n         *\n         * @param amount - is the number of frozen trx\n         * @param duration - is the duration in days to be frozen\n         * @param resource - is the type, must be either \"ENERGY\" or \"BANDWIDTH\"\n         * @param options\n         * @param callback\n         */\n\n  }, {\n    key: \"freezeBalance\",\n    value: function () {\n      var _freezeBalance = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6() {\n        var amount,\n            duration,\n            resource,\n            options,\n            callback,\n            address,\n            freezeBalance,\n            signedTransaction,\n            result,\n            _args6 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                amount = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : 0;\n                duration = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : 3;\n                resource = _args6.length > 2 && _args6[2] !== undefined ? _args6[2] : \"BANDWIDTH\";\n                options = _args6.length > 3 && _args6[3] !== undefined ? _args6[3] : {};\n                callback = _args6.length > 4 && _args6[4] !== undefined ? _args6[4] : false;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(duration)) {\n                  callback = duration;\n                  duration = 3;\n                }\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(resource)) {\n                  callback = resource;\n                  resource = \"BANDWIDTH\";\n                }\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(options)) {\n                  callback = options;\n                  options = {};\n                }\n\n                if (typeof options === 'string') options = {\n                  privateKey: options\n                };\n\n                if (callback) {\n                  _context6.next = 11;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", this.injectPromise(this.freezeBalance, amount, duration, resource, options));\n\n              case 11:\n                if (['BANDWIDTH', 'ENERGY'].includes(resource)) {\n                  _context6.next = 13;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", callback('Invalid resource provided: Expected \"BANDWIDTH\" or \"ENERGY\"'));\n\n              case 13:\n                if (!(!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(amount) || amount <= 0)) {\n                  _context6.next = 15;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", callback('Invalid amount provided'));\n\n              case 15:\n                if (!(!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(duration) || duration < 3)) {\n                  _context6.next = 17;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", callback('Invalid duration provided, minimum of 3 days'));\n\n              case 17:\n                options = _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_4___default()({\n                  privateKey: this.tronWeb.defaultPrivateKey,\n                  address: this.tronWeb.defaultAddress.hex\n                }, options);\n\n                if (!(!options.privateKey && !options.address)) {\n                  _context6.next = 20;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", callback('Function requires either a private key or address to be set'));\n\n              case 20:\n                _context6.prev = 20;\n                address = options.privateKey ? this.tronWeb.address.fromPrivateKey(options.privateKey) : options.address;\n                _context6.next = 24;\n                return this.tronWeb.transactionBuilder.freezeBalance(amount, duration, resource, address);\n\n              case 24:\n                freezeBalance = _context6.sent;\n                _context6.next = 27;\n                return this.sign(freezeBalance, options.privateKey || undefined);\n\n              case 27:\n                signedTransaction = _context6.sent;\n                _context6.next = 30;\n                return this.sendRawTransaction(signedTransaction);\n\n              case 30:\n                result = _context6.sent;\n                return _context6.abrupt(\"return\", callback(null, result));\n\n              case 34:\n                _context6.prev = 34;\n                _context6.t0 = _context6[\"catch\"](20);\n                return _context6.abrupt(\"return\", callback(_context6.t0));\n\n              case 37:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[20, 34]]);\n      }));\n\n      return function freezeBalance() {\n        return _freezeBalance.apply(this, arguments);\n      };\n    }()\n    /**\n     * Unfreeze TRX that has passed the minimum freeze duration.\n     * Unfreezing will remove bandwidth and TRON Power.\n     *\n     * @param resource - is the type, must be either \"ENERGY\" or \"BANDWIDTH\"\n     * @param options\n     * @param callback\n     */\n\n  }, {\n    key: \"unfreezeBalance\",\n    value: function () {\n      var _unfreezeBalance = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7() {\n        var resource,\n            options,\n            callback,\n            address,\n            unfreezeBalance,\n            signedTransaction,\n            result,\n            _args7 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                resource = _args7.length > 0 && _args7[0] !== undefined ? _args7[0] : \"BANDWIDTH\";\n                options = _args7.length > 1 && _args7[1] !== undefined ? _args7[1] : {};\n                callback = _args7.length > 2 && _args7[2] !== undefined ? _args7[2] : false;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(resource)) {\n                  callback = resource;\n                  resource = 'BANDWIDTH';\n                }\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(options)) {\n                  callback = options;\n                  options = {};\n                }\n\n                if (typeof options === 'string') options = {\n                  privateKey: options\n                };\n\n                if (callback) {\n                  _context7.next = 8;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", this.injectPromise(this.unfreezeBalance, resource, options));\n\n              case 8:\n                if (['BANDWIDTH', 'ENERGY'].includes(resource)) {\n                  _context7.next = 10;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", callback('Invalid resource provided: Expected \"BANDWIDTH\" or \"ENERGY\"'));\n\n              case 10:\n                options = _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_4___default()({\n                  privateKey: this.tronWeb.defaultPrivateKey,\n                  address: this.tronWeb.defaultAddress.hex\n                }, options);\n\n                if (!(!options.privateKey && !options.address)) {\n                  _context7.next = 13;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", callback('Function requires either a private key or address to be set'));\n\n              case 13:\n                _context7.prev = 13;\n                address = options.privateKey ? this.tronWeb.address.fromPrivateKey(options.privateKey) : options.address;\n                _context7.next = 17;\n                return this.tronWeb.transactionBuilder.unfreezeBalance(resource, address);\n\n              case 17:\n                unfreezeBalance = _context7.sent;\n                _context7.next = 20;\n                return this.sign(unfreezeBalance, options.privateKey || undefined);\n\n              case 20:\n                signedTransaction = _context7.sent;\n                _context7.next = 23;\n                return this.sendRawTransaction(signedTransaction);\n\n              case 23:\n                result = _context7.sent;\n                return _context7.abrupt(\"return\", callback(null, result));\n\n              case 27:\n                _context7.prev = 27;\n                _context7.t0 = _context7[\"catch\"](13);\n                return _context7.abrupt(\"return\", callback(_context7.t0));\n\n              case 30:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[13, 27]]);\n      }));\n\n      return function unfreezeBalance() {\n        return _unfreezeBalance.apply(this, arguments);\n      };\n    }()\n    /**\n     * Modify account name\n     * Note: Username is allowed to edit only once.\n     *\n     * @param privateKey - Account private Key\n     * @param accountName - name of the account\n     * @param callback\n     *\n     * @return modified Transaction Object\n     */\n\n  }, {\n    key: \"updateAccount\",\n    value: function () {\n      var _updateAccount = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee8() {\n        var accountName,\n            options,\n            callback,\n            address,\n            updateAccount,\n            signedTransaction,\n            result,\n            _args8 = arguments;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                accountName = _args8.length > 0 && _args8[0] !== undefined ? _args8[0] : false;\n                options = _args8.length > 1 && _args8[1] !== undefined ? _args8[1] : {};\n                callback = _args8.length > 2 && _args8[2] !== undefined ? _args8[2] : false;\n\n                if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(options)) {\n                  callback = options;\n                  options = {};\n                }\n\n                if (typeof options === 'string') options = {\n                  privateKey: options\n                };\n\n                if (callback) {\n                  _context8.next = 7;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", this.injectPromise(this.updateAccount, accountName, options));\n\n              case 7:\n                if (!(!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isString(accountName) || !accountName.length)) {\n                  _context8.next = 9;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", callback('Name must be a string'));\n\n              case 9:\n                options = _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_4___default()({\n                  privateKey: this.tronWeb.defaultPrivateKey,\n                  address: this.tronWeb.defaultAddress.hex\n                }, options);\n\n                if (!(!options.privateKey && !options.address)) {\n                  _context8.next = 12;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", callback('Function requires either a private key or address to be set'));\n\n              case 12:\n                _context8.prev = 12;\n                address = options.privateKey ? this.tronWeb.address.fromPrivateKey(options.privateKey) : options.address;\n                _context8.next = 16;\n                return this.tronWeb.transactionBuilder.updateAccount(accountName, address);\n\n              case 16:\n                updateAccount = _context8.sent;\n                _context8.next = 19;\n                return this.sign(updateAccount, options.privateKey || undefined);\n\n              case 19:\n                signedTransaction = _context8.sent;\n                _context8.next = 22;\n                return this.sendRawTransaction(signedTransaction);\n\n              case 22:\n                result = _context8.sent;\n                return _context8.abrupt(\"return\", callback(null, result));\n\n              case 26:\n                _context8.prev = 26;\n                _context8.t0 = _context8[\"catch\"](12);\n                return _context8.abrupt(\"return\", callback(_context8.t0));\n\n              case 29:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[12, 26]]);\n      }));\n\n      return function updateAccount() {\n        return _updateAccount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"signMessage\",\n    value: function signMessage() {\n      return this.sign.apply(this, arguments);\n    }\n  }, {\n    key: \"sendAsset\",\n    value: function sendAsset() {\n      return this.sendToken.apply(this, arguments);\n    }\n  }, {\n    key: \"send\",\n    value: function send() {\n      return this.sendTransaction.apply(this, arguments);\n    }\n  }, {\n    key: \"sendTrx\",\n    value: function sendTrx() {\n      return this.sendTransaction.apply(this, arguments);\n    }\n  }, {\n    key: \"broadcast\",\n    value: function broadcast() {\n      return this.sendRawTransaction.apply(this, arguments);\n    }\n  }, {\n    key: \"signTransaction\",\n    value: function signTransaction() {\n      return this.sign.apply(this, arguments);\n    }\n    /**\n     * Gets a network modification proposal by ID.\n     */\n\n  }, {\n    key: \"getProposal\",\n    value: function getProposal() {\n      var proposalID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!callback) return this.injectPromise(this.getProposal, proposalID);\n      if (!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(proposalID) || proposalID < 0) return callback('Invalid proposalID provided');\n      this.tronWeb.fullNode.request('wallet/getproposalbyid', {\n        id: parseInt(proposalID)\n      }, 'post').then(function (proposal) {\n        callback(null, proposal);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Lists all network modification proposals.\n     */\n\n  }, {\n    key: \"listProposals\",\n    value: function listProposals() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!callback) return this.injectPromise(this.listProposals);\n      this.tronWeb.fullNode.request('wallet/listproposals', {}, 'post').then(function (_ref17) {\n        var _ref17$proposals = _ref17.proposals,\n            proposals = _ref17$proposals === void 0 ? [] : _ref17$proposals;\n        callback(null, proposals);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Lists all parameters available for network modification proposals.\n     */\n\n  }, {\n    key: \"getChainParameters\",\n    value: function getChainParameters() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!callback) return this.injectPromise(this.getChainParameters);\n      this.tronWeb.fullNode.request('wallet/getchainparameters', {}, 'post').then(function (_ref18) {\n        var _ref18$chainParameter = _ref18.chainParameter,\n            chainParameter = _ref18$chainParameter === void 0 ? [] : _ref18$chainParameter;\n        callback(null, chainParameter);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Get the account resources\n     */\n\n  }, {\n    key: \"getAccountResources\",\n    value: function getAccountResources() {\n      var address = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.tronWeb.defaultAddress.hex;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!callback) return this.injectPromise(this.getAccountResources, address);\n      if (!this.tronWeb.isAddress(address)) return callback('Invalid address provided');\n      this.tronWeb.fullNode.request('wallet/getaccountresource', {\n        address: this.tronWeb.address.toHex(address)\n      }, 'post').then(function (resources) {\n        callback(null, resources);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Get the exchange ID.\n     */\n\n  }, {\n    key: \"getExchangeByID\",\n    value: function getExchangeByID() {\n      var exchangeID = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!callback) return this.injectPromise(this.getExchangeByID, exchangeID);\n      if (!utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isInteger(exchangeID) || exchangeID < 0) return callback('Invalid exchangeID provided');\n      this.tronWeb.fullNode.request('wallet/getexchangebyid', {\n        id: exchangeID\n      }, 'post').then(function (exchange) {\n        callback(null, exchange);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Lists the exchanges\n     */\n\n  }, {\n    key: \"listExchanges\",\n    value: function listExchanges() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!callback) return this.injectPromise(this.listExchanges);\n      this.tronWeb.fullNode.request('wallet/listexchanges', {}, 'post').then(function (_ref19) {\n        var _ref19$exchanges = _ref19.exchanges,\n            exchanges = _ref19$exchanges === void 0 ? [] : _ref19$exchanges;\n        callback(null, exchanges);\n      }, 'post').catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Lists all network modification proposals.\n     */\n\n  }, {\n    key: \"listExchangesPaginated\",\n    value: function listExchangesPaginated() {\n      var limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(offset)) {\n        callback = offset;\n        offset = 0;\n      }\n\n      if (utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFunction(limit)) {\n        callback = limit;\n        limit = 30;\n      }\n\n      if (!callback) return this.injectPromise(this.listExchanges);\n      this.tronWeb.fullNode.request('wallet/listexchangespaginated', {\n        limit: limit,\n        offset: offset\n      }, 'post').then(function (_ref20) {\n        var _ref20$exchanges = _ref20.exchanges,\n            exchanges = _ref20$exchanges === void 0 ? [] : _ref20$exchanges;\n        callback(null, exchanges);\n      }).catch(function (err) {\n        return callback(err);\n      });\n    }\n    /**\n     * Get info about thre node\n     */\n\n  }, {\n    key: \"getNodeInfo\",\n    value: function getNodeInfo() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!callback) return this.injectPromise(this.getNodeInfo);\n      this.tronWeb.fullNode.request('wallet/getnodeinfo', {}, 'post').then(function (_ref21) {\n        var _ref21$exchanges = _ref21.exchanges,\n            exchanges = _ref21$exchanges === void 0 ? [] : _ref21$exchanges;\n        callback(null, exchanges);\n      }, 'post').catch(function (err) {\n        return callback(err);\n      });\n    }\n  }]);\n\n  return Trx;\n}();\n\n\n;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL3RyeC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9saWIvdHJ4LmpzPzkzMGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRyb25XZWIgZnJvbSAnaW5kZXgnO1xuaW1wb3J0IHV0aWxzIGZyb20gJ3V0aWxzJztcbmltcG9ydCAqIGFzIEV0aGVycyBmcm9tICdldGhlcnMnO1xuXG5jb25zdCBUUlhfTUVTU0FHRV9IRUFERVIgPSAnXFx4MTlUUk9OIFNpZ25lZCBNZXNzYWdlOlxcbjMyJztcbmNvbnN0IEVUSF9NRVNTQUdFX0hFQURFUiA9ICdcXHgxOUV0aGVyZXVtIFNpZ25lZCBNZXNzYWdlOlxcbjMyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHJ4IHtcbiAgICBjb25zdHJ1Y3Rvcih0cm9uV2ViID0gZmFsc2UpIHtcbiAgICAgICAgaWYoIXRyb25XZWIgfHwgIXRyb25XZWIgaW5zdGFuY2VvZiBUcm9uV2ViKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBpbnN0YW5jZSBvZiBUcm9uV2ViJyk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViID0gdHJvbldlYjtcbiAgICAgICAgdGhpcy5pbmplY3RQcm9taXNlID0gdXRpbHMucHJvbWlzZUluamVjdG9yKHRoaXMpO1xuICAgIH1cblxuICAgIHBhcnNlVG9rZW4odG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnRva2VuLFxuICAgICAgICAgICAgbmFtZTogdGhpcy50cm9uV2ViLnRvVXRmOCh0b2tlbi5uYW1lKSxcbiAgICAgICAgICAgIGFiYnI6IHRva2VuLmFiYnIgJiYgdGhpcy50cm9uV2ViLnRvVXRmOCh0b2tlbi5hYmJyKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b2tlbi5kZXNjcmlwdGlvbiAmJiB0aGlzLnRyb25XZWIudG9VdGY4KHRva2VuLmRlc2NyaXB0aW9uKSxcbiAgICAgICAgICAgIHVybDogdG9rZW4udXJsICYmIHRoaXMudHJvbldlYi50b1V0ZjgodG9rZW4udXJsKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldEN1cnJlbnRCbG9jayhjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5nZXRDdXJyZW50QmxvY2spO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvZ2V0bm93YmxvY2snKS50aGVuKGJsb2NrID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGJsb2NrKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGdldEJsb2NrKGJsb2NrID0gdGhpcy50cm9uV2ViLmRlZmF1bHRCbG9jaywgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKGJsb2NrKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBibG9jaztcbiAgICAgICAgICAgIGJsb2NrID0gdGhpcy50cm9uV2ViLmRlZmF1bHRCbG9jazsgICAgICAgICAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5nZXRCbG9jaywgYmxvY2spO1xuXG4gICAgICAgIGlmKGJsb2NrID09PSBmYWxzZSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnTm8gYmxvY2sgaWRlbnRpZmllciBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKGJsb2NrID09ICdlYXJsaWVzdCcpXG4gICAgICAgICAgICBibG9jayA9IDA7XG5cbiAgICAgICAgaWYoYmxvY2sgPT0gJ2xhdGVzdCcpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50QmxvY2soY2FsbGJhY2spO1xuXG4gICAgICAgIGlmKGlzTmFOKGJsb2NrKSAmJiB1dGlscy5pc0hleChibG9jaykpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRCbG9ja0J5SGFzaChibG9jaywgY2FsbGJhY2spO1xuXG4gICAgICAgIHRoaXMuZ2V0QmxvY2tCeU51bWJlcihibG9jaywgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIGdldEJsb2NrQnlIYXNoKGJsb2NrSGFzaCwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0QmxvY2tCeUhhc2gsIGJsb2NrSGFzaCk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoJ3dhbGxldC9nZXRibG9ja2J5aWQnLCB7IFxuICAgICAgICAgICAgdmFsdWU6IGJsb2NrSGFzaCBcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKGJsb2NrID0+IHtcbiAgICAgICAgICAgIGlmKCFPYmplY3Qua2V5cyhibG9jaykubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnQmxvY2sgbm90IGZvdW5kJyk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGJsb2NrKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGdldEJsb2NrQnlOdW1iZXIoYmxvY2tJRCwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0QmxvY2tCeU51bWJlciwgYmxvY2tJRCk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcihibG9ja0lEKSB8fCBibG9ja0lEIDwgMClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBibG9jayBudW1iZXIgcHJvdmlkZWQnKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L2dldGJsb2NrYnludW0nLCB7IFxuICAgICAgICAgICAgbnVtOiBwYXJzZUludChibG9ja0lEKSBcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKGJsb2NrID0+IHtcbiAgICAgICAgICAgIGlmKCFPYmplY3Qua2V5cyhibG9jaykubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnQmxvY2sgbm90IGZvdW5kJyk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGJsb2NrKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGdldEJsb2NrVHJhbnNhY3Rpb25Db3VudChibG9jayA9IHRoaXMudHJvbldlYi5kZWZhdWx0QmxvY2ssIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihibG9jaykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gYmxvY2s7XG4gICAgICAgICAgICBibG9jayA9IHRoaXMudHJvbldlYi5kZWZhdWx0QmxvY2s7ICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0QmxvY2tUcmFuc2FjdGlvbkNvdW50LCBibG9jayk7XG5cbiAgICAgICAgdGhpcy5nZXRCbG9jayhibG9jaykudGhlbigoeyB0cmFuc2FjdGlvbnMgPSBbXSB9KSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCB0cmFuc2FjdGlvbnMubGVuZ3RoKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGdldFRyYW5zYWN0aW9uRnJvbUJsb2NrKGJsb2NrID0gdGhpcy50cm9uV2ViLmRlZmF1bHRCbG9jaywgaW5kZXggPSAwLCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24oaW5kZXgpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGluZGV4O1xuICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKGJsb2NrKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBibG9jaztcbiAgICAgICAgICAgIGJsb2NrID0gdGhpcy50cm9uV2ViLmRlZmF1bHRCbG9jazsgICAgICAgICAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5nZXRUcmFuc2FjdGlvbkZyb21CbG9jaywgYmxvY2ssIGluZGV4KTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKGluZGV4KSB8fCBpbmRleCA8IDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgdHJhbnNhY3Rpb24gaW5kZXggcHJvdmlkZWQnKTtcblxuICAgICAgICB0aGlzLmdldEJsb2NrKGJsb2NrKS50aGVuKCh7IHRyYW5zYWN0aW9ucyA9IGZhbHNlIH0pID0+IHtcbiAgICAgICAgICAgIGlmKCF0cmFuc2FjdGlvbnMgfHwgdHJhbnNhY3Rpb25zLmxlbmd0aCA8IGluZGV4KVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnVHJhbnNhY3Rpb24gbm90IGZvdW5kIGluIGJsb2NrJyk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHRyYW5zYWN0aW9uc1tpbmRleF0pO1xuICAgICAgICB9KS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgZ2V0VHJhbnNhY3Rpb24odHJhbnNhY3Rpb25JRCwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0VHJhbnNhY3Rpb24sIHRyYW5zYWN0aW9uSUQpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvZ2V0dHJhbnNhY3Rpb25ieWlkJywgeyBcbiAgICAgICAgICAgIHZhbHVlOiB0cmFuc2FjdGlvbklEIFxuICAgICAgICB9LCAncG9zdCcpLnRoZW4odHJhbnNhY3Rpb24gPT4ge1xuICAgICAgICAgICAgaWYoIU9iamVjdC5rZXlzKHRyYW5zYWN0aW9uKS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdUcmFuc2FjdGlvbiBub3QgZm91bmQnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHRyYW5zYWN0aW9uKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGdldENvbmZpcm1lZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uSUQsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmdldENvbmZpcm1lZFRyYW5zYWN0aW9uLCB0cmFuc2FjdGlvbklEKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuc29saWRpdHlOb2RlLnJlcXVlc3QoJ3dhbGxldHNvbGlkaXR5L2dldHRyYW5zYWN0aW9uYnlpZCcsIHtcbiAgICAgICAgICAgIHZhbHVlOiB0cmFuc2FjdGlvbklEXG4gICAgICAgIH0sICdwb3N0JykudGhlbih0cmFuc2FjdGlvbiA9PiB7XG4gICAgICAgICAgICBpZighT2JqZWN0LmtleXModHJhbnNhY3Rpb24pLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ1RyYW5zYWN0aW9uIG5vdCBmb3VuZCcpO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCB0cmFuc2FjdGlvbik7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICBnZXRUcmFuc2FjdGlvbkluZm8odHJhbnNhY3Rpb25JRCwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0VHJhbnNhY3Rpb25JbmZvLCB0cmFuc2FjdGlvbklEKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuc29saWRpdHlOb2RlLnJlcXVlc3QoJ3dhbGxldHNvbGlkaXR5L2dldHRyYW5zYWN0aW9uaW5mb2J5aWQnLCB7IFxuICAgICAgICAgICAgdmFsdWU6IHRyYW5zYWN0aW9uSUQgXG4gICAgICAgIH0sICdwb3N0JykudGhlbih0cmFuc2FjdGlvbiA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCB0cmFuc2FjdGlvbik7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICBnZXRUcmFuc2FjdGlvbnNUb0FkZHJlc3MoYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIGxpbWl0ID0gMzAsIG9mZnNldCA9IDAsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihvZmZzZXQpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9mZnNldDtcbiAgICAgICAgICAgIG9mZnNldCA9IDA7ICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKGxpbWl0KSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBsaW1pdDtcbiAgICAgICAgICAgIGxpbWl0ID0gMzA7ICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmdldFRyYW5zYWN0aW9uc1RvQWRkcmVzcywgYWRkcmVzcywgbGltaXQsIG9mZnNldCk7XG5cbiAgICAgICAgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KGFkZHJlc3MpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRyYW5zYWN0aW9uc1JlbGF0ZWQoYWRkcmVzcywgJ3RvJywgbGltaXQsIG9mZnNldCwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIGdldFRyYW5zYWN0aW9uc0Zyb21BZGRyZXNzKGFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LCBsaW1pdCA9IDMwLCBvZmZzZXQgPSAwLCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24ob2Zmc2V0KSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvZmZzZXQ7XG4gICAgICAgICAgICBvZmZzZXQgPSAwOyAgICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihsaW1pdCkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbGltaXQ7XG4gICAgICAgICAgICBsaW1pdCA9IDMwOyAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0VHJhbnNhY3Rpb25zRnJvbUFkZHJlc3MsIGFkZHJlc3MsIGxpbWl0LCBvZmZzZXQpO1xuXG4gICAgICAgIGFkZHJlc3MgPSB0aGlzLnRyb25XZWIuYWRkcmVzcy50b0hleChhZGRyZXNzKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5nZXRUcmFuc2FjdGlvbnNSZWxhdGVkKGFkZHJlc3MsICdmcm9tJywgbGltaXQsIG9mZnNldCwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFRyYW5zYWN0aW9uc1JlbGF0ZWQoYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIGRpcmVjdGlvbiA9ICdhbGwnLCBsaW1pdCA9IDMwLCBvZmZzZXQgPSAwLCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24ob2Zmc2V0KSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvZmZzZXQ7XG4gICAgICAgICAgICBvZmZzZXQgPSAwOyAgICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihsaW1pdCkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbGltaXQ7XG4gICAgICAgICAgICBsaW1pdCA9IDMwOyAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihkaXJlY3Rpb24pKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGRpcmVjdGlvbjtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9ICdhbGwnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihhZGRyZXNzKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBhZGRyZXNzO1xuICAgICAgICAgICAgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0VHJhbnNhY3Rpb25zUmVsYXRlZCwgYWRkcmVzcywgZGlyZWN0aW9uLCBsaW1pdCwgb2Zmc2V0KTtcblxuICAgICAgICBpZighWyAndG8nLCAnZnJvbScsICdhbGwnIF0uaW5jbHVkZXMoZGlyZWN0aW9uKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBkaXJlY3Rpb24gcHJvdmlkZWQ6IEV4cGVjdGVkIFwidG9cIiwgXCJmcm9tXCIgb3IgXCJhbGxcIicpO1xuICAgICAgICBcbiAgICAgICAgaWYoZGlyZWN0aW9uID09ICdhbGwnKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtmcm9tLCB0b10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VHJhbnNhY3Rpb25zUmVsYXRlZChhZGRyZXNzLCAnZnJvbScsIGxpbWl0LCBvZmZzZXQpLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRyYW5zYWN0aW9uc1JlbGF0ZWQoYWRkcmVzcywgJ3RvJywgbGltaXQsIG9mZnNldClcbiAgICAgICAgICAgICAgICBdKVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFtcbiAgICAgICAgICAgICAgICAgICAgLi4uZnJvbS5tYXAodHggPT4gKHR4LmRpcmVjdGlvbiA9ICdmcm9tJywgdHgpKSxcbiAgICAgICAgICAgICAgICAgICAgLi4udG8ubWFwKHR4ID0+ICh0eC5kaXJlY3Rpb24gPSAndG8nLCB0eCkpXG4gICAgICAgICAgICAgICAgXS5zb3J0KChhLCBiKSA9PiBiLnJhd19kYXRhLnRpbWVzdGFtcCAtIGEucmF3X2RhdGEudGltZXN0YW1wKSk7XG4gICAgICAgICAgICB9IGNhdGNoKGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKGFkZHJlc3MpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKGxpbWl0KSB8fCBsaW1pdCA8IDAgfHwgKG9mZnNldCAmJiBsaW1pdCA8IDEpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGxpbWl0IHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcihvZmZzZXQpIHx8IG9mZnNldCA8IDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgb2Zmc2V0IHByb3ZpZGVkJyk7XG5cbiAgICAgICAgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KGFkZHJlc3MpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5zb2xpZGl0eU5vZGUucmVxdWVzdChgd2FsbGV0ZXh0ZW5zaW9uL2dldHRyYW5zYWN0aW9ucyR7ZGlyZWN0aW9ufXRoaXNgLCB7XG4gICAgICAgICAgICBhY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgYWRkcmVzc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9mZnNldCxcbiAgICAgICAgICAgIGxpbWl0XG4gICAgICAgIH0sICdwb3N0JykudGhlbigoeyB0cmFuc2FjdGlvbiB9KSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCB0cmFuc2FjdGlvbik7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICBnZXRBY2NvdW50KGFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24oYWRkcmVzcykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gYWRkcmVzcztcbiAgICAgICAgICAgIGFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4OyAgICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmdldEFjY291bnQsIGFkZHJlc3MpO1xuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKGFkZHJlc3MpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICBhZGRyZXNzID0gdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgoYWRkcmVzcyk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLnNvbGlkaXR5Tm9kZS5yZXF1ZXN0KCd3YWxsZXRzb2xpZGl0eS9nZXRhY2NvdW50Jywge1xuICAgICAgICAgICAgYWRkcmVzc1xuICAgICAgICB9LCAncG9zdCcpLnRoZW4oYWNjb3VudCA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBhY2NvdW50KTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGdldEJhbGFuY2UoYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihhZGRyZXNzKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBhZGRyZXNzO1xuICAgICAgICAgICAgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7ICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0QmFsYW5jZSwgYWRkcmVzcyk7XG5cbiAgICAgICAgdGhpcy5nZXRBY2NvdW50KGFkZHJlc3MpLnRoZW4oKHsgYmFsYW5jZSA9IDAgfSkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgYmFsYW5jZSk7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICBnZXRVbmNvbmZpcm1lZEFjY291bnQoYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihhZGRyZXNzKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBhZGRyZXNzO1xuICAgICAgICAgICAgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0VW5jb25maXJtZWRBY2NvdW50LCBhZGRyZXNzKTtcblxuICAgICAgICBpZighdGhpcy50cm9uV2ViLmlzQWRkcmVzcyhhZGRyZXNzKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBhZGRyZXNzIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KGFkZHJlc3MpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvZ2V0YWNjb3VudCcsIHtcbiAgICAgICAgICAgIGFkZHJlc3NcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKGFjY291bnQgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgYWNjb3VudCk7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICBnZXRVbmNvbmZpcm1lZEJhbGFuY2UoYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihhZGRyZXNzKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBhZGRyZXNzO1xuICAgICAgICAgICAgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0VW5jb25maXJtZWRCYWxhbmNlLCBhZGRyZXNzKTtcblxuICAgICAgICB0aGlzLmdldFVuY29uZmlybWVkQWNjb3VudChhZGRyZXNzKS50aGVuKCh7IGJhbGFuY2UgPSAwIH0pID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGJhbGFuY2UpO1xuICAgICAgICB9KS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgZ2V0QmFuZHdpZHRoKGFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24oYWRkcmVzcykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gYWRkcmVzcztcbiAgICAgICAgICAgIGFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4OyAgICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmdldEJhbmR3aWR0aCwgYWRkcmVzcyk7XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5pc0FkZHJlc3MoYWRkcmVzcykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIGFkZHJlc3MgPSB0aGlzLnRyb25XZWIuYWRkcmVzcy50b0hleChhZGRyZXNzKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L2dldGFjY291bnRuZXQnLCB7XG4gICAgICAgICAgICBhZGRyZXNzXG4gICAgICAgIH0sICdwb3N0JykudGhlbigoeyBmcmVlTmV0VXNlZCA9IDAsIGZyZWVOZXRMaW1pdCA9IDAsIE5ldFVzZWQgPSAwLCBOZXRMaW1pdCA9IDAgfSkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgKGZyZWVOZXRMaW1pdCAtIGZyZWVOZXRVc2VkKSArIChOZXRMaW1pdCAtIE5ldFVzZWQpKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGdldFRva2Vuc0lzc3VlZEJ5QWRkcmVzcyhhZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleCwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKGFkZHJlc3MpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGFkZHJlc3M7XG4gICAgICAgICAgICBhZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleDsgICAgICAgICAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5nZXRUb2tlbnNJc3N1ZWRCeUFkZHJlc3MsIGFkZHJlc3MpO1xuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKGFkZHJlc3MpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGFkZHJlc3MgcHJvdmlkZWQnKTtcblxuICAgICAgICBhZGRyZXNzID0gdGhpcy50cm9uV2ViLmFkZHJlc3MudG9IZXgoYWRkcmVzcyk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoJ3dhbGxldC9nZXRhc3NldGlzc3VlYnlhY2NvdW50Jywge1xuICAgICAgICAgICAgYWRkcmVzc1xuICAgICAgICB9LCAncG9zdCcpLnRoZW4oKHsgYXNzZXRJc3N1ZSA9IGZhbHNlIH0pID0+IHtcbiAgICAgICAgICAgIGlmKCFhc3NldElzc3VlKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCB7fSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRva2VucyA9IGFzc2V0SXNzdWUubWFwKHRva2VuID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVRva2VuKHRva2VuKTtcbiAgICAgICAgICAgIH0pLnJlZHVjZSgodG9rZW5zLCB0b2tlbikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbnNbdG9rZW4ubmFtZV0gPSB0b2tlbiwgdG9rZW5zO1xuICAgICAgICAgICAgfSwge30pO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCB0b2tlbnMpO1xuICAgICAgICB9KS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgZ2V0VG9rZW5Gcm9tSUQodG9rZW5JRCA9IGZhbHNlLCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5nZXRUb2tlbkZyb21JRCwgdG9rZW5JRCk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzU3RyaW5nKHRva2VuSUQpIHx8ICF0b2tlbklELmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCB0b2tlbiBJRCBwcm92aWRlZCcpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvZ2V0YXNzZXRpc3N1ZWJ5bmFtZScsIHtcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnRyb25XZWIuZnJvbVV0ZjgodG9rZW5JRClcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKHRva2VuID0+IHtcbiAgICAgICAgICAgIGlmKCF0b2tlbi5uYW1lKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnVG9rZW4gZG9lcyBub3QgZXhpc3QnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHRoaXMucGFyc2VUb2tlbih0b2tlbikpO1xuICAgICAgICB9KS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgbGlzdE5vZGVzKGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmxpc3ROb2Rlcyk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoJ3dhbGxldC9saXN0bm9kZXMnKS50aGVuKCh7IG5vZGVzID0gW10gfSkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgbm9kZXMubWFwKCh7IGFkZHJlc3M6IHsgaG9zdCwgcG9ydCB9IH0pID0+IChcbiAgICAgICAgICAgICAgICBgJHt0aGlzLnRyb25XZWIudG9VdGY4KGhvc3QpfToke3BvcnR9YFxuICAgICAgICAgICAgKSkpO1xuICAgICAgICB9KS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgZ2V0QmxvY2tSYW5nZShzdGFydCA9IDAsIGVuZCA9IDMwLCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24oZW5kKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBlbmQ7XG4gICAgICAgICAgICBlbmQgPSAzMDsgICAgICAgICAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24oc3RhcnQpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IHN0YXJ0O1xuICAgICAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmdldEJsb2NrUmFuZ2UsIHN0YXJ0LCBlbmQpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIoc3RhcnQpIHx8IHN0YXJ0IDwgMClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBzdGFydCBvZiByYW5nZSBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIoZW5kKSB8fCBlbmQgPD0gc3RhcnQpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgZW5kIG9mIHJhbmdlIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoJ3dhbGxldC9nZXRibG9ja2J5bGltaXRuZXh0JywgeyBcbiAgICAgICAgICAgIHN0YXJ0TnVtOiBwYXJzZUludChzdGFydCksXG4gICAgICAgICAgICBlbmROdW06IHBhcnNlSW50KGVuZCkgKyAxXG4gICAgICAgIH0sICdwb3N0JykudGhlbigoeyBibG9jayA9IFtdIH0pID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGJsb2NrKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGxpc3RTdXBlclJlcHJlc2VudGF0aXZlcyhjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5saXN0U3VwZXJSZXByZXNlbnRhdGl2ZXMpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvbGlzdHdpdG5lc3NlcycpLnRoZW4oKHsgd2l0bmVzc2VzID0gW10gfSkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgd2l0bmVzc2VzKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGxpc3RUb2tlbnMobGltaXQgPSAwLCBvZmZzZXQgPSAwLCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24ob2Zmc2V0KSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvZmZzZXQ7XG4gICAgICAgICAgICBvZmZzZXQgPSAwOyAgICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihsaW1pdCkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbGltaXQ7XG4gICAgICAgICAgICBsaW1pdCA9IDA7ICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmxpc3RUb2tlbnMsIGxpbWl0LCBvZmZzZXQpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIobGltaXQpIHx8IGxpbWl0IDwgMCB8fCAob2Zmc2V0ICYmIGxpbWl0IDwgMSkpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgbGltaXQgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighdXRpbHMuaXNJbnRlZ2VyKG9mZnNldCkgfHwgb2Zmc2V0IDwgMClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBvZmZzZXQgcHJvdmlkZWQnKTtcblxuICAgICAgICBpZighbGltaXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L2dldGFzc2V0aXNzdWVsaXN0JykudGhlbigoeyBhc3NldElzc3VlID0gW10gfSkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGFzc2V0SXNzdWUubWFwKHRva2VuID0+IHRoaXMucGFyc2VUb2tlbih0b2tlbikpKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvZ2V0cGFnaW5hdGVkYXNzZXRpc3N1ZWxpc3QnLCB7XG4gICAgICAgICAgICBvZmZzZXQ6IHBhcnNlSW50KG9mZnNldCksXG4gICAgICAgICAgICBsaW1pdDogcGFyc2VJbnQobGltaXQpXG4gICAgICAgIH0sICdwb3N0JykudGhlbigoeyBhc3NldElzc3VlID0gW10gfSkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgYXNzZXRJc3N1ZS5tYXAodG9rZW4gPT4gdGhpcy5wYXJzZVRva2VuKHRva2VuKSkpO1xuICAgICAgICB9KS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgdGltZVVudGlsTmV4dFZvdGVDeWNsZShjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy50aW1lVW50aWxOZXh0Vm90ZUN5Y2xlKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L2dldG5leHRtYWludGVuYW5jZXRpbWUnKS50aGVuKCh7IG51bSA9IC0xIH0pID0+IHtcbiAgICAgICAgICAgIGlmKG51bSA9PSAtMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ZhaWxlZCB0byBnZXQgdGltZSB1bnRpbCBuZXh0IHZvdGUgY3ljbGUnKTtcblxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgTWF0aC5mbG9vcihudW0gLyAxMDAwKSk7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICBnZXRDb250cmFjdChjb250cmFjdEFkZHJlc3MsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmdldENvbnRyYWN0LCBjb250cmFjdEFkZHJlc3MpO1xuXG4gICAgICAgIGlmKCF0aGlzLnRyb25XZWIuaXNBZGRyZXNzKGNvbnRyYWN0QWRkcmVzcykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgY29udHJhY3QgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIGNvbnRyYWN0QWRkcmVzcyA9IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KGNvbnRyYWN0QWRkcmVzcyk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoJ3dhbGxldC9nZXRjb250cmFjdCcsIHtcbiAgICAgICAgICAgIHZhbHVlOiBjb250cmFjdEFkZHJlc3NcbiAgICAgICAgfSkudGhlbihjb250cmFjdCA9PiB7XG4gICAgICAgICAgICBpZihjb250cmFjdC5FcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0NvbnRyYWN0IGRvZXMgbm90IGV4aXN0Jyk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGNvbnRyYWN0KTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGFzeW5jIHZlcmlmeU1lc3NhZ2UobWVzc2FnZSA9IGZhbHNlLCBzaWduYXR1cmUgPSBmYWxzZSwgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5iYXNlNTgsIHVzZVRyb25IZWFkZXIgPSB0cnVlLCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24oYWRkcmVzcykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gYWRkcmVzcztcbiAgICAgICAgICAgIGFkZHJlc3MgPSB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuYmFzZTU4O1xuICAgICAgICAgICAgdXNlVHJvbkhlYWRlciA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKHVzZVRyb25IZWFkZXIpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IHVzZVRyb25IZWFkZXI7XG4gICAgICAgICAgICB1c2VUcm9uSGVhZGVyID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy52ZXJpZnlNZXNzYWdlLCBtZXNzYWdlLCBzaWduYXR1cmUsIGFkZHJlc3MsIHVzZVRyb25IZWFkZXIpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0hleChtZXNzYWdlKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnRXhwZWN0ZWQgaGV4IG1lc3NhZ2UgaW5wdXQnKTtcblxuICAgICAgICBpZihtZXNzYWdlLnN1YnN0cigwLCAyKSA9PSAnMHgnKVxuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2Uuc3Vic3RyaW5nKDIpO1xuXG4gICAgICAgIGlmKHNpZ25hdHVyZS5zdWJzdHIoMCwgMikgPT0gJzB4JylcbiAgICAgICAgICAgIHNpZ25hdHVyZSA9IHNpZ25hdHVyZS5zdWJzdHIoMik7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUJ5dGVzID0gW1xuICAgICAgICAgICAgLi4uRXRoZXJzLnV0aWxzLnRvVXRmOEJ5dGVzKHVzZVRyb25IZWFkZXIgPyBUUlhfTUVTU0FHRV9IRUFERVIgOiBFVEhfTUVTU0FHRV9IRUFERVIpLFxuICAgICAgICAgICAgLi4udXRpbHMuY29kZS5oZXhTdHIyYnl0ZUFycmF5KG1lc3NhZ2UpXG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZURpZ2VzdCA9IEV0aGVycy51dGlscy5rZWNjYWsyNTYobWVzc2FnZUJ5dGVzKTtcbiAgICAgICAgY29uc3QgcmVjb3ZlcmVkID0gRXRoZXJzLnV0aWxzLnJlY292ZXJBZGRyZXNzKG1lc3NhZ2VEaWdlc3QsIHtcbiAgICAgICAgICAgIHJlY292ZXJ5UGFyYW06IHNpZ25hdHVyZS5zdWJzdHJpbmcoMTI4LCAxMzApID09ICcxYycgPyAxIDogMCxcbiAgICAgICAgICAgIHI6ICcweCcgKyBzaWduYXR1cmUuc3Vic3RyaW5nKDAsIDY0KSxcbiAgICAgICAgICAgIHM6ICcweCcgKyBzaWduYXR1cmUuc3Vic3RyaW5nKDY0LCAxMjgpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRyb25BZGRyZXNzID0gJzQxJyArIHJlY292ZXJlZC5zdWJzdHIoMik7XG4gICAgICAgIGNvbnN0IGJhc2U1OEFkZHJlc3MgPSB0aGlzLnRyb25XZWIuYWRkcmVzcy5mcm9tSGV4KHRyb25BZGRyZXNzKTtcblxuICAgICAgICBpZihiYXNlNThBZGRyZXNzID09IHRoaXMudHJvbldlYi5hZGRyZXNzLmZyb21IZXgoYWRkcmVzcykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgdHJ1ZSk7XG5cbiAgICAgICAgY2FsbGJhY2soJ1NpZ25hdHVyZSBkb2VzIG5vdCBtYXRjaCcpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ24odHJhbnNhY3Rpb24gPSBmYWxzZSwgcHJpdmF0ZUtleSA9IHRoaXMudHJvbldlYi5kZWZhdWx0UHJpdmF0ZUtleSwgdXNlVHJvbkhlYWRlciA9IHRydWUsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihwcml2YXRlS2V5KSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBwcml2YXRlS2V5O1xuICAgICAgICAgICAgcHJpdmF0ZUtleSA9IHRoaXMudHJvbldlYi5kZWZhdWx0UHJpdmF0ZUtleTtcbiAgICAgICAgICAgIHVzZVRyb25IZWFkZXIgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbih1c2VUcm9uSGVhZGVyKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSB1c2VUcm9uSGVhZGVyO1xuICAgICAgICAgICAgdXNlVHJvbkhlYWRlciA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuc2lnbiwgdHJhbnNhY3Rpb24sIHByaXZhdGVLZXksIHVzZVRyb25IZWFkZXIpO1xuXG4gICAgICAgIC8vIE1lc3NhZ2Ugc2lnbmluZ1xuICAgICAgICBpZih1dGlscy5pc1N0cmluZyh0cmFuc2FjdGlvbikpIHtcbiAgICAgICAgICAgIGlmKHRyYW5zYWN0aW9uLnN1YnN0cmluZygwLCAyKSA9PSAnMHgnKVxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gdHJhbnNhY3Rpb24uc3Vic3RyaW5nKDIpO1xuXG4gICAgICAgICAgICBpZighdXRpbHMuaXNIZXgodHJhbnNhY3Rpb24pKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnRXhwZWN0ZWQgaGV4IG1lc3NhZ2UgaW5wdXQnKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaWduaW5nS2V5ID0gbmV3IEV0aGVycy51dGlscy5TaWduaW5nS2V5KHByaXZhdGVLZXkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCeXRlcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgLi4uRXRoZXJzLnV0aWxzLnRvVXRmOEJ5dGVzKHVzZVRyb25IZWFkZXIgPyBUUlhfTUVTU0FHRV9IRUFERVIgOiBFVEhfTUVTU0FHRV9IRUFERVIpLFxuICAgICAgICAgICAgICAgICAgICAuLi51dGlscy5jb2RlLmhleFN0cjJieXRlQXJyYXkodHJhbnNhY3Rpb24pXG4gICAgICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VEaWdlc3QgPSBFdGhlcnMudXRpbHMua2VjY2FrMjU2KG1lc3NhZ2VCeXRlcyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gc2lnbmluZ0tleS5zaWduRGlnZXN0KG1lc3NhZ2VEaWdlc3QpO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc2lnbmF0dXJlSGV4ID0gW1xuICAgICAgICAgICAgICAgICAgICAnMHgnLFxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmUuci5zdWJzdHJpbmcoMiksXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZS5zLnN1YnN0cmluZygyKSxcbiAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHNpZ25hdHVyZS52KS50b1N0cmluZygxNilcbiAgICAgICAgICAgICAgICBdLmpvaW4oJycpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHNpZ25hdHVyZUhleCk7XG4gICAgICAgICAgICB9IGNhdGNoKGV4KSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzT2JqZWN0KHRyYW5zYWN0aW9uKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCB0cmFuc2FjdGlvbiBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKHRyYW5zYWN0aW9uLnNpZ25hdHVyZSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnVHJhbnNhY3Rpb24gaXMgYWxyZWFkeSBzaWduZWQnKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KFxuICAgICAgICAgICAgICAgIHRoaXMudHJvbldlYi5hZGRyZXNzLmZyb21Qcml2YXRlS2V5KHByaXZhdGVLZXkpXG4gICAgICAgICAgICApLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIGlmKGFkZHJlc3MgIT09IHRyYW5zYWN0aW9uLnJhd19kYXRhLmNvbnRyYWN0WzBdLnBhcmFtZXRlci52YWx1ZS5vd25lcl9hZGRyZXNzLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdQcml2YXRlIGtleSBkb2VzIG5vdCBtYXRjaCBhZGRyZXNzIGluIHRyYW5zYWN0aW9uJyk7XG5cbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLFxuICAgICAgICAgICAgICAgIHV0aWxzLmNyeXB0by5zaWduVHJhbnNhY3Rpb24ocHJpdmF0ZUtleSwgdHJhbnNhY3Rpb24pXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoKGV4KSB7XG4gICAgICAgICAgICBjYWxsYmFjayhleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZW5kUmF3VHJhbnNhY3Rpb24oc2lnbmVkVHJhbnNhY3Rpb24gPSBmYWxzZSwgb3B0aW9ucyA9IHt9LCBjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh1dGlscy5pc0Z1bmN0aW9uKG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuc2VuZFJhd1RyYW5zYWN0aW9uLCBzaWduZWRUcmFuc2FjdGlvbiwgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzT2JqZWN0KHNpZ25lZFRyYW5zYWN0aW9uKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCB0cmFuc2FjdGlvbiBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc09iamVjdChvcHRpb25zKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBvcHRpb25zIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXNpZ25lZFRyYW5zYWN0aW9uLnNpZ25hdHVyZSB8fCAhdXRpbHMuaXNBcnJheShzaWduZWRUcmFuc2FjdGlvbi5zaWduYXR1cmUpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdUcmFuc2FjdGlvbiBpcyBub3Qgc2lnbmVkJyk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoXG4gICAgICAgICAgICAnd2FsbGV0L2Jyb2FkY2FzdHRyYW5zYWN0aW9uJyxcbiAgICAgICAgICAgIHNpZ25lZFRyYW5zYWN0aW9uLFxuICAgICAgICAgICAgJ3Bvc3QnXG4gICAgICAgICkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5yZXN1bHQpXG4gICAgICAgICAgICAgICAgcmVzdWx0LnRyYW5zYWN0aW9uID0gc2lnbmVkVHJhbnNhY3Rpb247XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAgICAgICB9KS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2VuZFRyYW5zYWN0aW9uKHRvID0gZmFsc2UsIGFtb3VudCA9IGZhbHNlLCBvcHRpb25zID0ge30sIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZih0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICBvcHRpb25zID0geyBwcml2YXRlS2V5OiBvcHRpb25zIH07XG5cbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLnNlbmRUcmFuc2FjdGlvbiwgdG8sIGFtb3VudCwgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5pc0FkZHJlc3ModG8pKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIHJlY2lwaWVudCBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIoYW1vdW50KSB8fCBhbW91bnQgPD0gMClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBhbW91bnQgcHJvdmlkZWQnKTtcblxuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgcHJpdmF0ZUtleTogdGhpcy50cm9uV2ViLmRlZmF1bHRQcml2YXRlS2V5LFxuICAgICAgICAgICAgYWRkcmVzczogdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleCxcbiAgICAgICAgICAgIC4uLm9wdGlvbnNcbiAgICAgICAgfTtcblxuICAgICAgICBpZighb3B0aW9ucy5wcml2YXRlS2V5ICYmICFvcHRpb25zLmFkZHJlc3MpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0Z1bmN0aW9uIHJlcXVpcmVzIGVpdGhlciBhIHByaXZhdGUga2V5IG9yIGFkZHJlc3MgdG8gYmUgc2V0Jyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSBvcHRpb25zLnByaXZhdGVLZXkgPyB0aGlzLnRyb25XZWIuYWRkcmVzcy5mcm9tUHJpdmF0ZUtleShvcHRpb25zLnByaXZhdGVLZXkpIDogb3B0aW9ucy5hZGRyZXNzO1xuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCB0aGlzLnRyb25XZWIudHJhbnNhY3Rpb25CdWlsZGVyLnNlbmRUcngodG8sIGFtb3VudCwgYWRkcmVzcyk7XG4gICAgICAgICAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IHRoaXMuc2lnbih0cmFuc2FjdGlvbiwgb3B0aW9ucy5wcml2YXRlS2V5IHx8IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNlbmRSYXdUcmFuc2FjdGlvbihzaWduZWRUcmFuc2FjdGlvbik7XG5cbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAgICAgICB9IGNhdGNoKGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgc2VuZFRva2VuKHRvID0gZmFsc2UsIGFtb3VudCA9IGZhbHNlLCB0b2tlbklEID0gZmFsc2UsIG9wdGlvbnMgPSB7fSwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7IHByaXZhdGVLZXk6IG9wdGlvbnMgfTtcblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuc2VuZFRva2VuLCB0bywgYW1vdW50LCB0b2tlbklELCBvcHRpb25zKTtcblxuICAgICAgICBpZighdGhpcy50cm9uV2ViLmlzQWRkcmVzcyh0bykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgcmVjaXBpZW50IHByb3ZpZGVkJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcihhbW91bnQpIHx8IGFtb3VudCA8PSAwKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGFtb3VudCBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc1N0cmluZyh0b2tlbklEKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCB0b2tlbiBJRCBwcm92aWRlZCcpO1xuXG4gICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBwcml2YXRlS2V5OiB0aGlzLnRyb25XZWIuZGVmYXVsdFByaXZhdGVLZXksXG4gICAgICAgICAgICBhZGRyZXNzOiB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LFxuICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmKCFvcHRpb25zLnByaXZhdGVLZXkgJiYgIW9wdGlvbnMuYWRkcmVzcylcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnRnVuY3Rpb24gcmVxdWlyZXMgZWl0aGVyIGEgcHJpdmF0ZSBrZXkgb3IgYWRkcmVzcyB0byBiZSBzZXQnKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYWRkcmVzcyA9IG9wdGlvbnMucHJpdmF0ZUtleSA/IHRoaXMudHJvbldlYi5hZGRyZXNzLmZyb21Qcml2YXRlS2V5KG9wdGlvbnMucHJpdmF0ZUtleSkgOiBvcHRpb25zLmFkZHJlc3M7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHRoaXMudHJvbldlYi50cmFuc2FjdGlvbkJ1aWxkZXIuc2VuZFRva2VuKHRvLCBhbW91bnQsIHRva2VuSUQsIGFkZHJlc3MpO1xuICAgICAgICAgICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCB0aGlzLnNpZ24odHJhbnNhY3Rpb24sIG9wdGlvbnMucHJpdmF0ZUtleSB8fCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZW5kUmF3VHJhbnNhY3Rpb24oc2lnbmVkVHJhbnNhY3Rpb24pO1xuXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICAgICAgfSBjYXRjaChleCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGV4KTtcbiAgICAgICAgfVxuICAgIH1cblxuLyoqXG4gICAgICogRnJlZXplcyBhbiBhbW91bnQgb2YgVFJYLlxuICAgICAqIFdpbGwgZ2l2ZSBiYW5kd2lkdGggT1IgRW5lcmd5IGFuZCBUUk9OIFBvd2VyKHZvdGluZyByaWdodHMpXG4gICAgICogdG8gdGhlIG93bmVyIG9mIHRoZSBmcm96ZW4gdG9rZW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFtb3VudCAtIGlzIHRoZSBudW1iZXIgb2YgZnJvemVuIHRyeFxuICAgICAqIEBwYXJhbSBkdXJhdGlvbiAtIGlzIHRoZSBkdXJhdGlvbiBpbiBkYXlzIHRvIGJlIGZyb3plblxuICAgICAqIEBwYXJhbSByZXNvdXJjZSAtIGlzIHRoZSB0eXBlLCBtdXN0IGJlIGVpdGhlciBcIkVORVJHWVwiIG9yIFwiQkFORFdJRFRIXCJcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSBjYWxsYmFja1xuICAgICAqL1xuICAgIGFzeW5jIGZyZWV6ZUJhbGFuY2UoYW1vdW50ID0gMCwgZHVyYXRpb24gPSAzLCByZXNvdXJjZSA9IFwiQkFORFdJRFRIXCIsIG9wdGlvbnMgPSB7fSwgY2FsbGJhY2sgPSBmYWxzZSlcbiAgICB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24oZHVyYXRpb24pKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGR1cmF0aW9uO1xuICAgICAgICAgICAgZHVyYXRpb24gPSAzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihyZXNvdXJjZSkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gcmVzb3VyY2U7XG4gICAgICAgICAgICByZXNvdXJjZSA9IFwiQkFORFdJRFRIXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7IHByaXZhdGVLZXk6IG9wdGlvbnMgfTtcblxuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZnJlZXplQmFsYW5jZSwgYW1vdW50LCBkdXJhdGlvbiwgcmVzb3VyY2UsIG9wdGlvbnMpO1xuXG4gICAgICAgIGlmKCFbICdCQU5EV0lEVEgnLCAnRU5FUkdZJyBdLmluY2x1ZGVzKHJlc291cmNlKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCByZXNvdXJjZSBwcm92aWRlZDogRXhwZWN0ZWQgXCJCQU5EV0lEVEhcIiBvciBcIkVORVJHWVwiJyk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcihhbW91bnQpIHx8IGFtb3VudCA8PSAwKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdJbnZhbGlkIGFtb3VudCBwcm92aWRlZCcpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIoZHVyYXRpb24pIHx8IGR1cmF0aW9uIDwgMylcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBkdXJhdGlvbiBwcm92aWRlZCwgbWluaW11bSBvZiAzIGRheXMnKTtcblxuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgcHJpdmF0ZUtleTogdGhpcy50cm9uV2ViLmRlZmF1bHRQcml2YXRlS2V5LFxuICAgICAgICAgICAgYWRkcmVzczogdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleCxcbiAgICAgICAgICAgIC4uLm9wdGlvbnNcbiAgICAgICAgfTtcblxuICAgICAgICBpZighb3B0aW9ucy5wcml2YXRlS2V5ICYmICFvcHRpb25zLmFkZHJlc3MpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0Z1bmN0aW9uIHJlcXVpcmVzIGVpdGhlciBhIHByaXZhdGUga2V5IG9yIGFkZHJlc3MgdG8gYmUgc2V0Jyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSBvcHRpb25zLnByaXZhdGVLZXkgPyB0aGlzLnRyb25XZWIuYWRkcmVzcy5mcm9tUHJpdmF0ZUtleShvcHRpb25zLnByaXZhdGVLZXkpIDogb3B0aW9ucy5hZGRyZXNzO1xuICAgICAgICAgICAgY29uc3QgZnJlZXplQmFsYW5jZSA9IGF3YWl0IHRoaXMudHJvbldlYi50cmFuc2FjdGlvbkJ1aWxkZXIuZnJlZXplQmFsYW5jZShhbW91bnQsIGR1cmF0aW9uLCByZXNvdXJjZSwgYWRkcmVzcyk7XG4gICAgICAgICAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IHRoaXMuc2lnbihmcmVlemVCYWxhbmNlLCBvcHRpb25zLnByaXZhdGVLZXkgfHwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc2VuZFJhd1RyYW5zYWN0aW9uKHNpZ25lZFRyYW5zYWN0aW9uKTtcblxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XG4gICAgICAgIH0gY2F0Y2goZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbmZyZWV6ZSBUUlggdGhhdCBoYXMgcGFzc2VkIHRoZSBtaW5pbXVtIGZyZWV6ZSBkdXJhdGlvbi5cbiAgICAgKiBVbmZyZWV6aW5nIHdpbGwgcmVtb3ZlIGJhbmR3aWR0aCBhbmQgVFJPTiBQb3dlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZXNvdXJjZSAtIGlzIHRoZSB0eXBlLCBtdXN0IGJlIGVpdGhlciBcIkVORVJHWVwiIG9yIFwiQkFORFdJRFRIXCJcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSBjYWxsYmFja1xuICAgICAqL1xuICAgIGFzeW5jIHVuZnJlZXplQmFsYW5jZShyZXNvdXJjZSA9IFwiQkFORFdJRFRIXCIsIG9wdGlvbnMgPSB7fSwgY2FsbGJhY2sgPSBmYWxzZSlcbiAgICB7XG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24ocmVzb3VyY2UpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IHJlc291cmNlO1xuICAgICAgICAgICAgcmVzb3VyY2UgPSAnQkFORFdJRFRIJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHV0aWxzLmlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHsgcHJpdmF0ZUtleTogb3B0aW9ucyB9O1xuXG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy51bmZyZWV6ZUJhbGFuY2UsIHJlc291cmNlLCBvcHRpb25zKTtcblxuICAgICAgICBpZighWyAnQkFORFdJRFRIJywgJ0VORVJHWScgXS5pbmNsdWRlcyhyZXNvdXJjZSkpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgcmVzb3VyY2UgcHJvdmlkZWQ6IEV4cGVjdGVkIFwiQkFORFdJRFRIXCIgb3IgXCJFTkVSR1lcIicpO1xuXG4gICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBwcml2YXRlS2V5OiB0aGlzLnRyb25XZWIuZGVmYXVsdFByaXZhdGVLZXksXG4gICAgICAgICAgICBhZGRyZXNzOiB0aGlzLnRyb25XZWIuZGVmYXVsdEFkZHJlc3MuaGV4LFxuICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmKCFvcHRpb25zLnByaXZhdGVLZXkgJiYgIW9wdGlvbnMuYWRkcmVzcylcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnRnVuY3Rpb24gcmVxdWlyZXMgZWl0aGVyIGEgcHJpdmF0ZSBrZXkgb3IgYWRkcmVzcyB0byBiZSBzZXQnKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYWRkcmVzcyA9IG9wdGlvbnMucHJpdmF0ZUtleSA/IHRoaXMudHJvbldlYi5hZGRyZXNzLmZyb21Qcml2YXRlS2V5KG9wdGlvbnMucHJpdmF0ZUtleSkgOiBvcHRpb25zLmFkZHJlc3M7XG4gICAgICAgICAgICBjb25zdCB1bmZyZWV6ZUJhbGFuY2UgPSBhd2FpdCB0aGlzLnRyb25XZWIudHJhbnNhY3Rpb25CdWlsZGVyLnVuZnJlZXplQmFsYW5jZShyZXNvdXJjZSwgYWRkcmVzcyk7XG4gICAgICAgICAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IHRoaXMuc2lnbih1bmZyZWV6ZUJhbGFuY2UsIG9wdGlvbnMucHJpdmF0ZUtleSB8fCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZW5kUmF3VHJhbnNhY3Rpb24oc2lnbmVkVHJhbnNhY3Rpb24pO1xuXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICAgICAgfSBjYXRjaChleCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGV4KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vZGlmeSBhY2NvdW50IG5hbWVcbiAgICAgKiBOb3RlOiBVc2VybmFtZSBpcyBhbGxvd2VkIHRvIGVkaXQgb25seSBvbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByaXZhdGVLZXkgLSBBY2NvdW50IHByaXZhdGUgS2V5XG4gICAgICogQHBhcmFtIGFjY291bnROYW1lIC0gbmFtZSBvZiB0aGUgYWNjb3VudFxuICAgICAqIEBwYXJhbSBjYWxsYmFja1xuICAgICAqXG4gICAgICogQHJldHVybiBtb2RpZmllZCBUcmFuc2FjdGlvbiBPYmplY3RcbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGVBY2NvdW50KGFjY291bnROYW1lID0gZmFsc2UsIG9wdGlvbnMgPSB7fSwgIGNhbGxiYWNrID0gZmFsc2UpXG4gICAge1xuICAgICAgICBpZih1dGlscy5pc0Z1bmN0aW9uKG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7IHByaXZhdGVLZXk6IG9wdGlvbnMgfTtcblxuICAgICAgICBpZighY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy51cGRhdGVBY2NvdW50LCBhY2NvdW50TmFtZSwgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXV0aWxzLmlzU3RyaW5nKGFjY291bnROYW1lKSB8fCAhYWNjb3VudE5hbWUubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ05hbWUgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHByaXZhdGVLZXk6IHRoaXMudHJvbldlYi5kZWZhdWx0UHJpdmF0ZUtleSxcbiAgICAgICAgICAgIGFkZHJlc3M6IHRoaXMudHJvbldlYi5kZWZhdWx0QWRkcmVzcy5oZXgsXG4gICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYoIW9wdGlvbnMucHJpdmF0ZUtleSAmJiAhb3B0aW9ucy5hZGRyZXNzKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdGdW5jdGlvbiByZXF1aXJlcyBlaXRoZXIgYSBwcml2YXRlIGtleSBvciBhZGRyZXNzIHRvIGJlIHNldCcpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhZGRyZXNzID0gb3B0aW9ucy5wcml2YXRlS2V5ID8gdGhpcy50cm9uV2ViLmFkZHJlc3MuZnJvbVByaXZhdGVLZXkob3B0aW9ucy5wcml2YXRlS2V5KSA6IG9wdGlvbnMuYWRkcmVzcztcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUFjY291bnQgPSBhd2FpdCB0aGlzLnRyb25XZWIudHJhbnNhY3Rpb25CdWlsZGVyLnVwZGF0ZUFjY291bnQoYWNjb3VudE5hbWUsIGFkZHJlc3MpO1xuICAgICAgICAgICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCB0aGlzLnNpZ24odXBkYXRlQWNjb3VudCwgb3B0aW9ucy5wcml2YXRlS2V5IHx8IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNlbmRSYXdUcmFuc2FjdGlvbihzaWduZWRUcmFuc2FjdGlvbik7XG5cbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAgICAgICB9IGNhdGNoKGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2lnbk1lc3NhZ2UoLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5zaWduKC4uLmFyZ3MpO1xuICAgIH1cblxuICAgIHNlbmRBc3NldCguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRUb2tlbiguLi5hcmdzKTtcbiAgICB9XG5cbiAgICBzZW5kKC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFRyYW5zYWN0aW9uKC4uLmFyZ3MpO1xuICAgIH1cblxuICAgIHNlbmRUcngoLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5zZW5kVHJhbnNhY3Rpb24oLi4uYXJncyk7XG4gICAgfVxuXG4gICAgYnJvYWRjYXN0KC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFJhd1RyYW5zYWN0aW9uKC4uLmFyZ3MpO1xuICAgIH1cblxuICAgIHNpZ25UcmFuc2FjdGlvbiguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpZ24oLi4uYXJncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhIG5ldHdvcmsgbW9kaWZpY2F0aW9uIHByb3Bvc2FsIGJ5IElELlxuICAgICAqL1xuICAgIGdldFByb3Bvc2FsKHByb3Bvc2FsSUQgPSBmYWxzZSwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0UHJvcG9zYWwsIHByb3Bvc2FsSUQpO1xuXG4gICAgICAgIGlmKCF1dGlscy5pc0ludGVnZXIocHJvcG9zYWxJRCkgfHwgcHJvcG9zYWxJRCA8IDApXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgcHJvcG9zYWxJRCBwcm92aWRlZCcpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvZ2V0cHJvcG9zYWxieWlkJywgeyBcbiAgICAgICAgICAgIGlkOiBwYXJzZUludChwcm9wb3NhbElEKSxcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKHByb3Bvc2FsID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHByb3Bvc2FsKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3RzIGFsbCBuZXR3b3JrIG1vZGlmaWNhdGlvbiBwcm9wb3NhbHMuXG4gICAgICovXG4gICAgbGlzdFByb3Bvc2FscyhjYWxsYmFjayA9IGZhbHNlKSB7XG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5saXN0UHJvcG9zYWxzKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L2xpc3Rwcm9wb3NhbHMnLCB7fSwgJ3Bvc3QnKS50aGVuKCh7IHByb3Bvc2FscyA9IFtdIH0pID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHByb3Bvc2Fscyk7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0cyBhbGwgcGFyYW1ldGVycyBhdmFpbGFibGUgZm9yIG5ldHdvcmsgbW9kaWZpY2F0aW9uIHByb3Bvc2Fscy5cbiAgICAgKi9cbiAgICBnZXRDaGFpblBhcmFtZXRlcnMoY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0Q2hhaW5QYXJhbWV0ZXJzKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L2dldGNoYWlucGFyYW1ldGVycycsIHt9LCAncG9zdCcpLnRoZW4oKHsgY2hhaW5QYXJhbWV0ZXIgPSBbXSB9KSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBjaGFpblBhcmFtZXRlcik7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFjY291bnQgcmVzb3VyY2VzXG4gICAgICovXG4gICAgZ2V0QWNjb3VudFJlc291cmNlcyhhZGRyZXNzID0gdGhpcy50cm9uV2ViLmRlZmF1bHRBZGRyZXNzLmhleCwgY2FsbGJhY2sgPSBmYWxzZSkge1xuICAgICAgICBpZighY2FsbGJhY2spXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RQcm9taXNlKHRoaXMuZ2V0QWNjb3VudFJlc291cmNlcywgYWRkcmVzcyk7XG5cbiAgICAgICAgaWYoIXRoaXMudHJvbldlYi5pc0FkZHJlc3MoYWRkcmVzcykpXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ0ludmFsaWQgYWRkcmVzcyBwcm92aWRlZCcpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvZ2V0YWNjb3VudHJlc291cmNlJywgeyBcbiAgICAgICAgICAgIGFkZHJlc3M6IHRoaXMudHJvbldlYi5hZGRyZXNzLnRvSGV4KGFkZHJlc3MpLFxuICAgICAgICB9LCAncG9zdCcpLnRoZW4ocmVzb3VyY2VzID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc291cmNlcyk7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGV4Y2hhbmdlIElELlxuICAgICAqL1xuICAgIGdldEV4Y2hhbmdlQnlJRChleGNoYW5nZUlEID0gZmFsc2UsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmdldEV4Y2hhbmdlQnlJRCwgZXhjaGFuZ2VJRCk7XG5cbiAgICAgICAgaWYoIXV0aWxzLmlzSW50ZWdlcihleGNoYW5nZUlEKSB8fCBleGNoYW5nZUlEIDwgMClcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnSW52YWxpZCBleGNoYW5nZUlEIHByb3ZpZGVkJyk7XG5cbiAgICAgICAgdGhpcy50cm9uV2ViLmZ1bGxOb2RlLnJlcXVlc3QoJ3dhbGxldC9nZXRleGNoYW5nZWJ5aWQnLCB7XG4gICAgICAgICAgICBpZDogZXhjaGFuZ2VJRCxcbiAgICAgICAgfSwgJ3Bvc3QnKS50aGVuKGV4Y2hhbmdlID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGV4Y2hhbmdlKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3RzIHRoZSBleGNoYW5nZXNcbiAgICAgKi9cbiAgICBsaXN0RXhjaGFuZ2VzKGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmxpc3RFeGNoYW5nZXMpO1xuXG4gICAgICAgIHRoaXMudHJvbldlYi5mdWxsTm9kZS5yZXF1ZXN0KCd3YWxsZXQvbGlzdGV4Y2hhbmdlcycsIHt9LCAncG9zdCcpLnRoZW4oKHsgZXhjaGFuZ2VzID0gW10gfSkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZXhjaGFuZ2VzKTtcbiAgICAgICAgfSwgJ3Bvc3QnKS5jYXRjaChlcnIgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdHMgYWxsIG5ldHdvcmsgbW9kaWZpY2F0aW9uIHByb3Bvc2Fscy5cbiAgICAgKi9cbiAgICBsaXN0RXhjaGFuZ2VzUGFnaW5hdGVkKGxpbWl0ID0gMTAsIG9mZnNldCA9IDAsIGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihvZmZzZXQpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9mZnNldDtcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYodXRpbHMuaXNGdW5jdGlvbihsaW1pdCkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gbGltaXQ7XG4gICAgICAgICAgICBsaW1pdCA9IDMwO1xuICAgICAgICB9XG4gICAgICAgIGlmKCFjYWxsYmFjaylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UodGhpcy5saXN0RXhjaGFuZ2VzKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L2xpc3RleGNoYW5nZXNwYWdpbmF0ZWQnLCB7XG4gICAgICAgICAgICBsaW1pdCxcbiAgICAgICAgICAgIG9mZnNldFxuICAgICAgICB9LCAncG9zdCcpLnRoZW4oKHsgZXhjaGFuZ2VzID0gW10gfSkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZXhjaGFuZ2VzKTtcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBpbmZvIGFib3V0IHRocmUgbm9kZVxuICAgICAqL1xuICAgIGdldE5vZGVJbmZvKGNhbGxiYWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYoIWNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0UHJvbWlzZSh0aGlzLmdldE5vZGVJbmZvKTtcblxuICAgICAgICB0aGlzLnRyb25XZWIuZnVsbE5vZGUucmVxdWVzdCgnd2FsbGV0L2dldG5vZGVpbmZvJywge30sICdwb3N0JykudGhlbigoeyBleGNoYW5nZXMgPSBbXSB9KSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBleGNoYW5nZXMpO1xuICAgICAgICB9LCAncG9zdCcpLmNhdGNoKGVyciA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTs7O0FBRUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7Ozs7QUFFQTtBQUNBOzs7O0FBREE7QUFBQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7Ozs7QUFDQTtBQUNBOztBQUdBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBTEE7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBRUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFFQTtBQUNBO0FBREE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUVBO0FBQ0E7QUFEQTtBQUVBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBRUE7QUFDQTtBQURBO0FBR0E7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTtBQUdBO0FBR0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUNBO0FBQ0E7O0FBRUE7Ozs7O0FBQ0E7QUFDQTtBQUVBOzs7OztBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFPQTtBQUNBOzs7O0FBQ0E7QUFDQTs7QUFHQTs7Ozs7QUFDQTtBQUNBOztBQUNBOzs7OztBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFHQTs7Ozs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7Ozs7QUFHQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFLQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFLQTs7Ozs7QUFDQTtBQUNBOzs7QUFFQTs7QUFDQTtBQUNBOztBQURBOztBQUNBO0FBQ0E7O0FBREE7O0FBQ0E7QUFDQTs7QUFEQTtBQUVBO0FBQ0E7Ozs7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFLQTs7Ozs7QUFDQTtBQUNBOzs7QUFFQTs7QUFDQTtBQUNBOztBQURBOztBQUNBO0FBQ0E7O0FBREE7O0FBQ0E7QUFDQTs7QUFEQTtBQUVBO0FBQ0E7Ozs7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBV0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFLQTs7Ozs7QUFDQTtBQUNBOzs7QUFFQTs7QUFDQTtBQUNBOztBQURBOztBQUNBO0FBQ0E7O0FBREE7O0FBQ0E7QUFDQTs7QUFEQTtBQUVBO0FBQ0E7Ozs7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBS0E7Ozs7O0FBQ0E7QUFDQTs7O0FBRUE7O0FBQ0E7QUFDQTs7QUFEQTs7QUFDQTtBQUNBOztBQURBOztBQUNBO0FBQ0E7O0FBREE7QUFFQTtBQUNBOzs7O0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7QUFFQTs7Ozs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFLQTs7Ozs7QUFDQTtBQUNBOzs7QUFFQTs7QUFDQTtBQUNBOztBQURBOztBQUNBO0FBQ0E7O0FBREE7O0FBQ0E7QUFDQTs7QUFEQTtBQUVBO0FBQ0E7Ozs7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7Ozs7OztBQUdBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTs7Ozs7O0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7QUFHQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7Ozs7OztBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7QUFHQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7QUFyaENBO0FBdWhDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lib/trx.js\n");

/***/ }),

/***/ "./src/utils/abi.js":
/*!**************************!*\
  !*** ./src/utils/abi.js ***!
  \**************************/
/*! exports provided: decodeParams, encodeParams */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"decodeParams\", function() { return decodeParams; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"encodeParams\", function() { return encodeParams; });\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ethers */ \"ethers\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ethers__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! index */ \"./src/index.js\");\n\n\nvar abiCoder = new ethers__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].AbiCoder();\nfunction decodeParams(names, types, output, ignoreMethodHash) {\n  if (!output || typeof output === 'boolean') {\n    ignoreMethodHash = output;\n    output = types;\n    types = names;\n    names = [];\n  }\n\n  if (ignoreMethodHash && output.replace(/^0x/, '').length % 64 === 8) output = '0x' + output.replace(/^0x/, '').substring(8);\n  if (output.replace(/^0x/, '').length % 64) throw new Error('The encoded string is not valid. Its length must be a multiple of 64.');\n  return abiCoder.decode(types, output).reduce(function (obj, arg, index) {\n    if (types[index] == 'address') arg = '41' + arg.substr(2).toLowerCase();\n    if (names.length) obj[names[index]] = arg;else obj.push(arg);\n    return obj;\n  }, names.length ? {} : []);\n}\nfunction encodeParams(types, values) {\n  for (var i = 0; i < types.length; i++) {\n    if (types[i] === 'address') {\n      values[i] = index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].address.toHex(values[i]).replace(/^41/, '0x');\n    }\n  }\n\n  return abiCoder.encode(types, values);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvYWJpLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2FiaS5qcz84NDlhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEV0aGVycyBmcm9tICdldGhlcnMnO1xuaW1wb3J0IFRyb25XZWIgZnJvbSAnaW5kZXgnO1xuXG5jb25zdCBhYmlDb2RlciA9IG5ldyBFdGhlcnMudXRpbHMuQWJpQ29kZXIoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZVBhcmFtcyhuYW1lcywgdHlwZXMsIG91dHB1dCwgaWdub3JlTWV0aG9kSGFzaCkge1xuXG4gICAgaWYgKCFvdXRwdXQgfHwgdHlwZW9mIG91dHB1dCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGlnbm9yZU1ldGhvZEhhc2ggPSBvdXRwdXQ7XG4gICAgICAgIG91dHB1dCA9IHR5cGVzO1xuICAgICAgICB0eXBlcyA9IG5hbWVzO1xuICAgICAgICBuYW1lcyA9IFtdO1xuICAgIH1cblxuICAgIGlmIChpZ25vcmVNZXRob2RIYXNoICYmIG91dHB1dC5yZXBsYWNlKC9eMHgvLCcnKS5sZW5ndGggJSA2NCA9PT0gOClcbiAgICAgICAgb3V0cHV0ID0gJzB4JyArIG91dHB1dC5yZXBsYWNlKC9eMHgvLCcnKS5zdWJzdHJpbmcoOCk7XG5cbiAgICBpZiAob3V0cHV0LnJlcGxhY2UoL14weC8sJycpLmxlbmd0aCAlIDY0KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBlbmNvZGVkIHN0cmluZyBpcyBub3QgdmFsaWQuIEl0cyBsZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LicpO1xuXG4gICAgcmV0dXJuIGFiaUNvZGVyLmRlY29kZSh0eXBlcywgb3V0cHV0KS5yZWR1Y2UoKG9iaiwgYXJnLCBpbmRleCkgPT4ge1xuICAgICAgICBpZih0eXBlc1tpbmRleF0gPT0gJ2FkZHJlc3MnKVxuICAgICAgICAgICAgYXJnID0gJzQxJyArIGFyZy5zdWJzdHIoMikudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBpZihuYW1lcy5sZW5ndGgpXG4gICAgICAgICAgICBvYmpbbmFtZXNbaW5kZXhdXSA9IGFyZztcbiAgICAgICAgZWxzZSBvYmoucHVzaChhcmcpO1xuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSwgbmFtZXMubGVuZ3RoID8ge30gOiBbXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVQYXJhbXModHlwZXMsIHZhbHVlcykge1xuXG4gICAgZm9yIChsZXQgaSA9MDtpPHR5cGVzLmxlbmd0aDtpKyspIHtcbiAgICAgICAgaWYgKHR5cGVzW2ldID09PSAnYWRkcmVzcycpIHtcbiAgICAgICAgICAgIHZhbHVlc1tpXSA9ICBUcm9uV2ViLmFkZHJlc3MudG9IZXgodmFsdWVzW2ldKS5yZXBsYWNlKC9eNDEvLCAnMHgnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhYmlDb2Rlci5lbmNvZGUodHlwZXMsIHZhbHVlcyk7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils/abi.js\n");

/***/ }),

/***/ "./src/utils/accounts.js":
/*!*******************************!*\
  !*** ./src/utils/accounts.js ***!
  \*******************************/
/*! exports provided: generateAccount */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateAccount\", function() { return generateAccount; });\n/* harmony import */ var _bytes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bytes */ \"./src/utils/bytes.js\");\n/* harmony import */ var _crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./crypto */ \"./src/utils/crypto.js\");\n\n\nfunction generateAccount() {\n  var priKeyBytes = Object(_crypto__WEBPACK_IMPORTED_MODULE_1__[\"genPriKey\"])();\n  var pubKeyBytes = Object(_crypto__WEBPACK_IMPORTED_MODULE_1__[\"getPubKeyFromPriKey\"])(priKeyBytes);\n  var addressBytes = Object(_crypto__WEBPACK_IMPORTED_MODULE_1__[\"getAddressFromPriKey\"])(priKeyBytes);\n  var privateKey = Object(_bytes__WEBPACK_IMPORTED_MODULE_0__[\"byteArray2hexStr\"])(priKeyBytes);\n  var publicKey = Object(_bytes__WEBPACK_IMPORTED_MODULE_0__[\"byteArray2hexStr\"])(pubKeyBytes);\n  return {\n    privateKey: privateKey,\n    publicKey: publicKey,\n    address: {\n      base58: Object(_crypto__WEBPACK_IMPORTED_MODULE_1__[\"getBase58CheckAddress\"])(addressBytes),\n      hex: Object(_bytes__WEBPACK_IMPORTED_MODULE_0__[\"byteArray2hexStr\"])(addressBytes)\n    }\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvYWNjb3VudHMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvYWNjb3VudHMuanM/OGU1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBieXRlQXJyYXkyaGV4U3RyIH0gZnJvbSAnLi9ieXRlcyc7XG5pbXBvcnQgeyBcbiAgICBnZXRCYXNlNThDaGVja0FkZHJlc3MsXG4gICAgZ2VuUHJpS2V5LFxuICAgIGdldEFkZHJlc3NGcm9tUHJpS2V5LFxuICAgIGdldFB1YktleUZyb21QcmlLZXlcbn0gZnJvbSAnLi9jcnlwdG8nO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVBY2NvdW50KCkge1xuICAgIGNvbnN0IHByaUtleUJ5dGVzID0gZ2VuUHJpS2V5KCk7XG4gICAgY29uc3QgcHViS2V5Qnl0ZXMgPSBnZXRQdWJLZXlGcm9tUHJpS2V5KHByaUtleUJ5dGVzKTtcbiAgICBjb25zdCBhZGRyZXNzQnl0ZXMgPSBnZXRBZGRyZXNzRnJvbVByaUtleShwcmlLZXlCeXRlcyk7XG4gICAgXG4gICAgY29uc3QgcHJpdmF0ZUtleSA9IGJ5dGVBcnJheTJoZXhTdHIocHJpS2V5Qnl0ZXMpO1xuICAgIGNvbnN0IHB1YmxpY0tleSA9IGJ5dGVBcnJheTJoZXhTdHIocHViS2V5Qnl0ZXMpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJpdmF0ZUtleSxcbiAgICAgICAgcHVibGljS2V5LFxuICAgICAgICBhZGRyZXNzOiB7XG4gICAgICAgICAgICBiYXNlNTg6IGdldEJhc2U1OENoZWNrQWRkcmVzcyhhZGRyZXNzQnl0ZXMpLFxuICAgICAgICAgICAgaGV4OiBieXRlQXJyYXkyaGV4U3RyKGFkZHJlc3NCeXRlcylcbiAgICAgICAgfVxuICAgIH1cbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSEE7QUFRQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/accounts.js\n");

/***/ }),

/***/ "./src/utils/address.js":
/*!******************************!*\
  !*** ./src/utils/address.js ***!
  \******************************/
/*! exports provided: ADDRESS_SIZE, ADDRESS_PREFIX, ADDRESS_PREFIX_BYTE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ADDRESS_SIZE\", function() { return ADDRESS_SIZE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ADDRESS_PREFIX\", function() { return ADDRESS_PREFIX; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ADDRESS_PREFIX_BYTE\", function() { return ADDRESS_PREFIX_BYTE; });\nvar ADDRESS_SIZE = 34;\nvar ADDRESS_PREFIX = \"41\";\nvar ADDRESS_PREFIX_BYTE = 0x41;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvYWRkcmVzcy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy91dGlscy9hZGRyZXNzLmpzPzFjZGMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IEFERFJFU1NfU0laRSA9IDM0O1xuZXhwb3J0IGNvbnN0IEFERFJFU1NfUFJFRklYID0gXCI0MVwiO1xuZXhwb3J0IGNvbnN0IEFERFJFU1NfUFJFRklYX0JZVEUgPSAweDQxO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/address.js\n");

/***/ }),

/***/ "./src/utils/base58.js":
/*!*****************************!*\
  !*** ./src/utils/base58.js ***!
  \*****************************/
/*! exports provided: encode58, decode58 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"encode58\", function() { return encode58; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"decode58\", function() { return decode58; });\nvar ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\nvar ALPHABET_MAP = {};\n\nfor (var i = 0; i < ALPHABET.length; i++) {\n  ALPHABET_MAP[ALPHABET.charAt(i)] = i;\n}\n\nvar BASE = 58;\nfunction encode58(buffer) {\n  if (buffer.length === 0) return '';\n  var i;\n  var j;\n  var digits = [0];\n\n  for (i = 0; i < buffer.length; i++) {\n    for (j = 0; j < digits.length; j++) {\n      digits[j] <<= 8;\n    }\n\n    digits[0] += buffer[i];\n    var carry = 0;\n\n    for (j = 0; j < digits.length; ++j) {\n      digits[j] += carry;\n      carry = digits[j] / BASE | 0;\n      digits[j] %= BASE;\n    }\n\n    while (carry) {\n      digits.push(carry % BASE);\n      carry = carry / BASE | 0;\n    }\n  }\n\n  for (i = 0; buffer[i] === 0 && i < buffer.length - 1; i++) {\n    digits.push(0);\n  }\n\n  return digits.reverse().map(function (digit) {\n    return ALPHABET[digit];\n  }).join('');\n}\nfunction decode58(string) {\n  if (string.length === 0) return [];\n  var i;\n  var j;\n  var bytes = [0];\n\n  for (i = 0; i < string.length; i++) {\n    var c = string[i];\n    if (!(c in ALPHABET_MAP)) throw new Error('Non-base58 character');\n\n    for (j = 0; j < bytes.length; j++) {\n      bytes[j] *= BASE;\n    }\n\n    bytes[0] += ALPHABET_MAP[c];\n    var carry = 0;\n\n    for (j = 0; j < bytes.length; ++j) {\n      bytes[j] += carry;\n      carry = bytes[j] >> 8;\n      bytes[j] &= 0xff;\n    }\n\n    while (carry) {\n      bytes.push(carry & 0xff);\n      carry >>= 8;\n    }\n  }\n\n  for (i = 0; string[i] === '1' && i < string.length - 1; i++) {\n    bytes.push(0);\n  }\n\n  return bytes.reverse();\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvYmFzZTU4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2Jhc2U1OC5qcz8wYzYzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEFMUEhBQkVUID0gJzEyMzQ1Njc4OUFCQ0RFRkdISktMTU5QUVJTVFVWV1hZWmFiY2RlZmdoaWprbW5vcHFyc3R1dnd4eXonO1xuY29uc3QgQUxQSEFCRVRfTUFQID0ge307XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgQUxQSEFCRVQubGVuZ3RoOyBpKyspXG4gICAgQUxQSEFCRVRfTUFQW0FMUEhBQkVULmNoYXJBdChpKV0gPSBpO1xuXG5jb25zdCBCQVNFID0gNTg7XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGU1OChidWZmZXIpIHtcbiAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMClcbiAgICAgICAgcmV0dXJuICcnO1xuXG4gICAgbGV0IGk7XG4gICAgbGV0IGo7XG5cbiAgICBjb25zdCBkaWdpdHMgPSBbMF07XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBkaWdpdHMubGVuZ3RoOyBqKyspIFxuICAgICAgICAgICAgZGlnaXRzW2pdIDw8PSA4O1xuXG4gICAgICAgIGRpZ2l0c1swXSArPSBidWZmZXJbaV07XG4gICAgICAgIGxldCBjYXJyeSA9IDA7XG5cbiAgICAgICAgZm9yIChqID0gMDsgaiA8IGRpZ2l0cy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgZGlnaXRzW2pdICs9IGNhcnJ5O1xuICAgICAgICAgICAgY2FycnkgPSAoZGlnaXRzW2pdIC8gQkFTRSkgfCAwO1xuICAgICAgICAgICAgZGlnaXRzW2pdICU9IEJBU0VcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChjYXJyeSkge1xuICAgICAgICAgICAgZGlnaXRzLnB1c2goY2FycnkgJSBCQVNFKTtcbiAgICAgICAgICAgIGNhcnJ5ID0gKGNhcnJ5IC8gQkFTRSkgfCAwXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyBidWZmZXJbaV0gPT09IDAgJiYgaSA8IGJ1ZmZlci5sZW5ndGggLSAxOyBpKyspIFxuICAgICAgICBkaWdpdHMucHVzaCgwKTtcblxuICAgIHJldHVybiBkaWdpdHMucmV2ZXJzZSgpLm1hcChkaWdpdCA9PiBBTFBIQUJFVFtkaWdpdF0pLmpvaW4oJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlNTgoc3RyaW5nKSB7XG4gICAgaWYgKHN0cmluZy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiBbXTtcblxuICAgIGxldCBpO1xuICAgIGxldCBqO1xuXG4gICAgY29uc3QgYnl0ZXMgPSBbMF07XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGMgPSBzdHJpbmdbaV07XG5cbiAgICAgICAgaWYgKCEoYyBpbiBBTFBIQUJFVF9NQVApKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb24tYmFzZTU4IGNoYXJhY3RlcicpO1xuXG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBieXRlcy5sZW5ndGg7IGorKykgXG4gICAgICAgICAgICBieXRlc1tqXSAqPSBCQVNFO1xuXG4gICAgICAgIGJ5dGVzWzBdICs9IEFMUEhBQkVUX01BUFtjXTtcbiAgICAgICAgbGV0IGNhcnJ5ID0gMDtcblxuICAgICAgICBmb3IgKGogPSAwOyBqIDwgYnl0ZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgIGJ5dGVzW2pdICs9IGNhcnJ5O1xuICAgICAgICAgICAgY2FycnkgPSBieXRlc1tqXSA+PiA4O1xuICAgICAgICAgICAgYnl0ZXNbal0gJj0gMHhmZjtcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChjYXJyeSkge1xuICAgICAgICAgICAgYnl0ZXMucHVzaChjYXJyeSAmIDB4ZmYpO1xuICAgICAgICAgICAgY2FycnkgPj49IDg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyBzdHJpbmdbaV0gPT09ICcxJyAmJiBpIDwgc3RyaW5nLmxlbmd0aCAtIDE7IGkrKylcbiAgICAgICAgYnl0ZXMucHVzaCgwKTtcblxuICAgIHJldHVybiBieXRlcy5yZXZlcnNlKCk7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils/base58.js\n");

/***/ }),

/***/ "./src/utils/base64.js":
/*!*****************************!*\
  !*** ./src/utils/base64.js ***!
  \*****************************/
/*! exports provided: Base64 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Base64\", function() { return Base64; });\nfunction Base64() {\n  var _this = this;\n\n  this._keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n  this.encode = function (input) {\n    var output = \"\";\n    var chr1;\n    var chr2;\n    var chr3;\n    var enc1;\n    var enc2;\n    var enc3;\n    var enc4;\n    var i = 0;\n\n    while (i < input.length) {\n      chr1 = input.charCodeAt(i++);\n      chr2 = input.charCodeAt(i++);\n      chr3 = input.charCodeAt(i++);\n      enc1 = chr1 >> 2;\n      enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n      enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n      enc4 = chr3 & 63;\n      if (isNaN(chr2)) enc3 = enc4 = 64;else if (isNaN(chr3)) enc4 = 64;\n      output = output + _this._keyStr.charAt(enc1) + _this._keyStr.charAt(enc2) + _this._keyStr.charAt(enc3) + _this._keyStr.charAt(enc4);\n    }\n\n    return output;\n  };\n\n  this.encodeIgnoreUtf8 = function (inputBytes) {\n    var output = \"\";\n    var chr1;\n    var chr2;\n    var chr3;\n    var enc1;\n    var enc2;\n    var enc3;\n    var enc4;\n    var i = 0;\n\n    while (i < inputBytes.length) {\n      chr1 = inputBytes[i++];\n      chr2 = inputBytes[i++];\n      chr3 = inputBytes[i++];\n      enc1 = chr1 >> 2;\n      enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n      enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n      enc4 = chr3 & 63;\n      if (isNaN(chr2)) enc3 = enc4 = 64;else if (isNaN(chr3)) enc4 = 64;\n      output = output + _this._keyStr.charAt(enc1) + _this._keyStr.charAt(enc2) + _this._keyStr.charAt(enc3) + _this._keyStr.charAt(enc4);\n    }\n\n    return output;\n  };\n\n  this.decode = function (input) {\n    var output = \"\";\n    var chr1;\n    var chr2;\n    var chr3;\n    var enc1;\n    var enc2;\n    var enc3;\n    var enc4;\n    var i = 0;\n    input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n    while (i < input.length) {\n      enc1 = _this._keyStr.indexOf(input.charAt(i++));\n      enc2 = _this._keyStr.indexOf(input.charAt(i++));\n      enc3 = _this._keyStr.indexOf(input.charAt(i++));\n      enc4 = _this._keyStr.indexOf(input.charAt(i++));\n      chr1 = enc1 << 2 | enc2 >> 4;\n      chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n      chr3 = (enc3 & 3) << 6 | enc4;\n      output = output + String.fromCharCode(chr1);\n      if (enc3 != 64) output = output + String.fromCharCode(chr2);\n      if (enc4 != 64) output = output + String.fromCharCode(chr3);\n    }\n\n    return _this._utf8_decode(output);\n  };\n\n  this.decodeToByteArray = function (input) {\n    var output = \"\";\n    var chr1;\n    var chr2;\n    var chr3;\n    var enc1;\n    var enc2;\n    var enc3;\n    var enc4;\n    var i = 0;\n    input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n    while (i < input.length) {\n      enc1 = _this._keyStr.indexOf(input.charAt(i++));\n      enc2 = _this._keyStr.indexOf(input.charAt(i++));\n      enc3 = _this._keyStr.indexOf(input.charAt(i++));\n      enc4 = _this._keyStr.indexOf(input.charAt(i++));\n      chr1 = enc1 << 2 | enc2 >> 4;\n      chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n      chr3 = (enc3 & 3) << 6 | enc4;\n      output = output + String.fromCharCode(chr1);\n      if (enc3 != 64) output = output + String.fromCharCode(chr2);\n      if (enc4 != 64) output = output + String.fromCharCode(chr3);\n    }\n\n    return _this._out2ByteArray(output);\n  };\n\n  this._out2ByteArray = function (utftext) {\n    var byteArray = new Array(utftext.length);\n    var i = 0;\n    var c = 0;\n\n    while (i < utftext.length) {\n      c = utftext.charCodeAt(i);\n      byteArray[i] = c;\n      i++;\n    }\n\n    return byteArray;\n  };\n\n  this._utf8_encode = function (string) {\n    string = string.replace(/\\r\\n/g, \"\\n\");\n    var utftext = \"\";\n\n    for (var n = 0; n < string.length; n++) {\n      var c = string.charCodeAt(n);\n\n      if (c < 128) {\n        utftext += String.fromCharCode(c);\n      } else if (c > 127 && c < 2048) {\n        utftext += String.fromCharCode(c >> 6 | 192);\n        utftext += String.fromCharCode(c & 63 | 128);\n      } else {\n        utftext += String.fromCharCode(c >> 12 | 224);\n        utftext += String.fromCharCode(c >> 6 & 63 | 128);\n        utftext += String.fromCharCode(c & 63 | 128);\n      }\n    }\n\n    return utftext;\n  };\n\n  this._utf8_decode = function (utftext) {\n    var string = \"\";\n    var i = 0;\n    var c = 0;\n    var c2 = 0;\n    var c3 = 0;\n\n    while (i < utftext.length) {\n      c = utftext.charCodeAt(i);\n\n      if (c < 128) {\n        string += String.fromCharCode(c);\n        i++;\n      } else if (c > 191 && c < 224) {\n        c2 = utftext.charCodeAt(i + 1);\n        string += String.fromCharCode((c & 31) << 6 | c2 & 63);\n        i += 2;\n      } else {\n        c2 = utftext.charCodeAt(i + 1);\n        c3 = utftext.charCodeAt(i + 2);\n        string += String.fromCharCode((c & 15) << 12 | (c2 & 63) << 6 | c3 & 63);\n        i += 3;\n      }\n    }\n\n    return string;\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvYmFzZTY0LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2Jhc2U2NC5qcz8xMTE1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBCYXNlNjQoKSB7XG4gICAgdGhpcy5fa2V5U3RyID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO1xuXG4gICAgdGhpcy5lbmNvZGUgPSBpbnB1dCA9PiB7XG4gICAgICAgIGxldCBvdXRwdXQgPSBcIlwiO1xuICAgICAgICBsZXQgY2hyMTtcbiAgICAgICAgbGV0IGNocjI7XG4gICAgICAgIGxldCBjaHIzO1xuICAgICAgICBsZXQgZW5jMTtcbiAgICAgICAgbGV0IGVuYzI7XG4gICAgICAgIGxldCBlbmMzO1xuICAgICAgICBsZXQgZW5jNDtcbiAgICAgICAgbGV0IGkgPSAwO1xuXG4gICAgICAgIHdoaWxlIChpIDwgaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICBjaHIxID0gaW5wdXQuY2hhckNvZGVBdChpKyspO1xuICAgICAgICAgICAgY2hyMiA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgICAgIGNocjMgPSBpbnB1dC5jaGFyQ29kZUF0KGkrKyk7XG5cbiAgICAgICAgICAgIGVuYzEgPSBjaHIxID4+IDI7XG4gICAgICAgICAgICBlbmMyID0gKChjaHIxICYgMykgPDwgNCkgfCAoY2hyMiA+PiA0KTtcbiAgICAgICAgICAgIGVuYzMgPSAoKGNocjIgJiAxNSkgPDwgMikgfCAoY2hyMyA+PiA2KTtcbiAgICAgICAgICAgIGVuYzQgPSBjaHIzICYgNjM7XG5cbiAgICAgICAgICAgIGlmIChpc05hTihjaHIyKSlcbiAgICAgICAgICAgICAgICBlbmMzID0gZW5jNCA9IDY0O1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNOYU4oY2hyMykpXG4gICAgICAgICAgICAgICAgZW5jNCA9IDY0O1xuXG4gICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQgK1xuICAgICAgICAgICAgICAgIHRoaXMuX2tleVN0ci5jaGFyQXQoZW5jMSkgKyB0aGlzLl9rZXlTdHIuY2hhckF0KGVuYzIpICtcbiAgICAgICAgICAgICAgICB0aGlzLl9rZXlTdHIuY2hhckF0KGVuYzMpICsgdGhpcy5fa2V5U3RyLmNoYXJBdChlbmM0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuXG4gICAgdGhpcy5lbmNvZGVJZ25vcmVVdGY4ID0gaW5wdXRCeXRlcyA9PiB7XG4gICAgICAgIGxldCBvdXRwdXQgPSBcIlwiO1xuICAgICAgICBsZXQgY2hyMTtcbiAgICAgICAgbGV0IGNocjI7XG4gICAgICAgIGxldCBjaHIzO1xuICAgICAgICBsZXQgZW5jMTtcbiAgICAgICAgbGV0IGVuYzI7XG4gICAgICAgIGxldCBlbmMzO1xuICAgICAgICBsZXQgZW5jNDtcbiAgICAgICAgbGV0IGkgPSAwO1xuXG4gICAgICAgIHdoaWxlIChpIDwgaW5wdXRCeXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNocjEgPSBpbnB1dEJ5dGVzW2krK107XG4gICAgICAgICAgICBjaHIyID0gaW5wdXRCeXRlc1tpKytdO1xuICAgICAgICAgICAgY2hyMyA9IGlucHV0Qnl0ZXNbaSsrXTtcblxuICAgICAgICAgICAgZW5jMSA9IGNocjEgPj4gMjtcbiAgICAgICAgICAgIGVuYzIgPSAoKGNocjEgJiAzKSA8PCA0KSB8IChjaHIyID4+IDQpO1xuICAgICAgICAgICAgZW5jMyA9ICgoY2hyMiAmIDE1KSA8PCAyKSB8IChjaHIzID4+IDYpO1xuICAgICAgICAgICAgZW5jNCA9IGNocjMgJiA2MztcblxuICAgICAgICAgICAgaWYgKGlzTmFOKGNocjIpKVxuICAgICAgICAgICAgICAgIGVuYzMgPSBlbmM0ID0gNjQ7XG4gICAgICAgICAgICBlbHNlIGlmIChpc05hTihjaHIzKSlcbiAgICAgICAgICAgICAgICBlbmM0ID0gNjQ7XG5cbiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCArXG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5U3RyLmNoYXJBdChlbmMxKSArIHRoaXMuX2tleVN0ci5jaGFyQXQoZW5jMikgK1xuICAgICAgICAgICAgICAgIHRoaXMuX2tleVN0ci5jaGFyQXQoZW5jMykgKyB0aGlzLl9rZXlTdHIuY2hhckF0KGVuYzQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG5cbiAgICB0aGlzLmRlY29kZSA9IGlucHV0ID0+IHtcbiAgICAgICAgbGV0IG91dHB1dCA9IFwiXCI7XG4gICAgICAgIGxldCBjaHIxO1xuICAgICAgICBsZXQgY2hyMjtcbiAgICAgICAgbGV0IGNocjM7XG4gICAgICAgIGxldCBlbmMxO1xuICAgICAgICBsZXQgZW5jMjtcbiAgICAgICAgbGV0IGVuYzM7XG4gICAgICAgIGxldCBlbmM0O1xuICAgICAgICBsZXQgaSA9IDA7XG5cbiAgICAgICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL1xcPV0vZywgXCJcIik7XG5cbiAgICAgICAgd2hpbGUgKGkgPCBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGVuYzEgPSB0aGlzLl9rZXlTdHIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XG4gICAgICAgICAgICBlbmMyID0gdGhpcy5fa2V5U3RyLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpO1xuICAgICAgICAgICAgZW5jMyA9IHRoaXMuX2tleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTtcbiAgICAgICAgICAgIGVuYzQgPSB0aGlzLl9rZXlTdHIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XG5cbiAgICAgICAgICAgIGNocjEgPSAoZW5jMSA8PCAyKSB8IChlbmMyID4+IDQpO1xuICAgICAgICAgICAgY2hyMiA9ICgoZW5jMiAmIDE1KSA8PCA0KSB8IChlbmMzID4+IDIpO1xuICAgICAgICAgICAgY2hyMyA9ICgoZW5jMyAmIDMpIDw8IDYpIHwgZW5jNDtcblxuICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0ICsgU3RyaW5nLmZyb21DaGFyQ29kZShjaHIxKTtcblxuICAgICAgICAgICAgaWYgKGVuYzMgIT0gNjQpXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0ICsgU3RyaW5nLmZyb21DaGFyQ29kZShjaHIyKTtcblxuICAgICAgICAgICAgaWYgKGVuYzQgIT0gNjQpXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0ICsgU3RyaW5nLmZyb21DaGFyQ29kZShjaHIzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl91dGY4X2RlY29kZShvdXRwdXQpO1xuICAgIH1cblxuICAgIHRoaXMuZGVjb2RlVG9CeXRlQXJyYXkgPSBpbnB1dCA9PiB7XG4gICAgICAgIGxldCBvdXRwdXQgPSBcIlwiO1xuICAgICAgICBsZXQgY2hyMTtcbiAgICAgICAgbGV0IGNocjI7XG4gICAgICAgIGxldCBjaHIzO1xuICAgICAgICBsZXQgZW5jMTtcbiAgICAgICAgbGV0IGVuYzI7XG4gICAgICAgIGxldCBlbmMzO1xuICAgICAgICBsZXQgZW5jNDtcbiAgICAgICAgbGV0IGkgPSAwO1xuXG4gICAgICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZSgvW15BLVphLXowLTlcXCtcXC9cXD1dL2csIFwiXCIpO1xuXG4gICAgICAgIHdoaWxlIChpIDwgaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICBlbmMxID0gdGhpcy5fa2V5U3RyLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpO1xuICAgICAgICAgICAgZW5jMiA9IHRoaXMuX2tleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTtcbiAgICAgICAgICAgIGVuYzMgPSB0aGlzLl9rZXlTdHIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XG4gICAgICAgICAgICBlbmM0ID0gdGhpcy5fa2V5U3RyLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpO1xuXG4gICAgICAgICAgICBjaHIxID0gKGVuYzEgPDwgMikgfCAoZW5jMiA+PiA0KTtcbiAgICAgICAgICAgIGNocjIgPSAoKGVuYzIgJiAxNSkgPDwgNCkgfCAoZW5jMyA+PiAyKTtcbiAgICAgICAgICAgIGNocjMgPSAoKGVuYzMgJiAzKSA8PCA2KSB8IGVuYzQ7XG5cbiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCArIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyMSk7XG5cbiAgICAgICAgICAgIGlmIChlbmMzICE9IDY0KVxuICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCArIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyMik7XG5cbiAgICAgICAgICAgIGlmIChlbmM0ICE9IDY0KVxuICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCArIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyMyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fb3V0MkJ5dGVBcnJheShvdXRwdXQpO1xuICAgIH1cblxuICAgIHRoaXMuX291dDJCeXRlQXJyYXkgPSB1dGZ0ZXh0ID0+IHtcbiAgICAgICAgY29uc3QgYnl0ZUFycmF5ID0gbmV3IEFycmF5KHV0ZnRleHQubGVuZ3RoKTtcblxuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGxldCBjID0gMDtcblxuICAgICAgICB3aGlsZSAoaSA8IHV0ZnRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICBjID0gdXRmdGV4dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgYnl0ZUFycmF5W2ldID0gYztcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBieXRlQXJyYXk7XG4gICAgfVxuXG4gICAgdGhpcy5fdXRmOF9lbmNvZGUgPSBzdHJpbmcgPT4ge1xuICAgICAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpO1xuICAgICAgICBsZXQgdXRmdGV4dCA9IFwiXCI7XG5cbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBzdHJpbmcubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBzdHJpbmcuY2hhckNvZGVBdChuKTtcblxuICAgICAgICAgICAgaWYgKGMgPCAxMjgpIHtcbiAgICAgICAgICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChjID4gMTI3KSAmJiAoYyA8IDIwNDgpKSB7XG4gICAgICAgICAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjID4+IDYpIHwgMTkyKTtcbiAgICAgICAgICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiA2MykgfCAxMjgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgPj4gMTIpIHwgMjI0KTtcbiAgICAgICAgICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjID4+IDYpICYgNjMpIHwgMTI4KTtcbiAgICAgICAgICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiA2MykgfCAxMjgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHV0ZnRleHQ7XG4gICAgfVxuXG4gICAgdGhpcy5fdXRmOF9kZWNvZGUgPSB1dGZ0ZXh0ID0+IHtcbiAgICAgICAgbGV0IHN0cmluZyA9IFwiXCI7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgbGV0IGMgPSAwO1xuICAgICAgICBsZXQgYzIgPSAwO1xuICAgICAgICBsZXQgYzMgPSAwO1xuXG4gICAgICAgIHdoaWxlIChpIDwgdXRmdGV4dC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGMgPSB1dGZ0ZXh0LmNoYXJDb2RlQXQoaSk7XG5cbiAgICAgICAgICAgIGlmIChjIDwgMTI4KSB7XG4gICAgICAgICAgICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoYyA+IDE5MSkgJiYgKGMgPCAyMjQpKSB7XG4gICAgICAgICAgICAgICAgYzIgPSB1dGZ0ZXh0LmNoYXJDb2RlQXQoaSArIDEpO1xuICAgICAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYyAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XG4gICAgICAgICAgICAgICAgaSArPSAyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjMiA9IHV0ZnRleHQuY2hhckNvZGVBdChpICsgMSk7XG4gICAgICAgICAgICAgICAgYzMgPSB1dGZ0ZXh0LmNoYXJDb2RlQXQoaSArIDIpO1xuXG4gICAgICAgICAgICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjICYgMTUpIDw8IDEyKSB8ICgoYzIgJiA2MykgPDwgNikgfCAoYzMgJiA2MykpO1xuXG4gICAgICAgICAgICAgICAgaSArPSAzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils/base64.js\n");

/***/ }),

/***/ "./src/utils/bytes.js":
/*!****************************!*\
  !*** ./src/utils/bytes.js ***!
  \****************************/
/*! exports provided: byte2hexStr, bytesToString, hextoString, byteArray2hexStr, base64DecodeFromString, base64EncodeToString */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"byte2hexStr\", function() { return byte2hexStr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"bytesToString\", function() { return bytesToString; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hextoString\", function() { return hextoString; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"byteArray2hexStr\", function() { return byteArray2hexStr; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"base64DecodeFromString\", function() { return base64DecodeFromString; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"base64EncodeToString\", function() { return base64EncodeToString; });\n/* harmony import */ var _base64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base64 */ \"./src/utils/base64.js\");\n\nfunction byte2hexStr(byte) {\n  if (typeof byte !== 'number') throw new Error('Input must be a number');\n  if (byte < 0 || byte > 255) throw new Error('Input must be a byte');\n  var hexByteMap = '0123456789ABCDEF';\n  var str = '';\n  str += hexByteMap.charAt(byte >> 4);\n  str += hexByteMap.charAt(byte & 0x0f);\n  return str;\n}\nfunction bytesToString(arr) {\n  if (typeof arr === 'string') return arr;\n  var str = '';\n\n  for (var i = 0; i < arr.length; i++) {\n    var one = arr[i].toString(2);\n    var v = one.match(/^1+?(?=0)/);\n\n    if (v && one.length === 8) {\n      var bytesLength = v[0].length;\n      var store = arr[i].toString(2).slice(7 - bytesLength);\n\n      for (var st = 1; st < bytesLength; st++) {\n        store += arr[st + i].toString(2).slice(2);\n      }\n\n      str += String.fromCharCode(parseInt(store, 2));\n      i += bytesLength - 1;\n    } else {\n      str += String.fromCharCode(arr[i]);\n    }\n  }\n\n  return str;\n}\nfunction hextoString(hex) {\n  var arr = hex.replace(/^0x/, '').split('');\n  var out = '';\n\n  for (var i = 0; i < arr.length / 2; i++) {\n    var tmp = \"0x\".concat(arr[i * 2]).concat(arr[i * 2 + 1]);\n    out += String.fromCharCode(tmp);\n  }\n\n  return out;\n}\nfunction byteArray2hexStr(byteArray) {\n  var str = '';\n\n  for (var i = 0; i < byteArray.length; i++) {\n    str += byte2hexStr(byteArray[i]);\n  }\n\n  return str;\n}\nfunction base64DecodeFromString(string64) {\n  return new _base64__WEBPACK_IMPORTED_MODULE_0__[\"Base64\"]().decodeToByteArray(string64);\n}\nfunction base64EncodeToString(bytes) {\n  var b = new _base64__WEBPACK_IMPORTED_MODULE_0__[\"Base64\"]();\n  var string64 = b.encodeIgnoreUtf8(bytes);\n  return string64;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvYnl0ZXMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvYnl0ZXMuanM/MjFjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlNjQgfSBmcm9tICcuL2Jhc2U2NCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBieXRlMmhleFN0cihieXRlKSB7XG4gICAgaWYgKHR5cGVvZiBieXRlICE9PSAnbnVtYmVyJylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnB1dCBtdXN0IGJlIGEgbnVtYmVyJyk7XG5cbiAgICBpZiAoYnl0ZSA8IDAgfHwgYnl0ZSA+IDI1NSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnB1dCBtdXN0IGJlIGEgYnl0ZScpO1xuXG4gICAgY29uc3QgaGV4Qnl0ZU1hcCA9ICcwMTIzNDU2Nzg5QUJDREVGJztcblxuICAgIGxldCBzdHIgPSAnJztcbiAgICBzdHIgKz0gaGV4Qnl0ZU1hcC5jaGFyQXQoYnl0ZSA+PiA0KTtcbiAgICBzdHIgKz0gaGV4Qnl0ZU1hcC5jaGFyQXQoYnl0ZSAmIDB4MGYpO1xuXG4gICAgcmV0dXJuIHN0cjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ5dGVzVG9TdHJpbmcoYXJyKSB7XG4gICAgaWYgKHR5cGVvZiBhcnIgPT09ICdzdHJpbmcnKVxuICAgICAgICByZXR1cm4gYXJyO1xuXG4gICAgbGV0IHN0ciA9ICcnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgb25lID0gYXJyW2ldLnRvU3RyaW5nKDIpO1xuICAgICAgICBjb25zdCB2ID0gb25lLm1hdGNoKC9eMSs/KD89MCkvKTtcblxuICAgICAgICBpZiAodiAmJiBvbmUubGVuZ3RoID09PSA4KSB7XG4gICAgICAgICAgICBjb25zdCBieXRlc0xlbmd0aCA9IHZbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IHN0b3JlID0gYXJyW2ldLnRvU3RyaW5nKDIpLnNsaWNlKDcgLSBieXRlc0xlbmd0aCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHN0ID0gMTsgc3QgPCBieXRlc0xlbmd0aDsgc3QrKylcbiAgICAgICAgICAgICAgICBzdG9yZSArPSBhcnJbc3QgKyBpXS50b1N0cmluZygyKS5zbGljZSgyKTtcblxuICAgICAgICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoc3RvcmUsIDIpKTtcbiAgICAgICAgICAgIGkgKz0gYnl0ZXNMZW5ndGggLSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYXJyW2ldKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdHI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoZXh0b1N0cmluZyhoZXgpIHtcbiAgICBjb25zdCBhcnIgPSBoZXgucmVwbGFjZSgvXjB4LywnJykuc3BsaXQoJycpO1xuICAgIGxldCBvdXQgPSAnJztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aCAvIDI7IGkrKykge1xuICAgICAgICBsZXQgdG1wID0gYDB4JHsgYXJyW2kgKiAyXSB9JHsgYXJyW2kgKiAyICsgMV0gfWA7XG4gICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHRtcCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ5dGVBcnJheTJoZXhTdHIoYnl0ZUFycmF5KSB7XG4gICAgbGV0IHN0ciA9ICcnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAoYnl0ZUFycmF5Lmxlbmd0aCk7IGkrKylcbiAgICAgICAgc3RyICs9IGJ5dGUyaGV4U3RyKGJ5dGVBcnJheVtpXSk7XG5cbiAgICByZXR1cm4gc3RyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0RGVjb2RlRnJvbVN0cmluZyhzdHJpbmc2NCkge1xuICAgIHJldHVybiBuZXcgQmFzZTY0KCkuZGVjb2RlVG9CeXRlQXJyYXkoc3RyaW5nNjQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0RW5jb2RlVG9TdHJpbmcoYnl0ZXMpIHtcbiAgICBjb25zdCBiID0gbmV3IEJhc2U2NCgpO1xuICAgIGNvbnN0IHN0cmluZzY0ID0gYi5lbmNvZGVJZ25vcmVVdGY4KGJ5dGVzKTtcblxuICAgIHJldHVybiBzdHJpbmc2NFxufVxuXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFHQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils/bytes.js\n");

/***/ }),

/***/ "./src/utils/code.js":
/*!***************************!*\
  !*** ./src/utils/code.js ***!
  \***************************/
/*! exports provided: bin2String, arrayEquals, stringToBytes, byte2hexStr, bytesToString, hextoString, byteArray2hexStr, base64DecodeFromString, base64EncodeToString, hexChar2byte, isHexChar, hexStr2byteArray, strToDate, isNumber, getStringType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"bin2String\", function() { return bin2String; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"arrayEquals\", function() { return arrayEquals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"stringToBytes\", function() { return stringToBytes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hexChar2byte\", function() { return hexChar2byte; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isHexChar\", function() { return isHexChar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hexStr2byteArray\", function() { return hexStr2byteArray; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"strToDate\", function() { return strToDate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isNumber\", function() { return isNumber; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getStringType\", function() { return getStringType; });\n/* harmony import */ var _bytes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bytes */ \"./src/utils/bytes.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"byte2hexStr\", function() { return _bytes__WEBPACK_IMPORTED_MODULE_0__[\"byte2hexStr\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"bytesToString\", function() { return _bytes__WEBPACK_IMPORTED_MODULE_0__[\"bytesToString\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"hextoString\", function() { return _bytes__WEBPACK_IMPORTED_MODULE_0__[\"hextoString\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"byteArray2hexStr\", function() { return _bytes__WEBPACK_IMPORTED_MODULE_0__[\"byteArray2hexStr\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"base64DecodeFromString\", function() { return _bytes__WEBPACK_IMPORTED_MODULE_0__[\"base64DecodeFromString\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"base64EncodeToString\", function() { return _bytes__WEBPACK_IMPORTED_MODULE_0__[\"base64EncodeToString\"]; });\n\n\nfunction bin2String(array) {\n  // TODO Do we need this alias?\n  return Object(_bytes__WEBPACK_IMPORTED_MODULE_0__[\"bytesToString\"])(array);\n}\nfunction arrayEquals(array1, array2, strict) {\n  if (array1.length != array2.length) return false;\n  var i;\n\n  for (i = 0; i < array1.length; i++) {\n    if (strict) {\n      if (array1[i] != array2[i]) return false;\n    } else if (JSON.stringify(array1[i]) != JSON.stringify(array2[i])) return false;\n  }\n\n  return true;\n}\nfunction stringToBytes(str) {\n  if (typeof str !== 'string') throw new Error('The passed string is not a string');\n  var bytes = new Array();\n  var len;\n  var c;\n  len = str.length;\n\n  for (var i = 0; i < len; i++) {\n    c = str.charCodeAt(i);\n\n    if (c >= 0x010000 && c <= 0x10FFFF) {\n      bytes.push(c >> 18 & 0x07 | 0xF0);\n      bytes.push(c >> 12 & 0x3F | 0x80);\n      bytes.push(c >> 6 & 0x3F | 0x80);\n      bytes.push(c & 0x3F | 0x80);\n    } else if (c >= 0x000800 && c <= 0x00FFFF) {\n      bytes.push(c >> 12 & 0x0F | 0xE0);\n      bytes.push(c >> 6 & 0x3F | 0x80);\n      bytes.push(c & 0x3F | 0x80);\n    } else if (c >= 0x000080 && c <= 0x0007FF) {\n      bytes.push(c >> 6 & 0x1F | 0xC0);\n      bytes.push(c & 0x3F | 0x80);\n    } else bytes.push(c & 0xFF);\n  }\n\n  return bytes;\n}\n\nfunction hexChar2byte(c) {\n  var d;\n  if (c >= 'A' && c <= 'F') d = c.charCodeAt(0) - 'A'.charCodeAt(0) + 10;else if (c >= 'a' && c <= 'f') d = c.charCodeAt(0) - 'a'.charCodeAt(0) + 10;else if (c >= '0' && c <= '9') d = c.charCodeAt(0) - '0'.charCodeAt(0);\n  if (typeof d === 'number') return d;else throw new Error('The passed hex char is not a valid hex char');\n}\nfunction isHexChar(c) {\n  if (c >= 'A' && c <= 'F' || c >= 'a' && c <= 'f' || c >= '0' && c <= '9') {\n    return 1;\n  }\n\n  return 0;\n}\nfunction hexStr2byteArray(str) {\n  if (typeof str !== 'string') throw new Error('The passed string is not a string');\n  var byteArray = Array();\n  var d = 0;\n  var j = 0;\n  var k = 0;\n\n  for (var i = 0; i < str.length; i++) {\n    var c = str.charAt(i);\n\n    if (isHexChar(c)) {\n      d <<= 4;\n      d += hexChar2byte(c);\n      j++;\n\n      if (0 === j % 2) {\n        byteArray[k++] = d;\n        d = 0;\n      }\n    } else throw new Error('The passed hex char is not a valid hex string');\n  }\n\n  return byteArray;\n} //yyyy-MM-DD HH-mm-ss\n\nfunction strToDate(str) {\n  if (!/^\\d{4}-\\d{2}-\\d{2}( \\d{2}-\\d{2}-\\d{2}|)/.test(str)) throw new Error('The passed date string is not valid');\n  var tempStrs = str.split(\" \");\n  var dateStrs = tempStrs[0].split(\"-\");\n  var year = parseInt(dateStrs[0], 10);\n  var month = parseInt(dateStrs[1], 10) - 1;\n  var day = parseInt(dateStrs[2], 10);\n\n  if (tempStrs.length > 1) {\n    var timeStrs = tempStrs[1].split(\"-\");\n    var hour = parseInt(timeStrs[0], 10);\n    var minute = parseInt(timeStrs[1], 10);\n    var second = parseInt(timeStrs[2], 10);\n    return new Date(year, month, day, hour, minute, second);\n  }\n\n  return new Date(year, month, day);\n}\nfunction isNumber(c) {\n  if (c >= '0' && c <= '9') return 1;\n  return 0;\n} //return 1: address  --- 20Bytes HexString\n//return 2: blockNumber ------ Decimal number\n//return 3: assetName ------ String\n//return other: error\n\nfunction getStringType(str) {\n  if (null == str) return -1;\n  if (typeof str != 'string') return -1;\n  if (str.length == 0 || str == \"\") return -1;\n  var i = 0; // TODO Should we return 1 if someone passes a full, 42-chars long address?\n  // if (str.length == 42 && /^41/.test(str)) {\n  //     for (; i < 40; i++) {\n  //         var c = str.charAt(i+2);\n  //\n  //         if (!isHexChar(c))\n  //             break;\n  //     }\n  // } else\n\n  if (str.length == 40) {\n    for (; i < 40; i++) {\n      var c = str.charAt(i);\n      if (!isHexChar(c)) break;\n    }\n  }\n\n  if (i == 40) return 1; //40 Hex, Address\n\n  for (i = 0; i < str.length; i++) {\n    var c = str.charAt(i);\n    if (!isNumber(c)) break;\n  }\n\n  if (i == str.length) return 2; // All Decimal number, BlockNumber\n\n  for (i = 0; i < str.length; i++) {\n    var c = str.charAt(i);\n    if (c > ' ') return 3; // At least one visible character\n  }\n\n  return -1;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvY29kZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy91dGlscy9jb2RlLmpzP2IzNzkiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBieXRlMmhleFN0ciwgYnl0ZXNUb1N0cmluZywgaGV4dG9TdHJpbmcsIGJ5dGVBcnJheTJoZXhTdHIsIGJhc2U2NERlY29kZUZyb21TdHJpbmcsIGJhc2U2NEVuY29kZVRvU3RyaW5nIH0gZnJvbSAnLi9ieXRlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBiaW4yU3RyaW5nKGFycmF5KSB7XG4gICAgLy8gVE9ETyBEbyB3ZSBuZWVkIHRoaXMgYWxpYXM/XG4gICAgcmV0dXJuIGJ5dGVzVG9TdHJpbmcoYXJyYXkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlFcXVhbHMoYXJyYXkxLCBhcnJheTIsIHN0cmljdCkge1xuICAgIGlmIChhcnJheTEubGVuZ3RoICE9IGFycmF5Mi5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgXG4gICAgbGV0IGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgYXJyYXkxLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzdHJpY3QpIHtcbiAgICAgICAgICAgIGlmIChhcnJheTFbaV0gIT0gYXJyYXkyW2ldKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChKU09OLnN0cmluZ2lmeShhcnJheTFbaV0pICE9IEpTT04uc3RyaW5naWZ5KGFycmF5MltpXSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdUb0J5dGVzKHN0cikge1xuXG4gICAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBwYXNzZWQgc3RyaW5nIGlzIG5vdCBhIHN0cmluZycpXG5cbiAgICBjb25zdCBieXRlcyA9IG5ldyBBcnJheSgpO1xuICAgIGxldCBsZW47XG4gICAgbGV0IGM7XG5cbiAgICBsZW4gPSBzdHIubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG5cbiAgICAgICAgaWYgKGMgPj0gMHgwMTAwMDAgJiYgYyA8PSAweDEwRkZGRikge1xuICAgICAgICAgICAgYnl0ZXMucHVzaCgoKGMgPj4gMTgpICYgMHgwNykgfCAweEYwKTtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goKChjID4+IDEyKSAmIDB4M0YpIHwgMHg4MCk7XG4gICAgICAgICAgICBieXRlcy5wdXNoKCgoYyA+PiA2KSAmIDB4M0YpIHwgMHg4MCk7XG4gICAgICAgICAgICBieXRlcy5wdXNoKChjICYgMHgzRikgfCAweDgwKTtcbiAgICAgICAgfSBlbHNlIGlmIChjID49IDB4MDAwODAwICYmIGMgPD0gMHgwMEZGRkYpIHtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goKChjID4+IDEyKSAmIDB4MEYpIHwgMHhFMCk7XG4gICAgICAgICAgICBieXRlcy5wdXNoKCgoYyA+PiA2KSAmIDB4M0YpIHwgMHg4MCk7XG4gICAgICAgICAgICBieXRlcy5wdXNoKChjICYgMHgzRikgfCAweDgwKTtcbiAgICAgICAgfSBlbHNlIGlmIChjID49IDB4MDAwMDgwICYmIGMgPD0gMHgwMDA3RkYpIHtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goKChjID4+IDYpICYgMHgxRikgfCAweEMwKTtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goKGMgJiAweDNGKSB8IDB4ODApO1xuICAgICAgICB9IGVsc2UgYnl0ZXMucHVzaChjICYgMHhGRik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ5dGVzO1xufVxuXG5leHBvcnQgeyBieXRlMmhleFN0ciwgYnl0ZXNUb1N0cmluZywgaGV4dG9TdHJpbmcsIGJ5dGVBcnJheTJoZXhTdHIsIGJhc2U2NERlY29kZUZyb21TdHJpbmcsIGJhc2U2NEVuY29kZVRvU3RyaW5nIH1cblxuZXhwb3J0IGZ1bmN0aW9uIGhleENoYXIyYnl0ZShjKSB7XG4gICAgbGV0IGQ7XG5cbiAgICBpZiAoYyA+PSAnQScgJiYgYyA8PSAnRicpXG4gICAgICAgIGQgPSBjLmNoYXJDb2RlQXQoMCkgLSAnQScuY2hhckNvZGVBdCgwKSArIDEwO1xuICAgIGVsc2UgaWYgKGMgPj0gJ2EnICYmIGMgPD0gJ2YnKVxuICAgICAgICBkID0gYy5jaGFyQ29kZUF0KDApIC0gJ2EnLmNoYXJDb2RlQXQoMCkgKyAxMDtcbiAgICBlbHNlIGlmIChjID49ICcwJyAmJiBjIDw9ICc5JylcbiAgICAgICAgZCA9IGMuY2hhckNvZGVBdCgwKSAtICcwJy5jaGFyQ29kZUF0KDApO1xuXG4gICAgaWYgKHR5cGVvZiBkID09PSAnbnVtYmVyJylcbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBwYXNzZWQgaGV4IGNoYXIgaXMgbm90IGEgdmFsaWQgaGV4IGNoYXInKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSGV4Q2hhcihjKSB7XG4gICAgaWYgKChjID49ICdBJyAmJiBjIDw9ICdGJykgfHxcbiAgICAgICAgKGMgPj0gJ2EnICYmIGMgPD0gJ2YnKSB8fFxuICAgICAgICAoYyA+PSAnMCcgJiYgYyA8PSAnOScpKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGV4U3RyMmJ5dGVBcnJheShzdHIpIHtcbiAgICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHBhc3NlZCBzdHJpbmcgaXMgbm90IGEgc3RyaW5nJylcblxuICAgIGNvbnN0IGJ5dGVBcnJheSA9IEFycmF5KCk7XG4gICAgbGV0IGQgPSAwO1xuICAgIGxldCBqID0gMDtcbiAgICBsZXQgayA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJBdChpKTtcblxuICAgICAgICBpZiAoaXNIZXhDaGFyKGMpKSB7XG4gICAgICAgICAgICBkIDw8PSA0O1xuICAgICAgICAgICAgZCArPSBoZXhDaGFyMmJ5dGUoYyk7XG4gICAgICAgICAgICBqKys7XG5cbiAgICAgICAgICAgIGlmICgwID09PSAoaiAlIDIpKSB7XG4gICAgICAgICAgICAgICAgYnl0ZUFycmF5W2srK10gPSBkO1xuICAgICAgICAgICAgICAgIGQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHBhc3NlZCBoZXggY2hhciBpcyBub3QgYSB2YWxpZCBoZXggc3RyaW5nJylcbiAgICB9XG5cbiAgICByZXR1cm4gYnl0ZUFycmF5O1xufVxuXG4vL3l5eXktTU0tREQgSEgtbW0tc3NcbmV4cG9ydCBmdW5jdGlvbiBzdHJUb0RhdGUoc3RyKSB7XG5cbiAgICBpZiAoIS9eXFxkezR9LVxcZHsyfS1cXGR7Mn0oIFxcZHsyfS1cXGR7Mn0tXFxkezJ9fCkvLnRlc3Qoc3RyKSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgcGFzc2VkIGRhdGUgc3RyaW5nIGlzIG5vdCB2YWxpZCcpXG5cbiAgICBjb25zdCB0ZW1wU3RycyA9IHN0ci5zcGxpdChcIiBcIik7XG4gICAgY29uc3QgZGF0ZVN0cnMgPSB0ZW1wU3Ryc1swXS5zcGxpdChcIi1cIik7XG4gICAgY29uc3QgeWVhciA9IHBhcnNlSW50KGRhdGVTdHJzWzBdLCAxMCk7XG4gICAgY29uc3QgbW9udGggPSBwYXJzZUludChkYXRlU3Ryc1sxXSwgMTApIC0gMTtcbiAgICBjb25zdCBkYXkgPSBwYXJzZUludChkYXRlU3Ryc1syXSwgMTApO1xuXG4gICAgaWYgKHRlbXBTdHJzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgY29uc3QgdGltZVN0cnMgPSB0ZW1wU3Ryc1sxXS5zcGxpdChcIi1cIik7XG4gICAgICAgIGNvbnN0IGhvdXIgPSBwYXJzZUludCh0aW1lU3Ryc1swXSAsIDEwKTtcbiAgICAgICAgY29uc3QgbWludXRlID0gcGFyc2VJbnQodGltZVN0cnNbMV0sIDEwKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gcGFyc2VJbnQodGltZVN0cnNbMl0sIDEwKTtcblxuICAgICAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKGMpIHtcbiAgICBpZiAoYyA+PSAnMCcgJiYgYyA8PSAnOScpXG4gICAgICAgIHJldHVybiAxO1xuICAgICAgICBcbiAgICByZXR1cm4gMDtcbn1cblxuLy9yZXR1cm4gMTogYWRkcmVzcyAgLS0tIDIwQnl0ZXMgSGV4U3RyaW5nXG4vL3JldHVybiAyOiBibG9ja051bWJlciAtLS0tLS0gRGVjaW1hbCBudW1iZXJcbi8vcmV0dXJuIDM6IGFzc2V0TmFtZSAtLS0tLS0gU3RyaW5nXG4vL3JldHVybiBvdGhlcjogZXJyb3JcbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHJpbmdUeXBlKHN0cikge1xuICAgIGlmIChudWxsID09IHN0cilcbiAgICAgICAgcmV0dXJuIC0xO1xuXG4gICAgaWYgKHR5cGVvZiAoc3RyKSAhPSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIC0xO1xuXG4gICAgaWYgKHN0ci5sZW5ndGggPT0gMCB8fCBzdHIgPT0gXCJcIilcbiAgICAgICAgcmV0dXJuIC0xO1xuXG4gICAgbGV0IGkgPSAwO1xuXG4gICAgLy8gVE9ETyBTaG91bGQgd2UgcmV0dXJuIDEgaWYgc29tZW9uZSBwYXNzZXMgYSBmdWxsLCA0Mi1jaGFycyBsb25nIGFkZHJlc3M/XG4gICAgLy8gaWYgKHN0ci5sZW5ndGggPT0gNDIgJiYgL140MS8udGVzdChzdHIpKSB7XG4gICAgLy8gICAgIGZvciAoOyBpIDwgNDA7IGkrKykge1xuICAgIC8vICAgICAgICAgdmFyIGMgPSBzdHIuY2hhckF0KGkrMik7XG4gICAgLy9cbiAgICAvLyAgICAgICAgIGlmICghaXNIZXhDaGFyKGMpKVxuICAgIC8vICAgICAgICAgICAgIGJyZWFrO1xuICAgIC8vICAgICB9XG4gICAgLy8gfSBlbHNlXG4gICAgaWYgKHN0ci5sZW5ndGggPT0gNDApIHtcbiAgICAgICAgZm9yICg7IGkgPCA0MDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQXQoaSk7XG5cbiAgICAgICAgICAgIGlmICghaXNIZXhDaGFyKGMpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGkgPT0gNDApXG4gICAgICAgIHJldHVybiAxOyAvLzQwIEhleCwgQWRkcmVzc1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQXQoaSk7XG5cbiAgICAgICAgaWYgKCFpc051bWJlcihjKSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGlmIChpID09IHN0ci5sZW5ndGgpXG4gICAgICAgIHJldHVybiAyOyAvLyBBbGwgRGVjaW1hbCBudW1iZXIsIEJsb2NrTnVtYmVyXG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjID0gc3RyLmNoYXJBdChpKTtcblxuICAgICAgICBpZiAoYyA+ICcgJylcbiAgICAgICAgICAgIHJldHVybiAzOyAvLyBBdCBsZWFzdCBvbmUgdmlzaWJsZSBjaGFyYWN0ZXJcbiAgICB9XG5cbiAgICByZXR1cm4gLTE7XG59XG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFPQTtBQUlBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/code.js\n");

/***/ }),

/***/ "./src/utils/crypto.js":
/*!*****************************!*\
  !*** ./src/utils/crypto.js ***!
  \*****************************/
/*! exports provided: getBase58CheckAddress, decodeBase58Address, signTransaction, arrayToBase64String, signBytes, getRowBytesFromTransactionBase64, genPriKey, computeAddress, getAddressFromPriKey, decode58Check, isAddressValid, getBase58CheckAddressFromPriKeyBase64String, getHexStrAddressFromPriKeyBase64String, getAddressFromPriKeyBase64String, getPubKeyFromPriKey, ECKeySign, SHA256, passwordToAddress, pkToAddress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getBase58CheckAddress\", function() { return getBase58CheckAddress; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"decodeBase58Address\", function() { return decodeBase58Address; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"signTransaction\", function() { return signTransaction; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"arrayToBase64String\", function() { return arrayToBase64String; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"signBytes\", function() { return signBytes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getRowBytesFromTransactionBase64\", function() { return getRowBytesFromTransactionBase64; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"genPriKey\", function() { return genPriKey; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"computeAddress\", function() { return computeAddress; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getAddressFromPriKey\", function() { return getAddressFromPriKey; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"decode58Check\", function() { return decode58Check; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isAddressValid\", function() { return isAddressValid; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getBase58CheckAddressFromPriKeyBase64String\", function() { return getBase58CheckAddressFromPriKeyBase64String; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getHexStrAddressFromPriKeyBase64String\", function() { return getHexStrAddressFromPriKeyBase64String; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getAddressFromPriKeyBase64String\", function() { return getAddressFromPriKeyBase64String; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getPubKeyFromPriKey\", function() { return getPubKeyFromPriKey; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ECKeySign\", function() { return ECKeySign; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SHA256\", function() { return SHA256; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"passwordToAddress\", function() { return passwordToAddress; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"pkToAddress\", function() { return pkToAddress; });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"@babel/runtime/helpers/toConsumableArray\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jssha__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jssha */ \"jssha\");\n/* harmony import */ var jssha__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jssha__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _address__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./address */ \"./src/utils/address.js\");\n/* harmony import */ var _code__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./code */ \"./src/utils/code.js\");\n/* harmony import */ var _base58__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./base58 */ \"./src/utils/base58.js\");\n/* harmony import */ var js_sha3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js-sha3 */ \"js-sha3\");\n/* harmony import */ var js_sha3__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(js_sha3__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _bytes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./bytes */ \"./src/utils/bytes.js\");\n/* harmony import */ var elliptic__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! elliptic */ \"elliptic\");\n/* harmony import */ var elliptic__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(elliptic__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\n\nfunction getBase58CheckAddress(addressBytes) {\n  var hash0 = SHA256(addressBytes);\n  var hash1 = SHA256(hash0);\n  var checkSum = hash1.slice(0, 4);\n  checkSum = addressBytes.concat(checkSum);\n  return Object(_base58__WEBPACK_IMPORTED_MODULE_4__[\"encode58\"])(checkSum);\n}\nfunction decodeBase58Address(base58Sting) {\n  if (typeof base58Sting != 'string') return false;\n  if (base58Sting.length <= 4) return false;\n  var address = Object(_base58__WEBPACK_IMPORTED_MODULE_4__[\"decode58\"])(base58Sting);\n  if (base58Sting.length <= 4) return false;\n  var len = address.length;\n  var offset = len - 4;\n  var checkSum = address.slice(offset);\n  address = address.slice(0, offset);\n  var hash0 = SHA256(address);\n  var hash1 = SHA256(hash0);\n  var checkSum1 = hash1.slice(0, 4);\n\n  if (checkSum[0] == checkSum1[0] && checkSum[1] == checkSum1[1] && checkSum[2] == checkSum1[2] && checkSum[3] == checkSum1[3]) {\n    return address;\n  }\n\n  throw new Error('Invalid address provided');\n}\nfunction signTransaction(priKeyBytes, transaction) {\n  if (typeof priKeyBytes === 'string') priKeyBytes = Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"hexStr2byteArray\"])(priKeyBytes);\n  var txID = transaction.txID;\n  var signature = ECKeySign(Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"hexStr2byteArray\"])(txID), priKeyBytes);\n  transaction.signature = [signature];\n  return transaction;\n}\nfunction arrayToBase64String(a) {\n  return btoa(String.fromCharCode.apply(String, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(a)));\n}\nfunction signBytes(privateKey, contents) {\n  if (typeof privateKey === 'string') privateKey = Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"hexStr2byteArray\"])(privateKey);\n  var hashBytes = SHA256(contents);\n  var signBytes = ECKeySign(hashBytes, privateKey);\n  return signBytes;\n}\nfunction getRowBytesFromTransactionBase64(base64Data) {\n  var bytesDecode = Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"base64DecodeFromString\"])(base64Data);\n  var transaction = proto.protocol.Transaction.deserializeBinary(bytesDecode);\n  var raw = transaction.getRawData();\n  return raw.serializeBinary();\n}\nfunction genPriKey() {\n  var ec = new elliptic__WEBPACK_IMPORTED_MODULE_7__[\"ec\"]('secp256k1');\n  var key = ec.genKeyPair();\n  var priKey = key.getPrivate();\n  var priKeyHex = priKey.toString('hex');\n\n  while (priKeyHex.length < 64) {\n    priKeyHex = \"0\".concat(priKeyHex);\n  }\n\n  return Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"hexStr2byteArray\"])(priKeyHex);\n}\nfunction computeAddress(pubBytes) {\n  if (pubBytes.length === 65) pubBytes = pubBytes.slice(1);\n  var hash = Object(js_sha3__WEBPACK_IMPORTED_MODULE_5__[\"keccak256\"])(pubBytes).toString();\n  var addressHex = _address__WEBPACK_IMPORTED_MODULE_2__[\"ADDRESS_PREFIX\"] + hash.substring(24);\n  return Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"hexStr2byteArray\"])(addressHex);\n}\nfunction getAddressFromPriKey(priKeyBytes) {\n  var pubBytes = getPubKeyFromPriKey(priKeyBytes);\n  return computeAddress(pubBytes);\n}\nfunction decode58Check(addressStr) {\n  var decodeCheck = Object(_base58__WEBPACK_IMPORTED_MODULE_4__[\"decode58\"])(addressStr);\n  if (decodeCheck.length <= 4) return false;\n  var decodeData = decodeCheck.slice(0, decodeCheck.length - 4);\n  var hash0 = SHA256(decodeData);\n  var hash1 = SHA256(hash0);\n\n  if (hash1[0] === decodeCheck[decodeData.length] && hash1[1] === decodeCheck[decodeData.length + 1] && hash1[2] === decodeCheck[decodeData.length + 2] && hash1[3] === decodeCheck[decodeData.length + 3]) {\n    return decodeData;\n  }\n\n  return false;\n}\nfunction isAddressValid(base58Str) {\n  if (typeof base58Str !== 'string') return false;\n  if (base58Str.length !== _address__WEBPACK_IMPORTED_MODULE_2__[\"ADDRESS_SIZE\"]) return false;\n  var address = Object(_base58__WEBPACK_IMPORTED_MODULE_4__[\"decode58\"])(base58Str);\n  if (address.length !== 25) return false;\n  if (address[0] !== _address__WEBPACK_IMPORTED_MODULE_2__[\"ADDRESS_PREFIX_BYTE\"]) return false;\n  var checkSum = address.slice(21);\n  address = address.slice(0, 21);\n  var hash0 = SHA256(address);\n  var hash1 = SHA256(hash0);\n  var checkSum1 = hash1.slice(0, 4);\n\n  if (checkSum[0] == checkSum1[0] && checkSum[1] == checkSum1[1] && checkSum[2] == checkSum1[2] && checkSum[3] == checkSum1[3]) {\n    return true;\n  }\n\n  return false;\n}\nfunction getBase58CheckAddressFromPriKeyBase64String(priKeyBase64String) {\n  var priKeyBytes = Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"base64DecodeFromString\"])(priKeyBase64String);\n  var pubBytes = getPubKeyFromPriKey(priKeyBytes);\n  var addressBytes = computeAddress(pubBytes);\n  return getBase58CheckAddress(addressBytes);\n}\nfunction getHexStrAddressFromPriKeyBase64String(priKeyBase64String) {\n  var priKeyBytes = Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"base64DecodeFromString\"])(priKeyBase64String);\n  var pubBytes = getPubKeyFromPriKey(priKeyBytes);\n  var addressBytes = computeAddress(pubBytes);\n  var addressHex = Object(_bytes__WEBPACK_IMPORTED_MODULE_6__[\"byteArray2hexStr\"])(addressBytes);\n  return addressHex;\n}\nfunction getAddressFromPriKeyBase64String(priKeyBase64String) {\n  var priKeyBytes = Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"base64DecodeFromString\"])(priKeyBase64String);\n  var pubBytes = getPubKeyFromPriKey(priKeyBytes);\n  var addressBytes = computeAddress(pubBytes);\n  var addressBase64 = Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"base64EncodeToString\"])(addressBytes);\n  return addressBase64;\n}\nfunction getPubKeyFromPriKey(priKeyBytes) {\n  var ec = new elliptic__WEBPACK_IMPORTED_MODULE_7__[\"ec\"]('secp256k1');\n  var key = ec.keyFromPrivate(priKeyBytes, 'bytes');\n  var pubkey = key.getPublic();\n  var x = pubkey.x;\n  var y = pubkey.y;\n  var xHex = x.toString('hex');\n\n  while (xHex.length < 64) {\n    xHex = \"0\".concat(xHex);\n  }\n\n  var yHex = y.toString('hex');\n\n  while (yHex.length < 64) {\n    yHex = \"0\".concat(yHex);\n  }\n\n  var pubkeyHex = \"04\".concat(xHex).concat(yHex);\n  var pubkeyBytes = Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"hexStr2byteArray\"])(pubkeyHex);\n  return pubkeyBytes;\n}\nfunction ECKeySign(hashBytes, priKeyBytes) {\n  var ec = new elliptic__WEBPACK_IMPORTED_MODULE_7__[\"ec\"]('secp256k1');\n  var key = ec.keyFromPrivate(priKeyBytes, 'bytes');\n  var signature = key.sign(hashBytes);\n  var r = signature.r;\n  var s = signature.s;\n  var id = signature.recoveryParam;\n  var rHex = r.toString('hex');\n\n  while (rHex.length < 64) {\n    rHex = \"0\".concat(rHex);\n  }\n\n  var sHex = s.toString('hex');\n\n  while (sHex.length < 64) {\n    sHex = \"0\".concat(sHex);\n  }\n\n  var idHex = Object(_bytes__WEBPACK_IMPORTED_MODULE_6__[\"byte2hexStr\"])(id);\n  var signHex = rHex + sHex + idHex;\n  return signHex;\n}\nfunction SHA256(msgBytes) {\n  var shaObj = new jssha__WEBPACK_IMPORTED_MODULE_1___default.a('SHA-256', 'HEX');\n  var msgHex = Object(_bytes__WEBPACK_IMPORTED_MODULE_6__[\"byteArray2hexStr\"])(msgBytes);\n  shaObj.update(msgHex);\n  var hashHex = shaObj.getHash('HEX');\n  return Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"hexStr2byteArray\"])(hashHex);\n}\nfunction passwordToAddress(password) {\n  var com_priKeyBytes = Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"base64DecodeFromString\"])(password);\n  var com_addressBytes = getAddressFromPriKey(com_priKeyBytes);\n  return getBase58CheckAddress(com_addressBytes);\n}\nfunction pkToAddress(privateKey) {\n  var com_priKeyBytes = Object(_code__WEBPACK_IMPORTED_MODULE_3__[\"hexStr2byteArray\"])(privateKey);\n  var com_addressBytes = getAddressFromPriKey(com_priKeyBytes);\n  return getBase58CheckAddress(com_addressBytes);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvY3J5cHRvLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2NyeXB0by5qcz85MGM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqc1NIQSBmcm9tICdqc3NoYSc7XG5cbmltcG9ydCB7IEFERFJFU1NfUFJFRklYLCBBRERSRVNTX1BSRUZJWF9CWVRFLCBBRERSRVNTX1NJWkUgfSBmcm9tICcuL2FkZHJlc3MnO1xuaW1wb3J0IHsgYmFzZTY0RW5jb2RlVG9TdHJpbmcgfSBmcm9tICcuL2NvZGUnO1xuaW1wb3J0IHsgYmFzZTY0RGVjb2RlRnJvbVN0cmluZywgaGV4U3RyMmJ5dGVBcnJheSB9IGZyb20gJy4vY29kZSc7XG5pbXBvcnQgeyBlbmNvZGU1OCwgZGVjb2RlNTggfSBmcm9tICcuL2Jhc2U1OCc7XG5pbXBvcnQgeyBrZWNjYWsyNTYgfSBmcm9tICdqcy1zaGEzJztcbmltcG9ydCB7IGJ5dGUyaGV4U3RyLCBieXRlQXJyYXkyaGV4U3RyIH0gZnJvbSAnLi9ieXRlcyc7XG5pbXBvcnQgeyBlYyBhcyBFQyB9IGZyb20gJ2VsbGlwdGljJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJhc2U1OENoZWNrQWRkcmVzcyhhZGRyZXNzQnl0ZXMpIHtcbiAgICBjb25zdCBoYXNoMCA9IFNIQTI1NihhZGRyZXNzQnl0ZXMpO1xuICAgIGNvbnN0IGhhc2gxID0gU0hBMjU2KGhhc2gwKTtcblxuICAgIGxldCBjaGVja1N1bSA9IGhhc2gxLnNsaWNlKDAsIDQpO1xuICAgIGNoZWNrU3VtID0gYWRkcmVzc0J5dGVzLmNvbmNhdChjaGVja1N1bSk7XG5cbiAgICByZXR1cm4gZW5jb2RlNTgoY2hlY2tTdW0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlQmFzZTU4QWRkcmVzcyhiYXNlNThTdGluZykge1xuICAgIGlmICh0eXBlb2YgKGJhc2U1OFN0aW5nKSAhPSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKGJhc2U1OFN0aW5nLmxlbmd0aCA8PSA0KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICBsZXQgYWRkcmVzcyA9IGRlY29kZTU4KGJhc2U1OFN0aW5nKTtcblxuICAgIGlmIChiYXNlNThTdGluZy5sZW5ndGggPD0gNClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgbGVuID0gYWRkcmVzcy5sZW5ndGg7XG4gICAgY29uc3Qgb2Zmc2V0ID0gbGVuIC0gNDtcbiAgICBjb25zdCBjaGVja1N1bSA9IGFkZHJlc3Muc2xpY2Uob2Zmc2V0KTtcblxuICAgIGFkZHJlc3MgPSBhZGRyZXNzLnNsaWNlKDAsIG9mZnNldCk7XG5cbiAgICBjb25zdCBoYXNoMCA9IFNIQTI1NihhZGRyZXNzKTtcbiAgICBjb25zdCBoYXNoMSA9IFNIQTI1NihoYXNoMCk7XG4gICAgY29uc3QgY2hlY2tTdW0xID0gaGFzaDEuc2xpY2UoMCwgNCk7XG5cbiAgICBpZiAoY2hlY2tTdW1bMF0gPT0gY2hlY2tTdW0xWzBdICYmIGNoZWNrU3VtWzFdID09IGNoZWNrU3VtMVsxXSAmJiBjaGVja1N1bVsyXSA9PVxuICAgICAgICBjaGVja1N1bTFbMl0gJiYgY2hlY2tTdW1bM10gPT0gY2hlY2tTdW0xWzNdXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBhZGRyZXNzO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhZGRyZXNzIHByb3ZpZGVkJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaWduVHJhbnNhY3Rpb24ocHJpS2V5Qnl0ZXMsIHRyYW5zYWN0aW9uKSB7XG4gICAgaWYgKHR5cGVvZiBwcmlLZXlCeXRlcyA9PT0gJ3N0cmluZycpXG4gICAgICAgIHByaUtleUJ5dGVzID0gaGV4U3RyMmJ5dGVBcnJheShwcmlLZXlCeXRlcyk7XG5cbiAgICBjb25zdCB0eElEID0gdHJhbnNhY3Rpb24udHhJRDtcbiAgICBjb25zdCBzaWduYXR1cmUgPSBFQ0tleVNpZ24oaGV4U3RyMmJ5dGVBcnJheSh0eElEKSwgcHJpS2V5Qnl0ZXMpO1xuXG4gICAgdHJhbnNhY3Rpb24uc2lnbmF0dXJlID0gWyBzaWduYXR1cmUgXTtcbiAgICByZXR1cm4gdHJhbnNhY3Rpb247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcnJheVRvQmFzZTY0U3RyaW5nKGEpIHtcbiAgICByZXR1cm4gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmEpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNpZ25CeXRlcyhwcml2YXRlS2V5LCBjb250ZW50cykge1xuICAgIGlmICh0eXBlb2YgcHJpdmF0ZUtleSA9PT0gJ3N0cmluZycpXG4gICAgICAgIHByaXZhdGVLZXkgPSBoZXhTdHIyYnl0ZUFycmF5KHByaXZhdGVLZXkpO1xuXG4gICAgY29uc3QgaGFzaEJ5dGVzID0gU0hBMjU2KGNvbnRlbnRzKTtcbiAgICBjb25zdCBzaWduQnl0ZXMgPSBFQ0tleVNpZ24oaGFzaEJ5dGVzLCBwcml2YXRlS2V5KTtcblxuICAgIHJldHVybiBzaWduQnl0ZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSb3dCeXRlc0Zyb21UcmFuc2FjdGlvbkJhc2U2NChiYXNlNjREYXRhKSB7XG4gICAgY29uc3QgYnl0ZXNEZWNvZGUgPSBiYXNlNjREZWNvZGVGcm9tU3RyaW5nKGJhc2U2NERhdGEpO1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gcHJvdG8ucHJvdG9jb2wuVHJhbnNhY3Rpb24uZGVzZXJpYWxpemVCaW5hcnkoYnl0ZXNEZWNvZGUpO1xuICAgIGNvbnN0IHJhdyA9IHRyYW5zYWN0aW9uLmdldFJhd0RhdGEoKTtcblxuICAgIHJldHVybiByYXcuc2VyaWFsaXplQmluYXJ5KCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5QcmlLZXkoKSB7XG4gICAgY29uc3QgZWMgPSBuZXcgRUMoJ3NlY3AyNTZrMScpO1xuICAgIGNvbnN0IGtleSA9IGVjLmdlbktleVBhaXIoKTtcbiAgICBjb25zdCBwcmlLZXkgPSBrZXkuZ2V0UHJpdmF0ZSgpO1xuXG4gICAgbGV0IHByaUtleUhleCA9IHByaUtleS50b1N0cmluZygnaGV4Jyk7XG5cbiAgICB3aGlsZSAocHJpS2V5SGV4Lmxlbmd0aCA8IDY0KSB7XG4gICAgICAgIHByaUtleUhleCA9IGAwJHtwcmlLZXlIZXh9YDtcbiAgICB9XG5cbiAgICByZXR1cm4gaGV4U3RyMmJ5dGVBcnJheShwcmlLZXlIZXgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZUFkZHJlc3MocHViQnl0ZXMpIHtcbiAgICBpZiAocHViQnl0ZXMubGVuZ3RoID09PSA2NSlcbiAgICAgICAgcHViQnl0ZXMgPSBwdWJCeXRlcy5zbGljZSgxKTtcblxuICAgIGNvbnN0IGhhc2ggPSBrZWNjYWsyNTYocHViQnl0ZXMpLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgYWRkcmVzc0hleCA9IEFERFJFU1NfUFJFRklYICsgaGFzaC5zdWJzdHJpbmcoMjQpO1xuXG4gICAgcmV0dXJuIGhleFN0cjJieXRlQXJyYXkoYWRkcmVzc0hleCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBZGRyZXNzRnJvbVByaUtleShwcmlLZXlCeXRlcykge1xuICAgIGxldCBwdWJCeXRlcyA9IGdldFB1YktleUZyb21QcmlLZXkocHJpS2V5Qnl0ZXMpO1xuICAgIHJldHVybiBjb21wdXRlQWRkcmVzcyhwdWJCeXRlcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGU1OENoZWNrKGFkZHJlc3NTdHIpIHtcbiAgICBjb25zdCBkZWNvZGVDaGVjayA9IGRlY29kZTU4KGFkZHJlc3NTdHIpO1xuXG4gICAgaWYgKGRlY29kZUNoZWNrLmxlbmd0aCA8PSA0KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBkZWNvZGVEYXRhID0gZGVjb2RlQ2hlY2suc2xpY2UoMCwgZGVjb2RlQ2hlY2subGVuZ3RoIC0gNCk7XG4gICAgY29uc3QgaGFzaDAgPSBTSEEyNTYoZGVjb2RlRGF0YSk7XG4gICAgY29uc3QgaGFzaDEgPSBTSEEyNTYoaGFzaDApO1xuXG4gICAgaWYgKGhhc2gxWzBdID09PSBkZWNvZGVDaGVja1tkZWNvZGVEYXRhLmxlbmd0aF0gJiZcbiAgICAgICAgaGFzaDFbMV0gPT09IGRlY29kZUNoZWNrW2RlY29kZURhdGEubGVuZ3RoICsgMV0gJiZcbiAgICAgICAgaGFzaDFbMl0gPT09IGRlY29kZUNoZWNrW2RlY29kZURhdGEubGVuZ3RoICsgMl0gJiZcbiAgICAgICAgaGFzaDFbM10gPT09IGRlY29kZUNoZWNrW2RlY29kZURhdGEubGVuZ3RoICsgM10pIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZURhdGE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBZGRyZXNzVmFsaWQoYmFzZTU4U3RyKSB7XG4gICAgaWYgKHR5cGVvZiAoYmFzZTU4U3RyKSAhPT0gJ3N0cmluZycpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgXG4gICAgaWYgKGJhc2U1OFN0ci5sZW5ndGggIT09IEFERFJFU1NfU0laRSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgbGV0IGFkZHJlc3MgPSBkZWNvZGU1OChiYXNlNThTdHIpO1xuXG4gICAgaWYgKGFkZHJlc3MubGVuZ3RoICE9PSAyNSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBcbiAgICBpZiAoYWRkcmVzc1swXSAhPT0gQUREUkVTU19QUkVGSVhfQllURSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBcbiAgICBjb25zdCBjaGVja1N1bSA9IGFkZHJlc3Muc2xpY2UoMjEpO1xuICAgIGFkZHJlc3MgPSBhZGRyZXNzLnNsaWNlKDAsIDIxKTtcblxuICAgIGNvbnN0IGhhc2gwID0gU0hBMjU2KGFkZHJlc3MpO1xuICAgIGNvbnN0IGhhc2gxID0gU0hBMjU2KGhhc2gwKTtcbiAgICBjb25zdCBjaGVja1N1bTEgPSBoYXNoMS5zbGljZSgwLCA0KTtcblxuICAgIGlmIChjaGVja1N1bVswXSA9PSBjaGVja1N1bTFbMF0gJiYgY2hlY2tTdW1bMV0gPT0gY2hlY2tTdW0xWzFdICYmIGNoZWNrU3VtWzJdID09XG4gICAgICAgIGNoZWNrU3VtMVsyXSAmJiBjaGVja1N1bVszXSA9PSBjaGVja1N1bTFbM11cbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCYXNlNThDaGVja0FkZHJlc3NGcm9tUHJpS2V5QmFzZTY0U3RyaW5nKHByaUtleUJhc2U2NFN0cmluZykge1xuICAgIGNvbnN0IHByaUtleUJ5dGVzID0gYmFzZTY0RGVjb2RlRnJvbVN0cmluZyhwcmlLZXlCYXNlNjRTdHJpbmcpO1xuICAgIGNvbnN0IHB1YkJ5dGVzID0gZ2V0UHViS2V5RnJvbVByaUtleShwcmlLZXlCeXRlcyk7XG4gICAgY29uc3QgYWRkcmVzc0J5dGVzID0gY29tcHV0ZUFkZHJlc3MocHViQnl0ZXMpO1xuXG4gICAgcmV0dXJuIGdldEJhc2U1OENoZWNrQWRkcmVzcyhhZGRyZXNzQnl0ZXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGV4U3RyQWRkcmVzc0Zyb21QcmlLZXlCYXNlNjRTdHJpbmcocHJpS2V5QmFzZTY0U3RyaW5nKSB7XG4gICAgY29uc3QgcHJpS2V5Qnl0ZXMgPSBiYXNlNjREZWNvZGVGcm9tU3RyaW5nKHByaUtleUJhc2U2NFN0cmluZyk7XG4gICAgY29uc3QgcHViQnl0ZXMgPSBnZXRQdWJLZXlGcm9tUHJpS2V5KHByaUtleUJ5dGVzKTtcbiAgICBjb25zdCBhZGRyZXNzQnl0ZXMgPSBjb21wdXRlQWRkcmVzcyhwdWJCeXRlcyk7XG4gICAgY29uc3QgYWRkcmVzc0hleCA9IGJ5dGVBcnJheTJoZXhTdHIoYWRkcmVzc0J5dGVzKTtcblxuICAgIHJldHVybiBhZGRyZXNzSGV4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWRkcmVzc0Zyb21QcmlLZXlCYXNlNjRTdHJpbmcocHJpS2V5QmFzZTY0U3RyaW5nKSB7XG4gICAgY29uc3QgcHJpS2V5Qnl0ZXMgPSBiYXNlNjREZWNvZGVGcm9tU3RyaW5nKHByaUtleUJhc2U2NFN0cmluZyk7XG4gICAgY29uc3QgcHViQnl0ZXMgPSBnZXRQdWJLZXlGcm9tUHJpS2V5KHByaUtleUJ5dGVzKTtcbiAgICBjb25zdCBhZGRyZXNzQnl0ZXMgPSBjb21wdXRlQWRkcmVzcyhwdWJCeXRlcyk7XG4gICAgY29uc3QgYWRkcmVzc0Jhc2U2NCA9IGJhc2U2NEVuY29kZVRvU3RyaW5nKGFkZHJlc3NCeXRlcyk7XG5cbiAgICByZXR1cm4gYWRkcmVzc0Jhc2U2NDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFB1YktleUZyb21QcmlLZXkocHJpS2V5Qnl0ZXMpIHtcbiAgICBjb25zdCBlYyA9IG5ldyBFQygnc2VjcDI1NmsxJyk7XG4gICAgY29uc3Qga2V5ID0gZWMua2V5RnJvbVByaXZhdGUocHJpS2V5Qnl0ZXMsICdieXRlcycpO1xuICAgIGNvbnN0IHB1YmtleSA9IGtleS5nZXRQdWJsaWMoKTtcbiAgICBjb25zdCB4ID0gcHVia2V5Lng7XG4gICAgY29uc3QgeSA9IHB1YmtleS55O1xuXG4gICAgbGV0IHhIZXggPSB4LnRvU3RyaW5nKCdoZXgnKTtcblxuICAgIHdoaWxlICh4SGV4Lmxlbmd0aCA8IDY0KSB7XG4gICAgICAgIHhIZXggPSBgMCR7eEhleH1gO1xuICAgIH1cblxuICAgIGxldCB5SGV4ID0geS50b1N0cmluZygnaGV4Jyk7XG5cbiAgICB3aGlsZSAoeUhleC5sZW5ndGggPCA2NCkge1xuICAgICAgICB5SGV4ID0gYDAke3lIZXh9YDtcbiAgICB9XG5cbiAgICBjb25zdCBwdWJrZXlIZXggPSBgMDQke3hIZXh9JHt5SGV4fWA7XG4gICAgY29uc3QgcHVia2V5Qnl0ZXMgPSBoZXhTdHIyYnl0ZUFycmF5KHB1YmtleUhleCk7XG5cbiAgICByZXR1cm4gcHVia2V5Qnl0ZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBFQ0tleVNpZ24oaGFzaEJ5dGVzLCBwcmlLZXlCeXRlcykge1xuICAgIGNvbnN0IGVjID0gbmV3IEVDKCdzZWNwMjU2azEnKTtcbiAgICBjb25zdCBrZXkgPSBlYy5rZXlGcm9tUHJpdmF0ZShwcmlLZXlCeXRlcywgJ2J5dGVzJyk7XG4gICAgY29uc3Qgc2lnbmF0dXJlID0ga2V5LnNpZ24oaGFzaEJ5dGVzKTtcbiAgICBjb25zdCByID0gc2lnbmF0dXJlLnI7XG4gICAgY29uc3QgcyA9IHNpZ25hdHVyZS5zO1xuICAgIGNvbnN0IGlkID0gc2lnbmF0dXJlLnJlY292ZXJ5UGFyYW07XG5cbiAgICBsZXQgckhleCA9IHIudG9TdHJpbmcoJ2hleCcpO1xuXG4gICAgd2hpbGUgKHJIZXgubGVuZ3RoIDwgNjQpIHtcbiAgICAgICAgckhleCA9IGAwJHtySGV4fWA7XG4gICAgfVxuXG4gICAgbGV0IHNIZXggPSBzLnRvU3RyaW5nKCdoZXgnKTtcblxuICAgIHdoaWxlIChzSGV4Lmxlbmd0aCA8IDY0KSB7XG4gICAgICAgIHNIZXggPSBgMCR7c0hleH1gO1xuICAgIH1cblxuICAgIGNvbnN0IGlkSGV4ID0gYnl0ZTJoZXhTdHIoaWQpO1xuICAgIGNvbnN0IHNpZ25IZXggPSBySGV4ICsgc0hleCArIGlkSGV4O1xuXG4gICAgcmV0dXJuIHNpZ25IZXg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTSEEyNTYobXNnQnl0ZXMpIHtcbiAgICBjb25zdCBzaGFPYmogPSBuZXcganNTSEEoJ1NIQS0yNTYnLCAnSEVYJyk7XG4gICAgY29uc3QgbXNnSGV4ID0gYnl0ZUFycmF5MmhleFN0cihtc2dCeXRlcyk7XG5cbiAgICBzaGFPYmoudXBkYXRlKG1zZ0hleCk7XG4gICAgY29uc3QgaGFzaEhleCA9IHNoYU9iai5nZXRIYXNoKCdIRVgnKTtcblxuICAgIHJldHVybiBoZXhTdHIyYnl0ZUFycmF5KGhhc2hIZXgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFzc3dvcmRUb0FkZHJlc3MocGFzc3dvcmQpIHtcbiAgICBjb25zdCBjb21fcHJpS2V5Qnl0ZXMgPSBiYXNlNjREZWNvZGVGcm9tU3RyaW5nKHBhc3N3b3JkKTtcbiAgICBjb25zdCBjb21fYWRkcmVzc0J5dGVzID0gZ2V0QWRkcmVzc0Zyb21QcmlLZXkoY29tX3ByaUtleUJ5dGVzKTtcblxuICAgIHJldHVybiBnZXRCYXNlNThDaGVja0FkZHJlc3MoY29tX2FkZHJlc3NCeXRlcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwa1RvQWRkcmVzcyhwcml2YXRlS2V5KSB7XG4gICAgY29uc3QgY29tX3ByaUtleUJ5dGVzID0gaGV4U3RyMmJ5dGVBcnJheShwcml2YXRlS2V5KTtcbiAgICBjb25zdCBjb21fYWRkcmVzc0J5dGVzID0gZ2V0QWRkcmVzc0Zyb21QcmlLZXkoY29tX3ByaUtleUJ5dGVzKTtcblxuICAgIHJldHVybiBnZXRCYXNlNThDaGVja0FkZHJlc3MoY29tX2FkZHJlc3NCeXRlcyk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUdBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFFQTtBQUdBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils/crypto.js\n");

/***/ }),

/***/ "./src/utils/index.js":
/*!****************************!*\
  !*** ./src/utils/index.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread */ \"@babel/runtime/helpers/objectSpread\");\n/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _accounts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./accounts */ \"./src/utils/accounts.js\");\n/* harmony import */ var _base58__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base58 */ \"./src/utils/base58.js\");\n/* harmony import */ var _bytes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./bytes */ \"./src/utils/bytes.js\");\n/* harmony import */ var _crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./crypto */ \"./src/utils/crypto.js\");\n/* harmony import */ var _code__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./code */ \"./src/utils/code.js\");\n/* harmony import */ var _abi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./abi */ \"./src/utils/abi.js\");\n/* harmony import */ var validator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! validator */ \"validator\");\n/* harmony import */ var validator__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(validator__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! bignumber.js */ \"bignumber.js\");\n/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bignumber_js__WEBPACK_IMPORTED_MODULE_8__);\n\n\n\n\n\n\n\n\n\nvar utils = {\n  isValidURL: function isValidURL(url) {\n    if (typeof url !== 'string') return false;\n    return validator__WEBPACK_IMPORTED_MODULE_7___default.a.isURL(url.toString(), {\n      protocols: ['http', 'https']\n    });\n  },\n  isObject: function isObject(obj) {\n    return obj === Object(obj) && Object.prototype.toString.call(obj) !== '[object Array]';\n  },\n  isArray: function isArray(array) {\n    return Array.isArray(array);\n  },\n  isJson: function isJson(string) {\n    try {\n      return !!JSON.parse(string);\n    } catch (ex) {\n      return false;\n    }\n  },\n  isBoolean: function isBoolean(bool) {\n    return typeof bool === 'boolean';\n  },\n  isBigNumber: function isBigNumber(number) {\n    return number && (number instanceof bignumber_js__WEBPACK_IMPORTED_MODULE_8___default.a || number.constructor && number.constructor.name === 'BigNumber');\n  },\n  isString: function isString(string) {\n    return typeof string === 'string' || string && string.constructor && string.constructor.name === 'String';\n  },\n  isFunction: function isFunction(obj) {\n    return typeof obj === 'function';\n  },\n  isHex: function isHex(string) {\n    return typeof string === 'string' && !isNaN(parseInt(string, 16)) && /^(0x|)[a-fA-F0-9]+$/.test(string);\n  },\n  isInteger: function isInteger(number) {\n    return Number.isInteger(Number(number));\n  },\n  hasProperty: function hasProperty(obj, property) {\n    return Object.prototype.hasOwnProperty.call(obj, property);\n  },\n  hasProperties: function hasProperties(obj) {\n    var _this = this;\n\n    for (var _len = arguments.length, properties = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      properties[_key - 1] = arguments[_key];\n    }\n\n    return properties.length && !properties.map(function (property) {\n      return _this.hasProperty(obj, property);\n    }).includes(false);\n  },\n  injectPromise: function injectPromise(func) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    return new Promise(function (resolve, reject) {\n      func.apply(void 0, args.concat([function (err, res) {\n        if (err) reject(err);else resolve(res);\n      }]));\n    });\n  },\n  promiseInjector: function promiseInjector(scope) {\n    var _this2 = this;\n\n    return function (func) {\n      for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n        args[_key3 - 1] = arguments[_key3];\n      }\n\n      return _this2.injectPromise.apply(_this2, [func.bind(scope)].concat(args));\n    };\n  },\n  mapEvent: function mapEvent(event) {\n    return {\n      block: event.block_number,\n      timestamp: event.block_timestamp,\n      contract: event.contract_address,\n      name: event.event_name,\n      transaction: event.transaction_id,\n      result: event.result,\n      resourceNode: event.resource_Node\n    };\n  },\n  parseEvent: function parseEvent(event, _ref) {\n    var abi = _ref.inputs;\n    if (!event.result) return event;\n\n    if (this.isObject(event.result)) {\n      for (var i = 0; i < abi.length; i++) {\n        var obj = abi[i];\n        if (obj.type == 'address' && obj.name in event.result) event.result[obj.name] = '41' + event.result[obj.name].substr(2).toLowerCase();\n      }\n    } else if (this.isArray(event.result)) {\n      event.result = event.result.reduce(function (obj, result, index) {\n        var _abi$index = abi[index],\n            name = _abi$index.name,\n            type = _abi$index.type;\n        if (type == 'address') result = '41' + result.substr(2).toLowerCase();\n        obj[name] = result;\n        return obj;\n      }, {});\n    }\n\n    return event;\n  },\n  padLeft: function padLeft(input, padding, amount) {\n    var res = input.toString();\n\n    while (res.length < amount) {\n      res = padding + res;\n    }\n\n    return res;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default()({}, utils, {\n  code: _code__WEBPACK_IMPORTED_MODULE_5__,\n  accounts: _accounts__WEBPACK_IMPORTED_MODULE_1__,\n  base58: _base58__WEBPACK_IMPORTED_MODULE_2__,\n  bytes: _bytes__WEBPACK_IMPORTED_MODULE_3__,\n  crypto: _crypto__WEBPACK_IMPORTED_MODULE_4__,\n  abi: _abi__WEBPACK_IMPORTED_MODULE_6__\n}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvaW5kZXguanM/ZWQwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBhY2NvdW50cyBmcm9tICcuL2FjY291bnRzJztcbmltcG9ydCAqIGFzIGJhc2U1OCBmcm9tICcuL2Jhc2U1OCc7XG5pbXBvcnQgKiBhcyBieXRlcyBmcm9tICcuL2J5dGVzJztcbmltcG9ydCAqIGFzIGNyeXB0byBmcm9tICcuL2NyeXB0byc7XG5pbXBvcnQgKiBhcyBjb2RlIGZyb20gJy4vY29kZSc7XG5pbXBvcnQgKiBhcyBhYmkgZnJvbSAnLi9hYmknO1xuXG5pbXBvcnQgdmFsaWRhdG9yIGZyb20gJ3ZhbGlkYXRvcic7XG5pbXBvcnQgQmlnTnVtYmVyIGZyb20gJ2JpZ251bWJlci5qcyc7XG5cbmNvbnN0IHV0aWxzID0ge1xuICAgIGlzVmFsaWRVUkwodXJsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRvci5pc1VSTCh1cmwudG9TdHJpbmcoKSwge1xuICAgICAgICAgICAgcHJvdG9jb2xzOiBbICdodHRwJywgJ2h0dHBzJyBdXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBpc09iamVjdChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiA9PT0gT2JqZWN0KG9iaikgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgIT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfSxcblxuICAgIGlzQXJyYXkoYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJyYXkpO1xuICAgIH0sXG5cbiAgICBpc0pzb24oc3RyaW5nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gISFKU09OLnBhcnNlKHN0cmluZyk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgaXNCb29sZWFuKGJvb2wpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBib29sID09PSAnYm9vbGVhbic7XG4gICAgfSxcblxuICAgIGlzQmlnTnVtYmVyKG51bWJlcikge1xuICAgICAgICByZXR1cm4gbnVtYmVyICYmIChudW1iZXIgaW5zdGFuY2VvZiBCaWdOdW1iZXIgfHwgKG51bWJlci5jb25zdHJ1Y3RvciAmJiBudW1iZXIuY29uc3RydWN0b3IubmFtZSA9PT0gJ0JpZ051bWJlcicpKTtcbiAgICB9LFxuXG4gICAgaXNTdHJpbmcoc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygc3RyaW5nID09PSAnc3RyaW5nJyB8fCAoc3RyaW5nICYmIHN0cmluZy5jb25zdHJ1Y3RvciAmJiBzdHJpbmcuY29uc3RydWN0b3IubmFtZSA9PT0gJ1N0cmluZycpO1xuICAgIH0sXG5cbiAgICBpc0Z1bmN0aW9uKG9iaikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9LFxuXG4gICAgaXNIZXgoc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiAodHlwZW9mIHN0cmluZyA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICYmICFpc05hTihwYXJzZUludChzdHJpbmcsIDE2KSlcbiAgICAgICAgICAgICYmIC9eKDB4fClbYS1mQS1GMC05XSskLy50ZXN0KHN0cmluZykpO1xuICAgIH0sXG5cbiAgICBpc0ludGVnZXIobnVtYmVyKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNJbnRlZ2VyKFxuICAgICAgICAgICAgTnVtYmVyKG51bWJlcilcbiAgICAgICAgKTtcbiAgICB9LFxuXG4gICAgaGFzUHJvcGVydHkob2JqLCBwcm9wZXJ0eSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcGVydHkpO1xuICAgIH0sXG5cbiAgICBoYXNQcm9wZXJ0aWVzKG9iaiwgLi4ucHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4gcHJvcGVydGllcy5sZW5ndGggJiYgIXByb3BlcnRpZXMubWFwKHByb3BlcnR5ID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhc1Byb3BlcnR5KG9iaiwgcHJvcGVydHkpXG4gICAgICAgIH0pLmluY2x1ZGVzKGZhbHNlKTtcbiAgICB9LFxuXG4gICAgaW5qZWN0UHJvbWlzZShmdW5jLCAuLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBmdW5jKC4uLmFyZ3MsIChlcnIsIHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmKGVycilcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgZWxzZSByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHByb21pc2VJbmplY3RvcihzY29wZSkge1xuICAgICAgICByZXR1cm4gKGZ1bmMsIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluamVjdFByb21pc2UoZnVuYy5iaW5kKHNjb3BlKSwgLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgbWFwRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJsb2NrOiBldmVudC5ibG9ja19udW1iZXIsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IGV2ZW50LmJsb2NrX3RpbWVzdGFtcCxcbiAgICAgICAgICAgIGNvbnRyYWN0OiBldmVudC5jb250cmFjdF9hZGRyZXNzLFxuICAgICAgICAgICAgbmFtZTogZXZlbnQuZXZlbnRfbmFtZSxcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uOiBldmVudC50cmFuc2FjdGlvbl9pZCxcbiAgICAgICAgICAgIHJlc3VsdDogZXZlbnQucmVzdWx0LFxuICAgICAgICAgICAgcmVzb3VyY2VOb2RlOiBldmVudC5yZXNvdXJjZV9Ob2RlXG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIHBhcnNlRXZlbnQoZXZlbnQsIHsgaW5wdXRzOiBhYmkgfSkge1xuICAgICAgICBpZighZXZlbnQucmVzdWx0KVxuICAgICAgICAgICAgcmV0dXJuIGV2ZW50O1xuXG4gICAgICAgIGlmICh0aGlzLmlzT2JqZWN0KGV2ZW50LnJlc3VsdCkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWJpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9iaiA9IGFiaVtpXTtcbiAgICAgICAgICAgICAgICBpZiAob2JqLnR5cGUgPT0gJ2FkZHJlc3MnICYmIG9iai5uYW1lIGluIGV2ZW50LnJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucmVzdWx0W29iai5uYW1lXSA9ICc0MScgKyBldmVudC5yZXN1bHRbb2JqLm5hbWVdLnN1YnN0cigyKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNBcnJheShldmVudC5yZXN1bHQpKSB7XG4gICAgICAgICAgICBldmVudC5yZXN1bHQgPSBldmVudC5yZXN1bHQucmVkdWNlKChvYmosIHJlc3VsdCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGVcbiAgICAgICAgICAgICAgICB9ID0gYWJpW2luZGV4XTtcblxuICAgICAgICAgICAgICAgIGlmKHR5cGUgPT0gJ2FkZHJlc3MnKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAnNDEnICsgcmVzdWx0LnN1YnN0cigyKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgICAgb2JqW25hbWVdID0gcmVzdWx0O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBldmVudDtcbiAgICB9LFxuXG4gICAgcGFkTGVmdChpbnB1dCwgcGFkZGluZywgYW1vdW50KSB7XG4gICAgICAgIGxldCByZXMgPSBpbnB1dC50b1N0cmluZygpO1xuXG4gICAgICAgIHdoaWxlKHJlcy5sZW5ndGggPCBhbW91bnQpXG4gICAgICAgICAgICByZXMgPSBwYWRkaW5nICsgcmVzO1xuXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLi4udXRpbHMsXG4gICAgY29kZSxcbiAgICBhY2NvdW50cyxcbiAgICBiYXNlNTgsXG4gICAgYnl0ZXMsXG4gICAgY3J5cHRvLFxuICAgIGFiaVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQS9IQTtBQWtJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils/index.js\n");

/***/ }),

/***/ "@babel/runtime/helpers/assertThisInitialized":
/*!***************************************************************!*\
  !*** external "@babel/runtime/helpers/assertThisInitialized" ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/helpers/assertThisInitialized\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2Fzc2VydFRoaXNJbml0aWFsaXplZFwiP2U0ZTUiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3NlcnRUaGlzSW5pdGlhbGl6ZWRcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/helpers/assertThisInitialized\n");

/***/ }),

/***/ "@babel/runtime/helpers/asyncToGenerator":
/*!**********************************************************!*\
  !*** external "@babel/runtime/helpers/asyncToGenerator" ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yXCI/MDcyYyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3JcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/helpers/asyncToGenerator\n");

/***/ }),

/***/ "@babel/runtime/helpers/classCallCheck":
/*!********************************************************!*\
  !*** external "@babel/runtime/helpers/classCallCheck" ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/helpers/classCallCheck\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2tcIj8yNGIzIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2tcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/helpers/classCallCheck\n");

/***/ }),

/***/ "@babel/runtime/helpers/createClass":
/*!*****************************************************!*\
  !*** external "@babel/runtime/helpers/createClass" ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/helpers/createClass\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3NcIj8zNmExIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3NcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/helpers/createClass\n");

/***/ }),

/***/ "@babel/runtime/helpers/defineProperty":
/*!********************************************************!*\
  !*** external "@babel/runtime/helpers/defineProperty" ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/helpers/defineProperty\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHlcIj8xODhkIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHlcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/helpers/defineProperty\n");

/***/ }),

/***/ "@babel/runtime/helpers/getPrototypeOf":
/*!********************************************************!*\
  !*** external "@babel/runtime/helpers/getPrototypeOf" ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/helpers/getPrototypeOf\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZ2V0UHJvdG90eXBlT2ZcIj8yMGE4Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZ2V0UHJvdG90eXBlT2ZcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/helpers/getPrototypeOf\n");

/***/ }),

/***/ "@babel/runtime/helpers/inherits":
/*!**************************************************!*\
  !*** external "@babel/runtime/helpers/inherits" ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/helpers/inherits\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHNcIj83NGJhIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHNcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/helpers/inherits\n");

/***/ }),

/***/ "@babel/runtime/helpers/objectSpread":
/*!******************************************************!*\
  !*** external "@babel/runtime/helpers/objectSpread" ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/helpers/objectSpread\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZFwiP2UxMDgiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWRcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/helpers/objectSpread\n");

/***/ }),

/***/ "@babel/runtime/helpers/possibleConstructorReturn":
/*!*******************************************************************!*\
  !*** external "@babel/runtime/helpers/possibleConstructorReturn" ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/helpers/possibleConstructorReturn\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuXCI/MDNjNyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm5cIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/helpers/possibleConstructorReturn\n");

/***/ }),

/***/ "@babel/runtime/helpers/slicedToArray":
/*!*******************************************************!*\
  !*** external "@babel/runtime/helpers/slicedToArray" ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/helpers/slicedToArray\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zbGljZWRUb0FycmF5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zbGljZWRUb0FycmF5XCI/MGRiNSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3NsaWNlZFRvQXJyYXlcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/helpers/slicedToArray\n");

/***/ }),

/***/ "@babel/runtime/helpers/toConsumableArray":
/*!***********************************************************!*\
  !*** external "@babel/runtime/helpers/toConsumableArray" ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/helpers/toConsumableArray\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvaGVscGVycy90b0NvbnN1bWFibGVBcnJheS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXlcIj80ZDliIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXlcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/helpers/toConsumableArray\n");

/***/ }),

/***/ "@babel/runtime/helpers/typeof":
/*!************************************************!*\
  !*** external "@babel/runtime/helpers/typeof" ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/helpers/typeof\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZlwiPzg0MWIiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2ZcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/helpers/typeof\n");

/***/ }),

/***/ "@babel/runtime/regenerator":
/*!*********************************************!*\
  !*** external "@babel/runtime/regenerator" ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"@babel/runtime/regenerator\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvclwiPzY4NGYiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3JcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///@babel/runtime/regenerator\n");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"axios\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXhpb3MuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJheGlvc1wiPzcwYzYiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYXhpb3NcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///axios\n");

/***/ }),

/***/ "bignumber.js":
/*!*******************************!*\
  !*** external "bignumber.js" ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"bignumber.js\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlnbnVtYmVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYmlnbnVtYmVyLmpzXCI/MzBmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJiaWdudW1iZXIuanNcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///bignumber.js\n");

/***/ }),

/***/ "elliptic":
/*!***************************!*\
  !*** external "elliptic" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"elliptic\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWxsaXB0aWMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJlbGxpcHRpY1wiP2I2MGIiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZWxsaXB0aWNcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///elliptic\n");

/***/ }),

/***/ "ethers":
/*!*************************!*\
  !*** external "ethers" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"ethers\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXRoZXJzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiZXRoZXJzXCI/NzMxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJldGhlcnNcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///ethers\n");

/***/ }),

/***/ "eventemitter3":
/*!********************************!*\
  !*** external "eventemitter3" ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"eventemitter3\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnRlbWl0dGVyMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImV2ZW50ZW1pdHRlcjNcIj8wNDhmIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImV2ZW50ZW1pdHRlcjNcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///eventemitter3\n");

/***/ }),

/***/ "js-sha3":
/*!**************************!*\
  !*** external "js-sha3" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"js-sha3\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMtc2hhMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImpzLXNoYTNcIj8zNDc0Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImpzLXNoYTNcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///js-sha3\n");

/***/ }),

/***/ "jssha":
/*!************************!*\
  !*** external "jssha" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"jssha\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianNzaGEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqc3NoYVwiPzU0ZmQiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwianNzaGFcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///jssha\n");

/***/ }),

/***/ "validator":
/*!****************************!*\
  !*** external "validator" ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"validator\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdG9yLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwidmFsaWRhdG9yXCI/YjBjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ2YWxpZGF0b3JcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///validator\n");

/***/ })

/******/ })["default"];